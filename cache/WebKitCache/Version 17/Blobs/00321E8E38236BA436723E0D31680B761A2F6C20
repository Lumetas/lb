"use strict";(window.webpackChunk=window.webpackChunk||[]).push([[30807,83371,85203],{29368:(e,t,n)=>{n.r(t),n.d(t,{EMBRYO_TYPES:()=>c,ERRORS_TYPES:()=>_,HANDLER_IDS:()=>u,STATIC_BLOCK_CODES:()=>l,STOP_ACTION_TYPES:()=>d,default:()=>b});var r=n(629133),o=n.n(r),s=n(445368),i=n(500034),a=n(450422),l=(n(368439),{trigger:"trigger"}),c={show:"show",distribution:"distribution",send_external_message:"send_external_message",send_message:"send_message",send_comment:"send_comment",reaction:"reaction",list_message:"list_message",opt_in:"opt_in",send_internal:"send_internal",write_first:"write_first",wait:"wait",actions:"actions",conditions:"conditions",conditions_onlinechat:"conditions_onlinechat",validations:"validations",rpa:"rpa",goto:"goto",start_bot:"start_bot",code:"code",widgets:"widgets",stop:"stop",send_img:"send_img"},u={show:"show",distribution:"distribution",send_external_message:"send_external_message",send_message:"send_message",send_comment:"send_comment",reaction:"reaction",list_message:"list_message",opt_in:"opt_in",send_img:"send_img",meta_conversions:"meta_conversions",manage_tags:"manage_tags",manage_segments:"manage_segments",change_status:"change_status",change_responsible_user:"change_responsible_user",set_custom_fields:"set_custom_fields",add_note:"add_note",create_task:"create_task",close_tasks:"close_tasks",generate_store_card:"generate_store_card",send_internal:"send_internal",subscribe:"subscribe",create_lead:"create_lead",send_email:"send_email",send_hook:"send_hook",create_and_fill_form:"create_and_fill_form",create_customer:"create_customer",create_invoice:"create_invoice",write_first:"write_first",wait:"wait",conditions:"conditions",conditions_onlinechat:"conditions_onlinechat",widget:"widget",_embryo:"_embryo",_start:"_start",trigger:"trigger",unset_segment:"unset_segment",set_segment:"set_segment",unset_tag:"unset_tag",set_tag:"set_tag",rpa:"rpa",_stop:"_stop",change_conversation_status:"change_conversation_status",start_bot:"start"},d={talk_close:"talk-close",salesbot_start:"salesbot-start"},_={validation:"validation_errors",empty_bot:"empty_bot"},f=[c.send_message,c.show,c.send_external_message,c.send_internal,c.write_first,c.wait,c.actions,c.conditions,c.conditions_onlinechat,c.goto,c.stop],g=[u.send_img,u.manage_segments,u.set_custom_fields,u.add_note,u.change_conversation_status],p=[{id:c.send_message,text:(0,s.i18n)("Send message (salesbot)")},{id:c.show,text:(0,s.i18n)("Send message (salesbot)")},{id:c.send_external_message,text:(0,s.i18n)("Send message (salesbot)")},(0,i.isFeatureAvailable)("salesbot_reaction_handler")?{id:c.reaction,text:(0,s.i18n)("Reaction")}:null,(0,i.isFeatureAvailable)("ig_replies_to_comments_in_bot")?{id:c.send_comment,text:(0,s.i18n)("Comment")}:null,{id:c.send_internal,text:(0,s.i18n)("Send internal message")},(0,i.isFeatureAvailable)("extended_messaging_in_bot")?null:{id:c.write_first,text:(0,s.i18n)("Start communication")},{id:c.list_message,text:(0,s.i18n)("List Message (WhatsApp)")},{id:c.wait,text:(0,s.i18n)("Pause")},{id:c.opt_in,text:(0,s.i18n)("Subscribe (Meta)")},{id:c.actions,text:(0,s.i18n)("Action (salesbot)")},{id:c.conditions,text:(0,s.i18n)("Condition (salesbot)")},{id:c.conditions_onlinechat,text:(0,s.i18n)("Condition (salesbot)")},{id:c.validations,text:(0,s.i18n)("Validation (salesbot)")},APP.constant("account").is_rpa_available?{id:c.rpa,text:"RPA"}:null,{id:c.goto,text:(0,s.i18n)("Go to another step")},{id:c.start_bot,text:(0,s.i18n)("(to)start Salesbot")},{id:c.code,text:(0,s.i18n)("Custom step (code)")},{id:c.widgets,text:(0,s.i18n)("Widget (salesbot)")},(0,i.isFeatureAvailable)("distribution_salesbot_handler")?{id:c.distribution,text:(0,i.isFeatureAvailable)("is_customization_for_global")?(0,s.i18n)("Round Robin"):(0,s.i18n)("Round Robin RU")}:null,{id:c.stop,text:(0,s.i18n)("Stop Salesbot")}],h=[{id:u.send_img,text:(0,s.i18n)("Send Image (salesbot)")},{id:u.manage_tags,text:(0,s.i18n)("Manage tags")},{id:u.manage_segments,text:(0,s.i18n)("Manage segments")},{id:u.change_status,text:(0,s.i18n)("Change lead status")},{id:u.change_responsible_user,text:(0,s.i18n)("Change responsible user (salesbot)")},{id:u.set_custom_fields,text:(0,s.i18n)("Set field (salesbot)")},{id:u.add_note,text:(0,s.i18n)("Add note")},{id:u.create_task,text:(0,s.i18n)("Add task")},{id:u.create_invoice,text:(0,s.i18n)("Create invoice")},{id:u.close_tasks,text:(0,s.i18n)("Complete tasks")},{id:u.generate_store_card,text:(0,s.i18n)("Generate store card (marketing bot)")},{id:u.subscribe,text:(0,s.i18n)("Manage participants")},{id:u.create_lead,text:(0,s.i18n)("Create lead")},{id:u.send_email,text:(0,s.i18n)("Send email")},{id:u.send_hook,text:(0,s.i18n)("Send webhook")},{id:u.create_and_fill_form,text:(0,s.i18n)("Generate form (salesbot)")},{id:u.create_customer,text:(0,s.i18n)("Create customer")},{id:u.change_conversation_status,text:(0,s.i18n)("Change conversation status")}];(0,i.isFeatureAvailable)("fb_conversions")&&h.push({id:u.meta_conversions,text:"Meta Conversions API"}),(0,a.isAmoChatsFullEnabled)()&&(p=o().filter(p,(function(e){return e&&o().contains(f,e.id)})),h=o().filter(h,(function(e){return e&&o().contains(g,e.id)})));const b={BOT_TEXT:1,BOT_VISUAL:2,BOT_TYPE_REGULAR:0,BOT_TYPE_GREETING:1,BOT_TYPE_MARKETING:2,BOT_TYPE_NPS:3,API_V4_TYPES_MAP:{0:"regular",1:"greeting",2:"marketing",3:"nps"},EXPORT_IMPORT_ALLOWED_BOT_TYPES:[0],LIST_PER_PAGE:30,ACTION_TEMPLATE:1,ACTION_BOT:2,PHRASES_TO_IGNORE_TYPE:1,UNSORTED_STATUS_TYPE:1,INACTIVE_STATUS:!1,ACTIVE_STATUS:!0,ANY_STATUS:"any",ENUMS_FIELDS:[APP.cf_types.multiselect,APP.cf_types.select,APP.cf_types.radiobutton],IMPLICIT_ENUMS_FIELDS:[AMOCRM.cf_types.smart_address,AMOCRM.cf_types.chained_list],NUMERIC_FIELDS_TYPES:[APP.cf_types.numeric,APP.cf_types.price],SEND_MESSAGE_ACTIONS:[u.show,u.send_external_message,u.send_message,u.write_first,u.send_img],POSSIBLE_ACTIONS:o().sortBy(h,(function(e){return e.text})),EMBRYO_ACTIONS:o().compact(p)}},812692:(e,t,n)=>{n.r(t),n.d(t,{default:()=>i});var r=n(629133),o=n.n(r),s={response:"response",handlers:"handlers",endpoints:"endpoints"};function i(){return o().clone(s)}},44812:(e,t,n)=>{n.r(t),n.d(t,{default:()=>c});var r=n(629133),o=n.n(r),s=n(285203),i=n(700839),a=n(535503),l=n(29368);const c=o().extend({},s.default,{getBotCollection:function(e){switch(e){case l.default.BOT_TYPE_MARKETING:return this.getMarketingbotCollection();case l.default.BOT_TYPE_REGULAR:case l.default.BOT_TYPE_NPS:return this.getSalesbotCollection();case l.default.BOT_TYPE_GREETING:return this.getGreetingbotCollection()}},getSalesbotCollection:function(){return this.salesbot_collection||(this.salesbot_collection=new a.default(null,{types:[l.default.BOT_TYPE_REGULAR,l.default.BOT_TYPE_NPS]})),this.salesbot_collection},getGreetingbotCollection:function(){return this.greetingbot_collection||(this.greetingbot_collection=new a.default(null,{types:[l.default.BOT_TYPE_GREETING]})),this.greetingbot_collection},getMarketingbotCollection:function(){return this.marketingbot_collection||(this.marketingbot_collection=new a.default(null,{types:[l.default.BOT_TYPE_MARKETING,l.default.BOT_TYPE_REGULAR]})),this.marketingbot_collection},getWidgetsCollection:function(){return this.widgets_collection||(this.widgets_collection=new i.default([],{area:"salesbot_designer"}),this.widgets_collection.clearCache()),this.widgets_collection}})},285203:(e,t,n)=>{n.r(t),n.d(t,{default:()=>r});const r={getSalesbotCollection:function(){throw new Error("getSalesbotCollection must be overrided!")},getGreetingbotCollection:function(){throw new Error("getGreetingbotCollection must be overrided!")},getMarketingbotCollection:function(){throw new Error("getMarketingbotCollection must be overrided!")},getBotCollection:function(){throw new Error("getBotCollection must be overrided!")},getWidgetsCollection:function(){throw new Error("getWidgetsCollection must be overrided!")}}},923023:(e,t,n)=>{n.r(t),n.d(t,{default:()=>c});var r=n(629133),o=n.n(r),s=n(538283),i=n(790401),a=n(265519),l=n(661533);const c=o().extend({},s.default,{getHandler:function(e){return o().findWhere(this[this.aliases.response].data.handlers,{code:e})},getResponse:function(){return this[this.aliases.response]},getTriggersAuthLinks:function(){return this.auth_link},getToken:o().bind(i.default.getToken,i.default),getProfiles:function(){return o().extend(o().reduce(["vk","facebook"],(function(e,t){return e[t]=i.default.getCurrentProfileHandler(t),e}),{}),o().mapObject(APP.constant("digital_profiles"),(function(e){return e.profile})))},getEndpoints:function(){return this[this.aliases.response].data.endpoints},getHandlersSettingsLinks:function(){return this[this.aliases.response].data.handlers_settings_links},getExecutionConditions:function(){return{items:o().filter(o().propertyOf(this[this.aliases.response])(["data","condition_variants"]),(function(e){return!o().contains(["customer_added","customer_status_changed","customer_appeared_in_status","site_visit"],e.name)}))}},getExecutionDelaySettings:function(){return o().propertyOf(this[this.aliases.response])(["data","delay_settings"])},getSegmentItemModel:o().noop,getSegmentsCollection:function(){return this.segments_collection||(this.segments_collection=new a.default(o().propertyOf(this.main_response)("segments")||[])),this.segments_collection},getHandlersLink:function(){this.auth_link={},o().each(this[this.aliases.handlers],(function(e){e.active&&!e.error||this.getLink(e.code)}),this)},getLink:function(e){var t=l.Deferred();if(!this[this.aliases.response].data.endpoints[e]||!this[this.aliases.response].data.endpoints[e].check_auth)return t.resolve();var n=this;return l.ajax({url:this[this.aliases.response].data.endpoints[e].check_auth,beforeSend:function(e){e.setRequestHeader("X-Auth-Token",n[n.aliases.response].data.triggers_token),e.setRequestHeader("X-Stand",n[n.aliases.response].data.piper_stand)}}).done((function(r){if(!o().isObject(r))return t.reject();var s=r.response.auth.link;s&&(n.auth_link[e]=s)}))},getUserpic:function(){var e=this;i.default.setPipeline("customers"),o().each(this[this.aliases.response].data.endpoints,(function(t,n){var r=n,s=o().findWhere(e[e.aliases.response].data.handlers,{code:r})||{};t.profile&&s.active&&(o().includes(["vk","facebook"],r)?i.default.checkAuthAds(r):l.ajax({beforeSend:function(t){t.setRequestHeader("X-Auth-Token",e[e.aliases.response].data.triggers_token)},url:t.profile}).done((function(e){APP.constant("digital_profiles")[r]=e&&e.response||e})))}))},fetchMarketingData:function(){var e=this;return this[this.aliases.response]&&(this.fetch_entity_data_promise=Promise.resolve(this[this.aliases.response])),this.fetch_entity_data_promise?(this.onFetchMarketingData(this[this.aliases.response]),this.fetch_entity_data_promise):(this.fetch_entity_data_promise=l.post("/ajax/settings/pipeline/customers").then((function(t){return new Promise((function(n,r){t||r(),e.onFetchMarketingData(t),n(t)}))})),this.fetch_entity_data_promise)},onFetchMarketingData:function(e){this[this.aliases.response]=e,this[this.aliases.handlers]=e.data.handlers,this[this.aliases.endpoints]=e.data.endpoints,APP.constant("settings_pipeline_template_params",e),this.getHandlersLink(),this.getUserpic()}})},538283:(e,t,n)=>{n.r(t),n.d(t,{default:()=>a});var r=n(629133),o=n.n(r),s=n(812692),i=n(790401);const a={aliases:(0,s.default)(),getHandler:function(){throw new Error("getHandler must be overrided!")},getResponse:function(){throw new Error("getResponse must be overrided!")},getToken:o().bind(i.default.getToken,i.default),getTriggersAuthLinks:function(){throw new Error("getTriggersAuthLinks must be overrided!")},getProfiles:function(){throw new Error("getProfiles must be overrided!")},getEndpoints:function(){throw new Error("getEndpoints must be overrided!")},getHandlersSettingsLinks:function(){throw new Error("getHandlersSettingsLinks must be overrided!")},getExecutionConditions:function(){throw new Error("getExecutionConditions must be overrided!")},getExecutionDelaySettings:function(){throw new Error("getExecutionDelaySettings must be overrided!")},getSegmentItemModel:function(){throw new Error("getSegmentItemModel must be overrided!")},getSegmentsCollection:function(){throw new Error("getSegmentsCollection must be overrided!")},getHandlersLink:function(){throw new Error("getHandlersLink must be overrided!")},getLink:function(){throw new Error("getLink must be overrided!")},getUserpic:function(){throw new Error("getUserpic must be overrided!")},fetchMarketingData:function(){throw new Error("fetchMarketingData must be overrided!")},onFetchMarketingData:function(){throw new Error("onFetchMarketingData must be overrided!")}}},322988:(e,t,n)=>{n.r(t),n.d(t,{PRODUCTS_LIST_SUBTYPES:()=>r,PRODUCT_LIST_FIELD_TYPE:()=>o,SUBTYPE_ID_ADD_DELETE_ACTION_FROM_MESSAGE:()=>s});var r={1:"quantity",2:"unit_price",3:"discount",4:"sku"},o=16,s=0},233579:(e,t,n)=>{n.r(t),n.d(t,{PRODUCTS_LIST_SUBTYPES:()=>r.PRODUCTS_LIST_SUBTYPES,transformItemsSocketDataToNoteFormat:()=>o.transformItemsSocketDataToNoteFormat});var r=n(322988),o=n(383695)},936562:(e,t,n)=>{var r;n.r(t),n.d(t,{Action:()=>r}),function(e){e.DELETE="delete",e.ADD="add"}(r||(r={}))},383695:(e,t,n)=>{n.r(t),n.d(t,{transformItemsSocketDataToNoteFormat:()=>i});var r=n(322988),o=n(936562);function s(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var i=function(e){var t,n,i=(t=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){s(e,t,n[t])}))}return e}({},e),n=null!=(n={subtypeId:e.subtypeId===r.SUBTYPE_ID_ADD_DELETE_ACTION_FROM_MESSAGE?null:e.subtypeId,isItemsChange:!0})?n:{},Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):function(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n.push.apply(n,r)}return n}(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})),t);if(i.subtypeId)try{i.oldValue=JSON.parse(e.oldValue),i.newValue=JSON.parse(e.newValue),i.changeType=r.PRODUCTS_LIST_SUBTYPES[i.subtypeId],i.productName=i.newValue.name}catch(e){console.error(e)}else if(e.metadata){var a=e.metadata.new,l=a.action,c=a.name;l===o.Action.ADD&&(i.newValue=c),l===o.Action.DELETE&&(i.oldValue=c)}return i}},340348:(e,t,n)=>{n.r(t),n.d(t,{DESTROY_AI_COPILOT_PUBSUB_EVENT:()=>r});var r="ai:copilot:destroy"},82693:(e,t,n)=>{n.r(t),n.d(t,{INIT_AI_COPILOT_PUBSUB_EVENT:()=>r});var r="ai:copilot:init"},616165:(e,t,n)=>{var r;n.r(t),n.d(t,{KeyboardKeys:()=>r}),function(e){e.BACKSPACE="Backspace",e.ENTER="Enter",e.SPACE="Space",e.ESCAPE="Escape",e.ARROW_UP="ArrowUp",e.ARROW_DOWN="ArrowDown",e.ARROW_LEFT="ArrowLeft",e.ARROW_RIGHT="ArrowRight",e.TAB="Tab"}(r||(r={}))},406662:(e,t,n)=>{n.r(t),n.d(t,{getWaLiteFeatureInfo:()=>d});var r=n(161320),o=n.n(r),s=n(104737),i=n(323344);function a(e,t,n,r,o,s,i){try{var a=e[s](i),l=a.value}catch(e){return void n(e)}a.done?t(l):Promise.resolve(l).then(r,o)}function l(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var c,u,d=(c=function(e){var t,n,r,a,c,u,d,_,f,g,p,h,b;return function(e,t){var n,r,o,s,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return s={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function a(s){return function(a){return function(s){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(o=2&s[0]?r.return:s[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,s[1])).done)return o;switch(r=0,o&&(s=[2&s[0],o.value]),s[0]){case 0:case 1:o=s;break;case 4:return i.label++,{value:s[1],done:!1};case 5:i.label++,r=s[1],s=[0];continue;case 7:s=i.ops.pop(),i.trys.pop();continue;default:if(!((o=(o=i.trys).length>0&&o[o.length-1])||6!==s[0]&&2!==s[0])){i=0;continue}if(3===s[0]&&(!o||s[1]>o[0]&&s[1]<o[3])){i.label=s[1];break}if(6===s[0]&&i.label<o[1]){i.label=o[1],o=s;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(s);break}o[2]&&i.ops.pop(),i.trys.pop();continue}s=t.call(e,i)}catch(e){s=[6,e],r=0}finally{n=o=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,a])}}}(this,(function(m){switch(m.label){case 0:if(t=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){l(e,t,n[t])}))}return e}({},e),"false"===(0,i.getQueryParam)("needShowWaLiteToBusinessWhatsAppModal"))return[2,null];m.label=1;case 1:return m.trys.push([1,3,,4]),[4,s.default.request({url:"/ajax/v4/whatsapp/wa_lite_disabled",method:"GET",data:t})];case 2:return(c=m.sent())?(u=c.feature,d=c.whatsappType,_=c.totalNumbersCount,f=null==u||null===(n=u.features)||void 0===n?void 0:n.waLiteDisabled,g=(null==u||null===(a=u.featuresParams)||void 0===a||null===(r=a.waLiteDisabled)||void 0===r?void 0:r.showPopupTimestamp)||0,p=Boolean(g),h=function(e){return o().unix(e).isBefore(o()().subtract(3,"days"))}(g),b=!f&&(!p||h)&&Boolean(d),[2,{feature:u,whatsappType:d,totalNumbersCount:_,shouldShow:b,hasShownOnce:p}]):[2,null];case 3:return m.sent(),[2,null];case 4:return[2]}}))},u=function(){var e=this,t=arguments;return new Promise((function(n,r){var o=c.apply(e,t);function s(e){a(o,n,r,s,i,"next",e)}function i(e){a(o,n,r,s,i,"throw",e)}s(void 0)}))},function(e){return u.apply(this,arguments)})},656437:(e,t,n)=>{n.r(t),n.d(t,{getWaLiteFeatureInfo:()=>r.getWaLiteFeatureInfo});var r=n(406662)},383371:(e,t,n)=>{n.r(t),n.d(t,{getWaLiteFeatureInfo:()=>r.getWaLiteFeatureInfo,updateFeatureStatus:()=>o.updateFeatureStatus});var r=n(656437),o=n(879571)},879571:(e,t,n)=>{n.r(t),n.d(t,{updateFeatureStatus:()=>r.updateFeatureStatus});var r=n(648692)},648692:(e,t,n)=>{n.r(t),n.d(t,{updateFeatureStatus:()=>c});var r=n(161320),o=n.n(r),s=n(672034);function i(e,t,n,r,o,s,i){try{var a=e[s](i),l=a.value}catch(e){return void n(e)}a.done?t(l):Promise.resolve(l).then(r,o)}var a,l,c=(a=function(e){var t,n;return function(e,t){var n,r,o,s,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return s={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function a(s){return function(a){return function(s){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(o=2&s[0]?r.return:s[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,s[1])).done)return o;switch(r=0,o&&(s=[2&s[0],o.value]),s[0]){case 0:case 1:o=s;break;case 4:return i.label++,{value:s[1],done:!1};case 5:i.label++,r=s[1],s=[0];continue;case 7:s=i.ops.pop(),i.trys.pop();continue;default:if(!((o=(o=i.trys).length>0&&o[o.length-1])||6!==s[0]&&2!==s[0])){i=0;continue}if(3===s[0]&&(!o||s[1]>o[0]&&s[1]<o[3])){i.label=s[1];break}if(6===s[0]&&i.label<o[1]){i.label=o[1],o=s;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(s);break}o[2]&&i.ops.pop(),i.trys.pop();continue}s=t.call(e,i)}catch(e){s=[6,e],r=0}finally{n=o=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,a])}}}(this,(function(r){switch(r.label){case 0:t=e.isLiteDisableModalHasShownOnce,r.label=1;case 1:return r.trys.push([1,3,,4]),n={waLiteDisabled:{userId:APP.constant("user").id,isAvailable:t,params:{showPopupTimestamp:o()().unix()}}},[4,(0,s.editFeatures)(n,!1)];case 2:case 3:return r.sent(),[3,4];case 4:return[2]}}))},l=function(){var e=this,t=arguments;return new Promise((function(n,r){var o=a.apply(e,t);function s(e){i(o,n,r,s,l,"next",e)}function l(e){i(o,n,r,s,l,"throw",e)}s(void 0)}))},function(e){return l.apply(this,arguments)})},442533:(e,t,n)=>{n.r(t),n.d(t,{convertOggToWavBlob:()=>u});var r=n(76253),o=n(328888),s=(n(509488),n(643095)),i=n(923345);function a(e,t,n,r,o,s,i){try{var a=e[s](i),l=a.value}catch(e){return void n(e)}a.done?t(l):Promise.resolve(l).then(r,o)}var l,c,u=(l=function(e){var t,n,a,l,c,u,d;return function(e,t){var n,r,o,s,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return s={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function a(s){return function(a){return function(s){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(o=2&s[0]?r.return:s[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,s[1])).done)return o;switch(r=0,o&&(s=[2&s[0],o.value]),s[0]){case 0:case 1:o=s;break;case 4:return i.label++,{value:s[1],done:!1};case 5:i.label++,r=s[1],s=[0];continue;case 7:s=i.ops.pop(),i.trys.pop();continue;default:if(!((o=(o=i.trys).length>0&&o[o.length-1])||6!==s[0]&&2!==s[0])){i=0;continue}if(3===s[0]&&(!o||s[1]>o[0]&&s[1]<o[3])){i.label=s[1];break}if(6===s[0]&&i.label<o[1]){i.label=o[1],o=s;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(s);break}o[2]&&i.ops.pop(),i.trys.pop();continue}s=t.call(e,i)}catch(e){s=[6,e],r=0}finally{n=o=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,a])}}}(this,(function(_){switch(_.label){case 0:return _.trys.push([0,2,,3]),[4,(0,i.isWebWorkerAvailable)()];case 1:if((t=_.sent())!==i.WorkerSupportStatus.OK)throw new Error("Broken voice worker: ".concat(t));if("object"!=typeof WebAssembly)throw new Error("Voice error: unsupported-wasm");return[3,3];case 2:throw n=_.sent(),(0,s.captureException)(n),n;case 3:return[4,fetch(e).then((function(e){return e.arrayBuffer()}))];case 4:return a=_.sent(),l=new Uint8Array(a),c=new Worker(r),u=new Worker(o),d=function(){c.terminate(),u.terminate()},[2,new Promise((function(e,t){var n=function(e,n){n&&clearTimeout(n),(0,s.captureException)(e),d(),t(e)},r=setTimeout((function(){n(new Error("Worker timeout"),r)}),1e4);try{c.postMessage({command:"init",decoderSampleRate:16e3,outputBufferSampleRate:16e3}),u.postMessage({command:"init",wavBitDepth:16,wavSampleRate:16e3}),c.onmessage=function(e){null===e.data?u.postMessage({command:"done"}):u.postMessage({command:"encode",buffers:e.data},e.data.map((function(e){return e.buffer})))},u.onmessage=function(t){var n;if("page"===(null===(n=t.data)||void 0===n?void 0:n.message)){var o=new Blob([t.data.page],{type:"audio/wav"});r&&clearTimeout(r),d(),e(o)}},c.onerror=function(e){n(new Error("Decoder worker error: "+e.message),r)},u.onerror=function(e){n(new Error("WAV worker error: "+e.message),r)},c.postMessage({command:"decode",pages:l},[l.buffer])}catch(e){n(e,r)}}))]}}))},c=function(){var e=this,t=arguments;return new Promise((function(n,r){var o=l.apply(e,t);function s(e){a(o,n,r,s,i,"next",e)}function i(e){a(o,n,r,s,i,"throw",e)}s(void 0)}))},function(e){return c.apply(this,arguments)})},889118:(e,t,n)=>{n.r(t),n.d(t,{convertOggToWavBlob:()=>o.convertOggToWavBlob,isOggSupported:()=>r.isOggSupported});var r=n(59071),o=n(442533)},59071:(e,t,n)=>{n.r(t),n.d(t,{isOggSupported:()=>r});var r=function(){var e=document.createElement("audio");return!!e.canPlayType&&Boolean(e.canPlayType('audio/ogg; codecs="vorbis"').replace(/^no$/,""))}}}]);var _global="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};_global.SENTRY_RELEASE={id:"build_2025_11_28_18_50_52"},function(){try{var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},t=(new Error).stack;t&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[t]="84ee078d-b149-4d66-b107-38f86638b7e0",e._sentryDebugIdIdentifier="sentry-dbid-84ee078d-b149-4d66-b107-38f86638b7e0")}catch(e){}}();
//# sourceMappingURL=30807.580271e339c9becfaed4.js.map