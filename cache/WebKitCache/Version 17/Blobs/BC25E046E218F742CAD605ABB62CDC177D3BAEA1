"use strict";(window.webpackChunk=window.webpackChunk||[]).push([[65062],{146521:(e,t,i)=>{i.r(t),i.d(t,{PageLoadErrorHandlerMixin:()=>n.PageLoadErrorHandlerMixin});var n=i(211802),s="../build/transpiled/common/mixin/pageLoadErrorHandler";window.define(s,(function(){var e="undefined",i=typeof t===e?typeof __WEBPACK_AMD_DEFINE_RESULT__===e?typeof module===e?void 0:module.exports:__WEBPACK_AMD_DEFINE_RESULT__:t;return i&&i.default||i})),window.require([s])},211802:(e,t,i)=>{i.r(t),i.d(t,{PageLoadErrorHandlerMixin:()=>f});var n=i(567297),s=i(156040),r=i(955026),o=i(445368),a=i(585435),l=i(845043);function d(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function c(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{},n=Object.keys(i);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(i).filter((function(e){return Object.getOwnPropertyDescriptor(i,e).enumerable})))),n.forEach((function(t){d(e,t,i[t])}))}return e}var u=null,_=function(e){var t=e.reason,i=e.error;if(!u){var n={class_name:"page-error-modal",button_class:"button-input_blue",init:function(){var e;null===(e=document.activeElement)||void 0===e||e.blur()},destroy:function(){u=null,APP.constant("is_search_disabled",!1),APP.constant("is_search_restoring",!1)},message:[{text_i18n:i}],close_on_accept:!0};switch(t){case a.PageLoadErrorReason.SEARCH_DISABLED:u=new l.default(c({text:(0,o.i18n)("Search feature not available"),accept_text:(0,o.i18n)("Select a plan"),decline_text:(0,o.i18n)("Close"),accept:function(){APP.router.navigate("/settings/pay/",{trigger:!0,replace:!0})}},n));break;case a.PageLoadErrorReason.SEARCH_RESTORING:u=new l.default(c({text:(0,o.i18n)("Search feature activation in progress"),accept_text:(0,o.i18n)("Got it"),no_cancel:!0},n))}}},f={response:{},construct:function(){var e=this;(0,s.onPageFullyLoaded)((function(){return e.processPageLoadError(e.response)}))},processPageLoadError:function(e){var t=e||{},i=t.reason,n=t.error;switch(!0){case Boolean(i&&n):_({reason:i,error:n});break;case APP.constant("is_search_disabled"):_({reason:a.PageLoadErrorReason.SEARCH_DISABLED,error:(0,o.i18n)("search_disabled")});break;case APP.constant("is_search_restoring"):_({reason:a.PageLoadErrorReason.SEARCH_RESTORING,error:(0,o.i18n)("search_restoring")})}},processAjaxError:function(e){e.statusText!==n.JQXHR_STATUS_TEXT.ABORT&&this.processPageLoadError((0,r.cleanResponse)(e.responseJSON))}}},585435:(e,t,i)=>{var n;i.r(t),i.d(t,{PageLoadErrorReason:()=>n}),function(e){e.SEARCH_DISABLED="search_disabled",e.SEARCH_RESTORING="search_restoring"}(n||(n={}));var s="../build/transpiled/common/mixin/pageLoadErrorHandler/types";window.define(s,(function(){var e="undefined",i=typeof t===e?typeof __WEBPACK_AMD_DEFINE_RESULT__===e?typeof module===e?void 0:module.exports:__WEBPACK_AMD_DEFINE_RESULT__:t;return i&&i.default||i})),window.require([s])},640345:(e,t,i)=>{i.r(t),i.d(t,{default:()=>u});var n=i(661533),s=i.n(n),r=i(629133),o=i.n(r),a=i(460159),l=i.n(a),d=i(304483),c=function(e){var t=this;this.options=s().extend({},e||{}),this.options.id&&(this.modal=new d.default({class_name:"modal-list",init:l()._preload(["/tmpl/common/modal/delete.twig"],(function(e){t.$modal_body=e,e.html(l()({ref:"/tmpl/common/modal/delete.twig"}).render({caption:APP.lang.filter_preset_remove_caption,message:[{text:APP.lang.filter_preset_remove_msg}],accept_text:APP.lang.filter_preset_remove_accept_button})).trigger("modal:loaded").trigger("modal:centrify"),document.activeElement.blur(),e.on("click",".modal-body__actions__save",o().bind(t.removeRequest,t)),this.$modal.on("click",(function(e){e.stopPropagation()}))})),destroy:o().bind((function(){return!(this.xhr&&!o().isUndefined(this.xhr.status)||(o().isFunction(this.options.destroy)&&this.options.destroy(),this.$modal_body.off(),0))}),this)}))};c.prototype.removeRequest=function(){this.xhr||(this.xhr=s().ajax({url:"/api/".concat(this.options.entity_preset,"/custom_presets/").concat(this.options.id),type:"DELETE"}).done(o().bind((function(e){1===e.response&&(this.xhr=null,this.afterRemove())}),this)))},c.prototype.afterRemove=function(){this.options.$el.addClass("flipOutX"),o().delay(o().bind((function(){this.options.$el.remove(),o().isFunction(this.options.complete)&&this.options.complete()}),this),300),this.modal.destroy()};const u=c;var _="../build/transpiled/components/filter/delete_preset";window.define(_,(function(){var e="undefined",i=typeof t===e?typeof __WEBPACK_AMD_DEFINE_RESULT__===e?typeof module===e?void 0:module.exports:__WEBPACK_AMD_DEFINE_RESULT__:t;return i&&i.default||i})),window.require([_])},653368:(e,t,i)=>{i.r(t),i.d(t,{default:()=>d});var n=i(629133),s=i.n(n),r=i(460159),o=i.n(r),a=i(781424),l=i(661533);const d={events:{"click .filter-search__users-select-holder .js-multisuggest":"initUsersSelectManagers"},usersSelectClear:function(e){this._users_select&&this._users_select.destroy(),this.refreshSelectedUsers.apply(this,arguments),this.form.checkChanges()},refreshSelectedUsers:function(e,t,i){return this._refreshSelectedUsers({items:e||[],$wrapper:t,input_name:t.data("input-name"),template:i})},_refreshSelectedUsers:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=!0,i=e.$wrapper,n=i.find(".js-multisuggest");(!e.items||s().isArray(e.items)&&!e.items.length||e.is_important_render)&&(n.replaceWith(o()({ref:e.template||"/tmpl/users_select/users_select_items.twig"}).render(s().extend(e,{id:n.attr("id")}))),e.is_important_render?(!e.items||s().isArray(e.items)&&!e.items.length)&&(t=!1):t=!1),s().isFunction(this.checkSuggestValues)&&this.checkSuggestValues(i,e.input_name),i.toggleClass("glow",t)},initUsersSelectManagers:function(e,t){var i=this,n=l(e.currentTarget),r=n.closest(".filter-search__users-select-holder"),o=r.data("input-name");e.stopPropagation(),this._users_select=new a.default(s().extend({el:e.currentTarget,id:n.attr("id"),input_name:o,suggest_class_name:"filter__users-select-suggest",replace:!0,select_one:!1,not_remove:!1,disable_groups_for_select:this.params.disable_groups_for_select,disabled_users:this.params.disabled_users,users:s().has(this.params,"users")?this.params.users:{},existing_items:function(){return l.makeArray(r.find(".js-multisuggest-item").map((function(){return{id:l(this).attr("data-id"),title:l.trim(l(this).text())}})))},onInit:function(){this.$el.closest(".filter__custom_settings__item").addClass("js-in-edit"),s().isFunction(i._fixFilterForSuggest)&&i._fixFilterForSuggest({fix:!0})},onRenderSuggest:function(){this.$list.width(r.outerWidth())},onItemChoosed:function(){this.$el.parent().scrollTop(1e4)},onGroupChoosed:function(){this.$el.parent().scrollTop(1e4)},onDestroy:function(e){this.$el.closest(".filter__custom_settings__item").removeClass("js-in-edit"),s().isFunction(i._fixFilterForSuggest)&&i._fixFilterForSuggest({fix:!1}),i.refreshSelectedUsers(e,r),i._users_select=null}},t))}}},923971:(e,t,i)=>{i.r(t),i.d(t,{default:()=>r});var n=i(629133),s=i.n(n);function r(e,t){var i;if(e.length&&this.form&&this._hasDescribedSelector("form_input")&&(t=t||e.data("input-name"),i=e.find(this._selector("form_input",t)).map((function(e,t){return t.value})),this.form.model.get(t)||i.length)){switch(i.length){case 0:i="";break;case 1:i=s()(i).first();break;default:i=s()(i).flatten()}this.form.model.set(t,i),this.form.checkChanges()}}},63872:(e,t,i)=>{i.r(t),i.d(t,{default:()=>f});var n=i(661533),s=i.n(n),r=i(629133),o=i.n(r),a=i(460159),l=i.n(a),d=i(313981),c=i(445368),u=i(955026),_=i(304483);const f=d.default.extend({_url:function(){throw new Error("Must be overridden")},$el:null,_xhr:null,_destroy_from_modal:!1,_ajax_params:null,_callbacks:{afterDestroy:o().noop,destroy:o().noop,complete:o().noop,failed:o().noop},initialize:function(e){this.options=o().extend({},e),d.default.prototype.initialize.apply(this,arguments),this.setParams(e),this.initModal()},destroy:function(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];this._destroy_from_modal||this.modal&&o().isFunction(this.modal.destroy)&&!1!==this.modal.destroy()&&delete this.modal,d.default.prototype.destroy.apply(this,t),this._callbacks.afterDestroy.apply(this,t)},tryAgain:o().noop,initModal:function(){return this.modal=new _.default({class_name:"modal-list ".concat(this._class("modal")),preload_templates:o().result(this,"preload",[]),init:o().bind(this._initModal,this),tryAgain:o().bind(this.tryAgain,this),destroy:o().bind((function(){return this._xhr&&!o().isUndefined(this._xhr.status)&&this._xhr.abort(),!1!==this._callbacks.destroy.call(this)&&(this._destroy_from_modal=!0,this.destroy(),!0)}),this)}),this},_initModal:function(e){this.setElement(e).render().center().preventClicks()},save:function(e){this._elem("save_btn").trigger("button:load:start"),this._xhr||(this._xhr=this._makeRequest(e).always(o().bind(this.actionComplete,this)))},_makeRequest:function(e){var t=this.getDataForRequest(e);return s().ajax(o().extend({url:o().result(this,"_url"),data:t,type:"POST",dataType:"json"},this._ajax_params||{}))},actionComplete:function(e){if(e=(0,u.cleanResponse)(e),this._elem("save_btn").trigger("button:load:stop"),!this.isValidResponse(e))throw this._xhr=null,this._callbacks.failed.call(this,e),this.destroy(),new Error("Invalid response: ".concat(JSON.stringify(e)));this._xhr=null,this._callbacks.complete.call(this,e),this.destroy()},setParams:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return o().each(this._callbacks,(function(t,i){this._callbacks[i]=this.wrapCallback(i,e[i])}),this),e.url&&(this._url=e.url),this},wrapCallback:function(e,t){return o().isFunction(t)||(t=o().noop),t},getDataForRequest:function(){throw new Error("Must be implemented by subclass!")},isValidResponse:function(e){return!!e},_classes:function(){return{modal:"action_modal",actions:"modal-body__actions",save_btn:"modal-body__actions__save"}},center:function(){return this.$el.trigger("modal:loaded").trigger("modal:centrify"),document.activeElement&&document.activeElement.blur(),this},events:function(){var e={};return e["click ".concat(this._selector("save_btn"),":not(.button-input-disabled)")]="clickSaveBtn",e},preventClicks:function(){return this.modal.$modal.on("click".concat(this.ns),(function(e){e.stopPropagation()})),this},clickSaveBtn:function(){this.save()},_template:"/tmpl/common/modal/delete.twig",preload:function(){return[this._template]},render:function(){var e=l()({ref:this._template});return this.$el.trigger("modal:loaded"),this.$el.html(e.render(this.getTemplateParams())),this},getTemplateParams:function(){return{caption:(0,c.i18n)("Caption text"),message:[{text:(0,c.i18n)("This is forever! Seriously, think!")}],accept_text:(0,c.i18n)("Confirm")}}});var m="../build/transpiled/components/modals/action";window.define(m,(function(){var e="undefined",i=typeof t===e?typeof __WEBPACK_AMD_DEFINE_RESULT__===e?typeof module===e?void 0:module.exports:__WEBPACK_AMD_DEFINE_RESULT__:t;return i&&i.default||i})),window.require([m])},39290:(e,t,i)=>{i.r(t),i.d(t,{default:()=>m});var n=i(661533),s=i.n(n),r=i(629133),o=i.n(r),a=i(460159),l=i.n(a),d=i(162262),c=i.n(d),u=i(313981),_=i(653368),f=i(923971);const m=u.default.extend({_classes:function(){return{field:"filter__custom_settings__item",filter:"js-filter-sidebar",apply_block:"list-top-search__apply-block"}},events:{"click .js-filter-field-clear":"destroy"},initialize:function(e){u.default.prototype.initialize.apply(this,arguments),this.options=e||{},c().mixin(this,_.default)},destroy:function(e){o().isFunction(this.options.onDestroy)&&this.options.onDestroy(e),u.default.prototype.destroy.apply(this,arguments)},render:l()._preload(["/tmpl/filter/in_search/option.twig"],"_render"),_render:function(){return this.setElement(l()({ref:"/tmpl/filter/in_search/option.twig"}).render({text:this.options.text,name_input:this.options.name_input?this._completeNameInput(this.options.name_input):""})),this},checkSuggestValues:function(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];f.default.apply(this,t)},_completeNameInput:function(e){var t,i=s().extend(!0,{},APP.constant("account").cf,APP.constant("account").predefined_cf);return-1===e.indexOf("cf")&&-1===e.indexOf("custom_fields")||(t=e.replace(/\D+/g,"")),-1!==e.indexOf("[date]")||-1!==e.indexOf("[price]")||-1!==e.indexOf("[next_price]")||-1!==e.indexOf("[ltv]")||-1!==e.indexOf("[purchases_count]")||-1!==e.indexOf("[average_check]")||-1!==e.indexOf("[next_date]")?e+="[from]":(o().isUndefined(t)||o().each(i,(function(i){if(i.ID===t)switch(parseInt(i.TYPE_ID)){case APP.cf_types.numeric:case APP.cf_types.date:case APP.cf_types.birthday:return e+="[from]";case APP.cf_types.smart_address:return e+="[address_line_1]"}})),e)}});var p="../build/transpiled/interface/search/partials/option_view";window.define(p,(function(){var e="undefined",i=typeof t===e?typeof __WEBPACK_AMD_DEFINE_RESULT__===e?typeof module===e?void 0:module.exports:__WEBPACK_AMD_DEFINE_RESULT__:t;return i&&i.default||i})),window.require([p])},941146:(e,t,i)=>{i.r(t),i.d(t,{ASIDE_CLOSE_PUBSUB_EVENT:()=>n});var n="ai:copilot:close"},157885:(e,t,i)=>{i.r(t),i.d(t,{ASIDE_OPEN_PUBSUB_EVENT:()=>n});var n="ai:copilot:open"},764992:(e,t,i)=>{i.r(t),i.d(t,{ASIDE_TOGGLE_ANIMATION_DELAY:()=>n});var n=500},240097:(e,t,i)=>{i.r(t),i.d(t,{ASIDE_WIDTH:()=>n});var n=320},567297:(e,t,i)=>{var n;i.r(t),i.d(t,{JQXHR_STATUS_TEXT:()=>n}),function(e){e.ABORT="abort"}(n||(n={}))},469235:(e,t,i)=>{i.r(t),i.d(t,{checkIsFullScreen:()=>n});var n=function(){return"var(--aside-fullscreen-max-width)"===document.documentElement.style.getPropertyValue("--aside-max-width").trim()}},60781:(e,t,i)=>{i.r(t),i.d(t,{checkIsFullScreen:()=>n.checkIsFullScreen});var n=i(469235)},568706:(e,t,i)=>{i.r(t),i.d(t,{getCurrentAsideWidth:()=>s});var n=i(240097),s=function(){return"0px"===getComputedStyle(document.documentElement).getPropertyValue("--aside-width").trim()?0:n.ASIDE_WIDTH}},292531:(e,t,i)=>{i.r(t),i.d(t,{getCurrentAsideWidth:()=>n.getCurrentAsideWidth});var n=i(568706)},817790:(e,t,i)=>{i.r(t),i.d(t,{getCurrentAsideWidth:()=>n.getCurrentAsideWidth,setAboveAsideZIndex:()=>o.setAboveAsideZIndex,toggleAside:()=>s.toggleAside,toggleFullScreen:()=>r.toggleFullScreen});var n=i(292531),s=i(411103),r=i(12172),o=i(105677)},105677:(e,t,i)=>{i.r(t),i.d(t,{setAboveAsideZIndex:()=>n.setAboveAsideZIndex});var n=i(775316)},775316:(e,t,i)=>{i.r(t),i.d(t,{setAboveAsideZIndex:()=>o});var n=i(629133),s=i.n(n),r=i(60781),o=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.isAbove,i=e.delay,n=void 0===i?0:i,o=document.documentElement,a=t;s().isUndefined(a)&&(a=(0,r.checkIsFullScreen)()),a?o.style.setProperty("--above-aside-z-index","var(--aside-z-index)"):setTimeout((function(){o.style.setProperty("--above-aside-z-index","0")}),n)}},411103:(e,t,i)=>{i.r(t),i.d(t,{toggleAside:()=>n.toggleAside});var n=i(683354)},683354:(e,t,i)=>{i.r(t),i.d(t,{toggleAside:()=>m});var n=i(629133),s=i.n(n),r=i(267651),o=i.n(r),a=i(941146),l=i(157885),d=i(764992),c=i(23456),u=i(813434),_=i(105677),f=i(60781),m=function(e){var t=function(){var e=document.getElementById("aside"),t=document.getElementById("page");return(null==e?void 0:e.classList.contains("active"))&&(null==t?void 0:t.classList.contains("minimized"))}();if(!(!0===e&&t||!1===e&&!t)){var i=document.documentElement;i.classList.add("asideToggling"),(0,f.checkIsFullScreen)()&&(0,_.setAboveAsideZIndex)({isAbove:s().isUndefined(e)?!t:e,delay:d.ASIDE_TOGGLE_ANIMATION_DELAY}),setTimeout((function(){i.classList.remove("asideToggling")}),d.ASIDE_TOGGLE_ANIMATION_DELAY);var n=document.getElementById("aside"),r=document.getElementById("page");if(n&&r)switch(e){case!0:n.classList.add("active"),r.classList.add("minimized");break;case!1:n.classList.remove("active"),r.classList.remove("minimized");break;default:n.classList.toggle("active"),r.classList.toggle("minimized")}var m="0px"===getComputedStyle(document.documentElement).getPropertyValue("--aside-width").trim()?"var(--aside-max-width)":"0px";document.documentElement.style.setProperty("--aside-width",m),(0,u.triggerWindowResizeForTime)(d.ASIDE_TOGGLE_ANIMATION_DELAY);var p="0px"===m?a.ASIDE_CLOSE_PUBSUB_EVENT:l.ASIDE_OPEN_PUBSUB_EVENT;o().publish(p,!0),(0,c.kommoLogAmplitude)("AICopilotInterface",{is_open:!t})}}},12172:(e,t,i)=>{i.r(t),i.d(t,{toggleFullScreen:()=>n.toggleFullScreen});var n=i(102247)},102247:(e,t,i)=>{i.r(t),i.d(t,{toggleFullScreen:()=>a});var n=i(629133),s=i.n(n),r=i(764992),o=i(105677),a=function(e){var t=document.documentElement,i="var(--aside-fullscreen-max-width)"===t.style.getPropertyValue("--aside-max-width").trim();if(!(!0===e&&i||!1===e&&!i)){(0,o.setAboveAsideZIndex)({isAbove:s().isUndefined(e)?!i:e,delay:r.ASIDE_TOGGLE_ANIMATION_DELAY}),t.classList.add("asideToggling");var n=0,a=function(){window.dispatchEvent(new Event("resize")),n=requestAnimationFrame(a)};switch(n=requestAnimationFrame(a),setTimeout((function(){t.classList.remove("asideToggling"),cancelAnimationFrame(n)}),r.ASIDE_TOGGLE_ANIMATION_DELAY),e){case!0:t.style.setProperty("--aside-max-width","var(--aside-fullscreen-max-width)");break;case!1:t.style.removeProperty("--aside-max-width");break;default:i?t.style.removeProperty("--aside-max-width"):t.style.setProperty("--aside-max-width","var(--aside-fullscreen-max-width)")}}}},813434:(e,t,i)=>{i.r(t),i.d(t,{triggerWindowResizeForTime:()=>n.triggerWindowResizeForTime});var n=i(922451)},922451:(e,t,i)=>{i.r(t),i.d(t,{triggerWindowResizeForTime:()=>n});var n=function(e){var t=0,i=function(){window.dispatchEvent(new Event("resize")),t=requestAnimationFrame(i)};t=requestAnimationFrame(i),setTimeout((function(){cancelAnimationFrame(t)}),e)}}}]);var _global="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};_global.SENTRY_RELEASE={id:"build_2025_11_28_18_50_52"},function(){try{var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},t=(new Error).stack;t&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[t]="cc2c3a4a-509b-46db-9a6f-c8fa852f4ef9",e._sentryDebugIdIdentifier="sentry-dbid-cc2c3a4a-509b-46db-9a6f-c8fa852f4ef9")}catch(e){}}();
//# sourceMappingURL=65062.fe4f6f12ac6b2a5bf374.js.map