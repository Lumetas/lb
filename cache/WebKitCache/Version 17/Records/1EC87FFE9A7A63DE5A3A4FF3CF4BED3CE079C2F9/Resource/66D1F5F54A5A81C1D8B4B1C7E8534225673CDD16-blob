"use strict";(window.webpackChunk=window.webpackChunk||[]).push([[12897],{196001:(t,e,i)=>{i.r(e),i.d(e,{default:()=>d});var n=i(629133),s=i.n(n),o=i(345839),a=i.n(o),r=i(834834),l=i(955026),c=i(547803);const d=a().Collection.extend({model:c.default.Base,initialize:function(t,e){this.pages={current:0,next:!0},this.catalog_id=e.catalog_id||0},url:function(){var t={catalog_id:this.catalog_id,page_size:25};switch(!0){case 0===this.pages.current:return r.default.getListUrl({qs_params:t});case this.hasNextPage():return t.page=++this.pages.current,r.default.getListUrl({qs_params:t});default:return""}},hasNextPage:function(){return this.pages.next},parse:function(t){return(0,l.hasKeys)(t,["response","pagination","pages"])&&(this.pages.current=t.response.pagination.pages.current,this.pages.next=this.pages.current<t.response.pagination.pages.total),(0,l.hasKeys)(t,["response","catalog_elements"])?t.response.catalog_elements:[]},searchTerm:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.links=null,this.fetch({remove:!1,url:this._getSearchUrl(t)})},_getSearchUrl:function(t){var e={catalog_id:this.catalog_id};return t.search&&(e.term=t.search||""),r.default.getListUrl({qs_params:e})},getItems:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return s().isUndefined(t.selected)?s().map(this.models,(function(t){return{id:t.get("id"),name:t.get("name"),sku:t.getSKU()}})):this.filter((function(e){return e.get("selected")===t.selected}))}});var u="../build/transpiled/components/filter/catalogs/collection";window.define(u,(function(){var t="undefined",i=typeof e===t?typeof __WEBPACK_AMD_DEFINE_RESULT__===t?typeof module===t?void 0:module.exports:__WEBPACK_AMD_DEFINE_RESULT__:e;return i&&i.default||i})),window.require([u])},547803:(t,e,i)=>{i.r(e),i.d(e,{default:()=>l});var n=i(629133),s=i.n(n),o=i(345839),a={selected:!1},r=i.n(o)().Model.extend({getSKU:function(){var t=s().findWhere(this.get("custom_fields"),{code:"SKU"});return t&&t.values?s().first(t.values).value:""}});const l={Base:r.extend({defaults:s().clone(a)}),Selected:r.extend({defaults:s().extend(s().clone(a),{selected:!0})})};var c="../build/transpiled/components/filter/catalogs/model";window.define(c,(function(){var t="undefined",i=typeof e===t?typeof __WEBPACK_AMD_DEFINE_RESULT__===t?typeof module===t?void 0:module.exports:__WEBPACK_AMD_DEFINE_RESULT__:e;return i&&i.default||i})),window.require([c])},750856:(t,e,i)=>{i.r(e),i.d(e,{default:()=>_});var n=i(629133),s=i.n(n),o=i(661533),a=i.n(o),r=i(460159),l=i.n(r),c=i(857185),d=i(196001),u=i(744704),h=i(466072);const _=u.default.extend({events:s().extend({},u.default.prototype.events,{"multisuggest:set_suggest":"inputSearch"}),_selectors:function(){for(var t=arguments.length,e=new Array(t),i=0;i<t;i++)e[i]=arguments[i];return s().extend({},u.default.prototype._selectors.apply(this,e),{item_input:".js-multisuggest-list .js-multisuggest-item input[type=checkbox]"})},initialize:function(t){this.entity=t.entity,this.options=t,this._initCollection(),u.default.prototype.initialize.call(this,{$el:t.$el,$container:t.$container,class_name:t.class_name,suggest_class_name:t.suggest_class_name,replace:!0,cant_add:!0,template:"/tmpl/filter/products/items.twig",item_template:"/tmpl/filter/products/item.twig",inner_item_tmpl:"/tmpl/filter/products/item.twig",existing_items:t.existing_items||{},items:t.items,onInit:s().bind(this.onInit,this,t.onInit),onDestroy:t.onDestroy,onAddItem:t.onAddItem,onRemoveItem:t.onRemoveItem,onItemRemoved:s().bind(this.onItemRemoved,this,t.onItemRemoved),onItemChoosed:s().bind(this.onItemChoosed,this,t.onItemChoosed),onRenderItemsParams:t.onRenderItemsParams}),this._hideFirstOnScrollThrottled=s().throttle(s().bind(this._hideFirstOnScroll,this),50,{trailing:!1}),this._showOnScrollEndThrottled=s().throttle(s().bind(this._showOnScrollEnd,this),300,{leading:!1}),window.addEventListener("scroll",this._hideFirstOnScrollThrottled,{capture:!0}),window.addEventListener("scroll",this._showOnScrollEndThrottled,{capture:!0})},destroy:function(){var t=s().map(this.getSelectedItems(),(function(t){return s().extend({name:t.title},t)}));this.rerenderInput(t),s().isFunction(this.options.onDestroy)&&this.options.onDestroy.call(this,t),window.removeEventListener("scroll",this._hideFirstOnScrollThrottled,{capture:!0}),window.removeEventListener("scroll",this._showOnScrollEndThrottled,{capture:!0}),u.default.prototype.destroy.call(this)},_initCollection:function(){this.collection=new d.default([],this._getCollectionParams(this.options))},_getCollectionParams:function(t){return t.catalog_id?{catalog_id:t.catalog_id}:{}},_hideFirstOnScroll:function(t){this.$list&&this.$list.is(":visible")&&t.target!==this.$list.get(0).firstChild&&(this._hidden_on_scroll=!0,this.$list.addClass("hidden"))},_showOnScrollEnd:function(){this._hidden_on_scroll&&(this.$list.removeClass("hidden"),this.setPositions(),this._hidden_on_scroll=!1)},fetchData:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=(this.options.fetch_params||[]).concat([this.collection.fetch()]);return new Promise(s().bind((function(){Promise.all(e).then(s().bind((function(){this.setItems({items:this.collection.getItems(),selected:this.collection.getItems({selected:!0}),from_load:!0}),this._elem("input").val()&&this._elem("input").trigger("input"),this.setPositions(),t.rerender||this._addComponent(h.default,this._getAutoloadParams(this.options))}),this))}),this))},_getAutoloadParams:function(t){return s().extend({},{element:this._getScrollContainer().get(0),onLoadMore:s().bind(this.loadMore,this),conditions:{"max-bottom":350}},t.autoload_params||{})},loadMore:function(){this.collection.hasNextPage()&&!this._fetching&&(this._toggleLoadMoreLoader({load:!0}),this._fetching=!0,this.collection.fetch({silent:!0,remove:!1}).then(s().bind((function(){this._fetching=!1,this.setItems({items:this.collection.getItems(),selected:this.collection.getItems({selected:!0}),from_load:!0})}),this),s().bind(this._toggleLoadMoreLoader,this,{load:!1})))},_toggleLoadMoreLoader:s().noop,_getScrollContainer:function(){return a()(".multisuggest__suggest.js-multisuggest-suggest.custom-scroll")},inputSearch:function(t,e){this.collection.hasNextPage()&&e.length>2&&(t.stopPropagation(),this.collection.searchTerm({search:e}).then(s().bind((function(){this._fetching=!1,this.setItems({items:this.collection.getItems(),selected:this.collection.getItems({selected:!0}),from_load:!0}),this.$el.data("values-hash",this.items).trigger("multisuggest:set_suggest",e.toString())}),this),s().bind(this._toggleLoadMoreLoader,this,{load:!1})))},onInit:function(t){s().isFunction(t)&&t.call(this)},onItemChoosed:function(t){s().isFunction(t)&&t.call(this)},onItemRemoved:function(t){s().isFunction(t)&&t.call(this)},clickToChoose:function(t){c.default.clickItem(a()(t.currentTarget),{template:this.options.item_template}),s().isFunction(this.options.onAddItem)&&this.options.onAddItem(a()(t.currentTarget))},setPositions:function(){for(var t=arguments.length,e=new Array(t),i=0;i<t;i++)e[i]=arguments[i];u.default.prototype.setPositions.apply(this,e),this.$list.css({width:this.$el.width()+5}),s().isFunction(this.options.onSetPositions)&&this.options.onSetPositions.call(this),this.sticky_headers&&this.sticky_headers.refresh()},_checkVisibilityForPositioning:s().noop,loadItems:function(){this.fetchData()},getSelectedItems:function(){return s().toArray(this.$(this._selector("list_item")).map((function(t,e){return s().extend({},a()(e).data())})))},rerenderInput:function(t){this.options.items_template&&this.$el.replaceWith(a()(l()({ref:this.options.items_template}).render(s().extend({id:this.options.id,class_name:this.options.class_name||"",items:t},this.options.onRenderItemsParams?this.options.onRenderItemsParams(t):{}))))}});var f="../build/transpiled/components/filter/catalogs/select";window.define(f,(function(){var t="undefined",i=typeof e===t?typeof __WEBPACK_AMD_DEFINE_RESULT__===t?typeof module===t?void 0:module.exports:__WEBPACK_AMD_DEFINE_RESULT__:e;return i&&i.default||i})),window.require([f])},47912:(t,e,i)=>{i.r(e),i.d(e,{default:()=>c});var n=i(629133),s=i.n(n),o=i(350562),a=i(445368),r=i(790580),l=i(744704);const c=r.default.extend({_selectors:function(){for(var t=arguments.length,e=new Array(t),i=0;i<t;i++)e[i]=arguments[i];var n=r.default.prototype._selectors.apply(this,e);return s().extend({},n,{item_by_group_id:'.js-multisuggest-item[data-group-id="%s"]',not_selectable_item_by_id:'.js-multisuggest-item-not-selectable[data-id="%s"]'})},initialize:function(t){var e=this,i=t.onItemChoosed||s().noop;this.entity=t.entity,this.options=t,l.default.prototype.initialize.call(this,{$el:t.$el,$container:t.$container,class_name:t.class_name,suggest_class_name:t.suggest_class_name,replace:!0,cant_add:!s().isBoolean(t.cant_add)||t.cant_add,template:"/tmpl/filter/tags/wrapper.twig",items_template:t.items_template||"/tmpl/filter/tags/items.twig",existing_items:t.tags||{},items:t.items,onInit:t.onInit,onDestroy:t.onDestroy,onAddItem:t.onAddItem,onRemoveItem:t.onRemoveItem,onItemRemoved:t.onItemRemoved,onItemChoosed:function(){e.toggleGroupsVisibility(),i.call(this)},onRenderItemsParams:t.onRenderItemsParams,loadItems:t.loadItems})},onInit:s().noop,destroy:function(){this.options.cant_add||this.save();var t=s().map(this.getSelectedItems(),(function(t){return s().extend({name:t.title},t)}));this.rerenderInput(t),s().isFunction(this.options.onDestroy)&&this.options.onDestroy.call(this,t),l.default.prototype.destroy.apply(this)},setPositions:function(){l.default.prototype.setPositions.apply(this),this.toggleGroupsVisibility(),this.$list.css({width:this.$el.width()+5,left:parseFloat(this.$list.css("left"))-3}),s().isFunction(this.options.onSetPositions)&&this.options.onSetPositions.apply(this)},parseLoadedTags:function(t,e){var i=[],n=this;return s().each(t,(function(t){(n.options.full_tags||t.frequency)&&(e&&(t.entity=e,t.group_id=e),t.is_filter_by_id=!0,i.push(t))})),i},toggleGroupsVisibility:function(){var t=this.options.entity,e=this;s().isArray(t)&&(s().each(t,(function(t){e.$list.find(e._selector("item_by_group_id",t)).length||e.$list.find(e._selector("not_selectable_item_by_id",t)).remove()})),e.$list.find(this._selector("item")).length||e.$el.removeClass("multisuggest_show-suggest").trigger("multisuggest:no_value"))},loadItems:function(){for(var t=arguments.length,e=new Array(t),i=0;i<t;i++)e[i]=arguments[i];var n=this.options.entity,l=this;if(s().isArray(n)){var c={},d=0;l.$list.addClass("js-loading"),s().each(n,(function(t){c[t]=[],(0,o.getFullTagsList)({entity:t}).then((function(e){var i;d++,c[t]=l.parseLoadedTags(e.items,t),d===n.length&&(i=s().chain(c).map((function(t,e){return t.unshift({id:e,type:"head",class_name:"js-multisuggest-item-not-selectable",name:(0,a.i18n)((0,a.capitalize)(e))}),t}),[]).values().flatten().value(),l.$list.removeClass("js-loading"),l.setItems({items:i,selected:l.options.existing_items,from_load:!0}),l.setPositions())}))}))}else r.default.prototype.loadItems.apply(this,e)}});var d="../build/transpiled/components/filter/fast_tags";window.define(d,(function(){var t="undefined",i=typeof e===t?typeof __WEBPACK_AMD_DEFINE_RESULT__===t?typeof module===t?void 0:module.exports:__WEBPACK_AMD_DEFINE_RESULT__:e;return i&&i.default||i})),window.require([d])},968725:(t,e,i)=>{i.r(e),i.d(e,{default:()=>w});var n=i(161320),s=i.n(n),o=i(629133),a=i.n(o),r=i(210734),l=i(792105),c=i(661533);function d(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function u(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function h(t,e,i){return e&&u(t.prototype,e),i&&u(t,i),t}function _(t,e,i){return _="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,i){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=f(t)););return t}(t,e);if(n){var s=Object.getOwnPropertyDescriptor(n,e);return s.get?s.get.call(i||t):s.value}},_(t,e,i||t)}function f(t){return f=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},f(t)}function p(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&m(t,e)}function m(t,e){return m=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},m(t,e)}function g(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var i,n=f(t);if(e){var s=f(this).constructor;i=Reflect.construct(n,arguments,s)}else i=n.apply(this,arguments);return function(t,e){return!e||"object"!=((i=e)&&"undefined"!=typeof Symbol&&i.constructor===Symbol?"symbol":typeof i)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e;var i}(this,i)}}var y=function(t){p(i,t);var e=g(i);function i(){return d(this,i),e.apply(this,arguments)}return h(i,[{key:"_classes",value:function(){return a().extend({first_calendar_input:"date_field_with-time_range-input_first",second_calendar_input:"date_field_with-time_range-input_second",inputs_box:"date_field_with-time_range-box",date_time_field:"date_field_with-time_range",hyphen:"date_field_with-time_range-hyphen"},_(f(i.prototype),"_classes",this).apply(this,arguments))}},{key:"events",value:function(){var t=_(f(i.prototype),"events",this).apply(this,arguments);return t["controls:change.filter ".concat(this._selector("date_field"))]="inputInDate",t["keydown "+this._selector("date_field")]="onDateKeyDown",t["keyup "+this._selector("date_field")]="onDateKeyUp",t}},{key:"container",value:function(){var t=!!this.$container,e=_(f(i.prototype),"container",this).apply(this,arguments);return t||this.$container.css(Modernizr.prefixed("transform"),"translateY(-7px)"),e}},{key:"getDateTimeInput",value:function(t){var e=t.closest(this._selector("inputs_box")),i=e.find(this._selector("first_calendar_input")),n=e.find(this._selector("second_calendar_input")),s=e.find(this._selector("hyphen"));return{$main_field:e,$first_input:i,$second_input:n,$hyphen:s}}},{key:"setDateTimeInInput",value:function(t,e,i){var n=t.getSelected();return n?a().isString(n)&&(n=s()(n,i)):n=s()(),n.hour(Math.floor(e/60)),n.minutes(Math.floor(e%60)),n}},{key:"onDateKeyDown",value:function(t){var e=this.getDateTimeInput(c(t.target)).$first_input,i=c(t.currentTarget),n=t.keyCode;return 8===n&&0===i.val().length?(e.trigger("focus"),e.trigger("controls:date:check-empty"),!1):189!==n&&void 0}},{key:"onDateKeyUp",value:function(t){var e=this.getDateTimeInput(c(t.target)),i=e.$first_input,n=e.$second_input,s=c(t.currentTarget),o=t.keyCode;37===o&&0===s[0].selectionStart?(i.trigger("focus"),i.trigger("controls:date:check-empty"),this.$el.trigger("date-time-filter:date-change")):39===o&&s[0].selectionStart===s.val().length||189===o?(n.trigger("focus"),i.trigger("autosize:important"),n.trigger("date-time-filter:date-change"),n.trigger("controls:date:check-empty")):this.$el.trigger("date-time-filter:date-change")}},{key:"onDateClickedSingle",value:function(){_(f(i.prototype),"onDateClickedSingle",this).apply(this,arguments),this.$input.trigger("controls:date:clicked")}},{key:"_onInputClickToShow",value:function(t){var e=this.getDateTimeInput(c(t.target)),i=e.$first_input,n=e.$second_input;!i.val()&&n.val()&&i.trigger("focus")}},{key:"_onChangeWithoutTimeHandle",value:function(t){var e=c(t.currentTarget),i=this.getDateTimeInput(c(t.currentTarget)),n=i.$hyphen,s=i.$first_input,o=i.$second_input;if(n.toggleClass("hidden",!s.val()||!o.val()),e.val()){if(!e.val().split(" ").length<2&&this._onInputHandle(),e.trigger("autosize:important"),this._elem("second_calendar_input").length&&2===s.val().split(" ").length&&o.val().split(" ").length<2){var a;a=this._format===APP.system.format.date.date?APP.system.format.date.full:APP.system.format.date.year_short;var r=this.setDateTimeInInput(o.data("kalendae"),1439,a);o.val(r.format(a)).trigger("autosize:important"),s.trigger("focus"),o.trigger("focus")}this.$el.trigger("date-time-filter:date-change")}else this.$el.trigger("date-time-filter:date-change")}},{key:"_onTimeplanerFifteenClick",value:function(t){var e=c(t.currentTarget),i=s()(e.text().trim(),APP.system.format.date.time);this._setSelectedTime(60*i.hour()+i.minutes())}},{key:"_updateInputValueWithTime",value:function(t){var e,i,n=this.getDateTimeInput(this._elem("date_field")),s=n.$first_input,o=n.$second_input;e=this._format===APP.system.format.date.date?APP.system.format.date.full:APP.system.format.date.year_short,!o.val()&&s.val()?(i=this.setDateTimeInInput(s.data("kalendae"),t,e),s.val(i.format(e)).trigger("autosize:important"),o.trigger("focus")):(i=this.setDateTimeInInput(this._elem("date_field").data("kalendae"),t,e),this.$input.val(i.format(e)).trigger("controls:date:check-empty").trigger("autosize:important"),s.trigger("focus"),s.val()&&s.val().split(" ").length<2&&(i=this.setDateTimeInInput(s.data("kalendae"),0,e),s.val(i.format(e)).trigger("autosize:important")),o.trigger("focus"))}},{key:"_syncSecondKalendae",value:function(){var t=this._elem("date_field"),e=t.is(".".concat(this._class("second_calendar_input"))),i=Boolean(t.val()),n=this._syncedFromFirst;if(e&&!i&&!n){var o=this.getDateTimeInput(t).$first_input,a=o&&o.val&&o.val();if(a){var r=this._format===APP.system.format.date.date?APP.system.format.date.full:APP.system.format.date.year_short,l=String(a).split(" ")[0],d=s()(l,r),u=this.kalendae;u&&d.isValid()&&(u.viewStartDate=d.clone(),u.container&&c(u.container).is(":visible")&&u.draw(),this._syncedFromFirst=!0)}}}},{key:"onShowSingle",value:function(){var t=this.container(),e=this.$input.closest(this._selector("date_time_field")).offset();t.removeClass("kalendae-at-top").css({top:e.top,left:e.left-1}),t.visible()||t.addClass("kalendae-at-top"),this._syncSecondKalendae(),this._updateCurrentTime()}}],[{key:"controlClassName",get:function(){return"js-control-date-time-in-range"}}]),i}(l.default),v=function(t){p(i,t);var e=g(i);function i(){return d(this,i),e.apply(this,arguments)}return h(i,[{key:"_classes",value:function(){return{input:"date_field",hyphen:"js-filter-date-time-hyphen",first_calendar_input:"date_field_with-time_range-input_first",second_calendar_input:"date_field_with-time_range-input_second",first_calendar_box:"date_field_with-time_range-box_first",second_calendar_box:"date_field_with-time_range-box_second",calendar_image:"date_time_field_wrapper--calendar-with-time",date_time_field:"date_field_with-time_range"}}},{key:"events",value:function(){var t={};return t["controls:date:clicked ".concat(this._selector("input"),":first")]="_focusToDateField",t["click ".concat(this._selector("calendar_image"))]="_calendarFocus",t["controls:change ".concat(this._selector("input"))]="_inputsWidth",t["controls:date:check-empty ".concat(this._selector("input"))]="_placeHyphen",t}},{key:"initialize",value:function(){_(f(i.prototype),"initialize",this).apply(this,arguments),this._placeHyphen({currentTarget:this.$("".concat(this._selector("input")))})}},{key:"_calendarFocus",value:function(t){c(t.target).closest(this._selector("date_time_field")).find("".concat(this._selector("first_calendar_input"))).trigger("focus")}},{key:"_focusToDateField",value:function(){var t=this;c(document).one("mouseup",(function(){t.$("".concat(t._selector("input"))).trigger("focus")}))}},{key:"_inputsWidth",value:function(t){var e=c(t.currentTarget).val(),i=this._elem("first_calendar_input"),n=this._elem("second_calendar_input"),s=this._elem("first_calendar_box"),o=this._elem("second_calendar_box");e||n.val()||i.val()?(s.width("auto"),o.width("100%")):(s.width("100%"),o.width("auto"))}},{key:"_placeHyphen",value:function(t){var e=c(t.currentTarget),i=this._elem("first_calendar_input"),n=this._elem("second_calendar_input");this._elem("hyphen").toggleClass("hidden",!(i.val()&&n.val()||e.hasClass(this._class("second_calendar_input"))&&i.val()))}}],[{key:"controlClassName",get:function(){return"js-date-time-range-control"}}]),i}(r.default);y.extend(y);const w=v.extend(v);var I="../build/transpiled/interface/controls/date/with_time/range";window.define(I,(function(){var t="undefined",i=typeof e===t?typeof __WEBPACK_AMD_DEFINE_RESULT__===t?typeof module===t?void 0:module.exports:__WEBPACK_AMD_DEFINE_RESULT__:e;return i&&i.default||i})),window.require([I])}}]);var _global="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};_global.SENTRY_RELEASE={id:"build_2025_11_28_18_50_52"},function(){try{var t="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},e=(new Error).stack;e&&(t._sentryDebugIds=t._sentryDebugIds||{},t._sentryDebugIds[e]="91c58e03-704a-4816-9d25-3ad7f45b12f7",t._sentryDebugIdIdentifier="sentry-dbid-91c58e03-704a-4816-9d25-3ad7f45b12f7")}catch(t){}}();
//# sourceMappingURL=12897.5ec45772f68495ba38d9.js.map