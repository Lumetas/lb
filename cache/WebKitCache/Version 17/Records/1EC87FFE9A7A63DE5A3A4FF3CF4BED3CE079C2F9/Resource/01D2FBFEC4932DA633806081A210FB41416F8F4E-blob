(window.webpackChunk=window.webpackChunk||[]).push([[29937,85624],{59372:(e,t,n)=>{var i;!function(e){"use strict";if(!("ontouchstart"in window))return!1;var t,n,i=[],o={$these:[],touchstart_init:!1,touchmove_init:!1,class_name:".custom-scroll:not(.js-nonbounce-skip)",event_name_space:".custom-scroll:touch"},r=function(t,n,i){return!!e(i).closest(t).length},s=function(e){e=e.originalEvent||e,t=e.touches?e.touches[0].screenY:e.screenY,n=e.touches?e.touches[0].screenX:e.screenX},a=function(i){i.originalEvent.touches&&i.originalEvent.touches.length>1||(~e.inArray(!0,e.map(o.$these,r,i.target))||i.preventDefault(),function(i){var r=i.originalEvent.touches?i.originalEvent.touches[0].screenY:i.originalEvent.screenY,s=i.originalEvent.touches?i.originalEvent.touches[0].screenX:i.originalEvent.screenX,a=e(i.target).closest(o.class_name)[0];return!(a&&("y"==a.getAttribute("data-horizontal")?!(Math.abs(t-r)<10)||0===a.scrollLeft&&n<=s||a.scrollWidth-a.offsetWidth===a.scrollLeft&&n>=s:0===a.scrollTop&&t<=r||a.scrollHeight-a.offsetHeight===a.scrollTop&&t>=r))}(i)||i.preventDefault())},c=function(t){o.$these.push(e(t))},l=new MutationObserver((function(t){t.forEach((function(t){"childList"===t.type&&e.each(t.addedNodes,(function(e,t){c(t)}))}))}));e.nonbounce=function(t,n){var r;n=n||"default","string"==typeof t&&"destroy"===t?(-1!==(r=i.indexOf(n))&&i.splice(r,1),i.length||(o={$these:[],touchstart_init:!1,touchmove_init:!1,class_name:".custom-scroll:not(.js-nonbounce-skip)",event_name_space:".custom-scroll:touch"},l.disconnect(),e(window).off(o.event_name_space))):(i.push(n),1===i.length&&(e.extend(o,t||{}),e(o.class_name).each((function(){c(this)})),l.observe(document.body,{childList:!0,subtree:!0}),o.touchstart_init||(o.touchstart_init=!0,e(window).on("touchstart"+o.event_name_space,s)),o.touchmove_init||(o.touchmove_init=!0,e(window).on("touchmove"+o.event_name_space,a))))}}(n(661533)),void 0===(i=function(){}.call(t,n,t,e))||(e.exports=i);var o="vendor/nonbounce";window.define(o,(function(){var t="undefined",n=typeof __webpack_exports__===t?typeof i===t?typeof e===t?void 0:e.exports:i:__webpack_exports__;return n&&n.default||n})),window.require([o])},323344:(e,t,n)=>{"use strict";n.r(t),n.d(t,{QStoJSON:()=>u,getParam:()=>p,getQueryParam:()=>g,getQueryString:()=>h,removeQueryParam:()=>f,setParam:()=>_,setQueryParam:()=>m});var i=n(661533),o=n.n(i),r=n(629133),s=n.n(r),a=n(577486);function c(e,t){return null!=t&&"undefined"!=typeof Symbol&&t[Symbol.hasInstance]?!!t[Symbol.hasInstance](e):e instanceof t}function l(e){return e.indexOf("?")>=0?e.split("?")[1]:e}function d(e){try{e=decodeURIComponent(e.toString().replace(/\+/gi," "))}catch(t){e=""}return e.toString()}function u(e){var t,n,i=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return"string"==typeof e?i?function(e,t){var n,i={},r=l(e);return s().isObject(t)||(t={to_arrays:!1}),r?(o().each(r.split("&"),(function(e,o){var r;o=o.split("=");try{o[0]=decodeURIComponent(o[0])}catch(e){return console.error(e),i}if(void 0!==i[o[0]])c(i[o[0]],Array)?i[o[0]].push(d(o[1]||"")):(n=i[o[0]].toString(),i[o[0]]=[n,d(o[1]||"")]);else if(o[0].indexOf("[",1)>0){(r=o[0].split("["))[r.length]=d(o[1]);var s=0,a=function(e,n){if(s<n.length-1)if(n[s]=n[s].replace("]",""),""===n[s])Object.keys(e).length?e[Object.keys(e).length]=n[n.length-1]:e[0]=n[n.length-1];else{e[n[s]]=e[n[s]]||(t.to_arrays&&"]"===n[s+1]?[]:{});var i=e[n[s]];++s==n.length-1?e[n[s-1]]=n[s]:a(i,n)}};a(i,r)}else i[o[0]]=function(e){try{e=decodeURIComponent(e.toString().replace(/\+/gi," "))}catch(t){e=""}try{return JSON.parse(e)}catch(t){return e.toString()}}(o[1]||"")})),i):i}(e,i):function(e){var t,n={},i=l(e);if(!i)return n;try{o().each(i.split("&"),(function(e,i){(i=i.split("="))[0]=decodeURIComponent(i[0]),void 0===n[i[0]]?n[i[0]]=d(i[1]||""):c(n[i[0]],Array)?n[i[0]].push(d(i[1]||"")):(t=n[i[0]].toString(),n[i[0]]=[t,d(i[1]||"")])}))}catch(e){return console.error(e),{}}return n}(e):(t=e,n=[],s().each(t,(function(e,t){"object"==typeof e?s().each(e,(function(e,i){n.push("".concat(t,"[").concat(isNaN(i,10)?i:"","]=").concat(encodeURIComponent(e)))})):n.push("".concat(t,"=").concat(encodeURIComponent(e)))})),n.join("&"))}function h(){var e=window.location.href.replace(/.*\?/,"").toString();return e===window.location.href&&(e=""),e||""}function p(e){var t,n=window.location.pathname||"",i=new a.UnsafeRegExp("".concat(e.toString(),"/([^\\/]+)"),"i");return!(!n.length||!(t=n.match(i))||2!==t.length)&&0|(t[1]||1)}function _(e,t){var n=window.location.pathname,i=h();return t=t||{},s().each(e,(function(e,t){p(t)?n=n.replace(new a.UnsafeRegExp("(".concat(t,")/([^/]?)+(/)?(.*)")),e&&e.toString().length?"$1/".concat(e,"/$4"):"$4"):e&&e.toString().length&&("/"!==n.charAt(n.length-1)&&(n+="/"),n+="".concat(t,"/").concat(e,"/"))})),n+(!0!==t.only_path&&i.length?"?".concat(i):"")}function f(e,t){var n,i=(arguments.length>2&&void 0!==arguments[2]?arguments[2]:{}).shouldDecodeValues,o=void 0===i||i,r=((s().isUndefined(t)?h():t.replace(/^\?/,"")).replace(/\+/g," ")||"").split(/[&;]/g);s().isArray(e)||(e=[e]);try{s().each(e,(function(e,t){for(n="".concat(decodeURIComponent(e),"="),t=r.length;t-- >0;)-1!==(o?decodeURIComponent(r[t]):r[t]).lastIndexOf(n,0)&&r.splice(t,1)}))}catch(e){console.error(e)}return t&&0===t.indexOf("?")?"?".concat(r.join("&")):r.join("&")}function g(e){var t="?".concat(h().replace(/\[/g,"%5B").replace(/\]/g,"%5D"));e=e.replace(/\[/g,"%5B").replace(/\]/g,"%5D");var n,i="[\\?&]".concat(e,"=([^&#]*)"),o=new a.UnsafeRegExp(i).exec(t);if(s().isNull(o))return!1;n="phone"===e?o[1]:o[1].replace(/\+/g," ");try{n=decodeURIComponent(n)}catch(e){return console.error(e),!1}return n}function m(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=window.location.pathname,i=s().isString(t.query_string)?t.query_string:h();return 0!==i.indexOf("?")&&(i="?".concat(i)),s().each(e,(function(e,t){var n="";if("?"!==i&&(n=-1===i.indexOf("?")?"?":"&"),i=f(t,i),"object"==typeof e)i="".concat(i+n+t,"=").concat(e.join("&".concat(t,"=")));else{e=encodeURIComponent(e);var o=new a.UnsafeRegExp("([?|&])".concat(t.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&"),"=.*?(&|$)"),"ig"),r=i.match(o);if(r)if(e)i=i.replace(o,"$1".concat(t,"=").concat(e,"$2"));else{var s=r[0],c=s[0],l="";"&"===s[s.length-1]&&(l=c),i=i.replace(o,l)}else i+=e?"".concat(n+t,"=").concat(e):""}})),0!==i.indexOf("?")&&(i="?".concat(i)),!1===t.question_mark&&(i=i.replace(/^\?/,"")),(!0===t.only_query_string?"":n)+("?"===i?"":i.replace(/^\?&=?/,"?"))}var v="../build/transpiled/common/urlparams";window.define(v,(function(){var e="undefined",n=typeof t===e?typeof __WEBPACK_AMD_DEFINE_RESULT__===e?typeof module===e?void 0:module.exports:__WEBPACK_AMD_DEFINE_RESULT__:t;return n&&n.default||n})),window.require([v])},845043:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>u});var i=n(661533),o=n.n(i),r=n(629133),s=n.n(r),a=n(460159),c=n.n(a),l=n(304483),d=function(e){var t=this;this.options=s().extend({},e),this.modal=new l.default({can_centrify:!0,class_name:"".concat(s().isUndefined(this.options.class_name)?"modal-list":this.options.class_name," js-modal-confirm"),disable_overlay_click:this.options.disable_overlay_click,init:c()._preload([t.options.template||"/tmpl/common/modal/confirm.twig"],(function(e){t.$modal_body=e,e.trigger("modal:loaded").html(c()({ref:t.options.template||"/tmpl/common/modal/confirm.twig"}).render(o().extend({decline_text:t.options.decline_text,accept_text:t.options.accept_text,button_class:t.options.button_class,no_cancel:t.options.no_cancel},t.options,s().result(t.options,"getRenderParams",{})))).trigger("modal:centrify"),s().isFunction(t.options.init)&&t.options.init.call(t),e.on("click",(function(e){o()(e.target).is(".button-input")||e.stopPropagation()})).on("click",".button-cancel",(function(e){e.stopPropagation(),t.accepted=!1,t.destroy()})).on("click",".modal-body__close",(function(e){e.stopPropagation(),t.destroy()})).on("click",".js-modal-accept",(function(e){t.accepted=!0,"function"==typeof t.options.accept?(t.options.accept.call(t),t.options.close_on_accept&&t.destroy()):t.destroy(),e.stopPropagation()}))})),destroy:function(){return!(t.xhr&&4!==t.xhr.readyState||(t.modal.$modal.find(".modal-body").off(),"function"==typeof t.options.destroy&&t.options.destroy.call(t),0))},onBeforeInit:t.options.onBeforeInit,tryAgain:t.options.tryAgain}),this.modal.$el.on("click",".modal-scroller",s().bind((function(e){e.stopPropagation()})))};d.prototype.requestStart=function(){return this.modal?this.modal.requestStart():this.$modal_body.hide(),this},d.prototype.requestSuccess=function(e,t){this.$modal_body.show(),this.modal.showSuccess(e,t)},d.prototype.requestFail=function(e,t){this.$modal_body.show(),this.modal.showError(e,t)},d.prototype.destroy=function(){this._destroyed||this.modal.destroy(),this._destroyed=!0};const u=d;var h="../build/transpiled/components/base/confirm";window.define(h,(function(){var e="undefined",n=typeof t===e?typeof __WEBPACK_AMD_DEFINE_RESULT__===e?typeof module===e?void 0:module.exports:__WEBPACK_AMD_DEFINE_RESULT__:t;return n&&n.default||n})),window.require([h])},729115:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>h});var i=n(661533),o=n.n(i),r=n(629133),s=n.n(r),a=n(345839),c=n.n(a),l=n(313981);function d(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}var u=c().Model.extend({initialize:function(){this.defaults=s().clone(this.attributes)},setDefaults:function(){this.defaults=s().defaults(this.defaults,this.attributes)},updateDefaults:function(e){this.defaults=s().extend(this.defaults,e||this.attributes)},deepCloneDefaults:function(){this.defaults=JSON.parse(JSON.stringify(this.attributes))},hasChanges:function(e){return e&&!s().isUndefined(this.attributes[e])?this.attributes[e]!==this.defaults[e]:!s().isEqual(this.attributes,this.defaults)},set:function(e,t){return c().Model.prototype.set.apply(this,arguments),s().isEmpty(e)||(s().isObject(e)?s().each(e,(function(e,t){this._setChanges(t,e)}),this):this._setChanges(e,t)),this},_setChanges:function(e,t){s().isUndefined(this.defaults)||(this.defaults[e]===t?delete this.changed[e]:this.changed[e]=t)}});const h={View:l.default.extend({silent:!1,events:{"input :input":"changeInModel","change :input":"changeInModel","controls:change :input":"changeInModel","change:with-default :input":"updateDefaultsAndChangeInModel"},initialize:function(e){var t={_onSave:s().noop,onSaveError:s().noop,onSaveForm:s().noop,flat:!0,new_attrs_dissalowed:!1},n=e&&e.model||u;l.default.prototype.initialize.apply(this,arguments),this.options=o().extend({},t,e),this.model=new n,this.initModelFromForm(e)},save:function(e){var t,n,i=this,r=o().extend({success:s().noop,error:s().noop},e||{}),a=[s().extend({success:s().bind((function(e){this.updateDefaults(),s().isFunction(i.options._onSave)&&i.options._onSave.call(this,e),s().isFunction(i.options.onSaveForm)&&i.options.onSaveForm.call(this,e),r.success.apply(this,arguments),i.checkChanges()}),this.model),error:function(e){s().isFunction(i.options._onError)&&i.options._onError.call(this,e),s().isFunction(i.options.onSaveError)&&i.options.onSaveError.call(this,e),r.error.apply(this,arguments)}},s().omit(e,"success","error"))];return this.model.save===c().Model.prototype.save&&a.unshift(this.model.toJSON()),(t=this.model).save.apply(t,function(e){if(Array.isArray(e))return d(e)}(n=a)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(n)||function(e,t){if(e){if("string"==typeof e)return d(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(n):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?d(e,t):void 0}}(n)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}())},revert:function(e){var t,n=this.model.attributes,i=!1;s().isArray(e)&&(i=!0,n=s().pick(n,(function(t,n){return s().contains(e,n)}))),s().each(n,(function(e,n){e!==this.model.defaults[n]&&(t=this.$el.find(':input[name="'.concat(n,'"]:not(.js-form-changes-skip)')),this.setInputValue(t,this.model.defaults[n],n),t.trigger("control:select:reset"))}),this),i?(s().extend(this.model.attributes,s().pick(this.model.defaults,(function(t,n){return s().contains(e,n)}))),this.checkChanges()):(this.model.attributes=s().clone(this.model.defaults),this.model.trigger("has_reverted",{type:"has_reverted"}))},checkDeleted:function(){s().each(this.model.attributes,(function(e,t){this.$el.find(':input[name="'.concat(t,'"]:not(.js-form-changes-skip)')).length||delete this.model.attributes[t]}),this),this.checkChanges()},initModelFromForm:function(e){this._initModelFromForm(e),this.model.setDefaults(),this.setUrl()},updateModelFromForm:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this._initModelFromForm({update:!0,handle_skip_class_ignore:e.handle_skip_class_ignore||!1,with_existing_attr_reassign:e.with_existing_attr_reassign||!1}),this.checkChanges()},setTrackingInputs:function(e){this._initModelFromForm({$elem:e}),this.model.setDefaults()},_initModelFromForm:function(e){var t=!1;t=(e=e||{}).with_existing_attr_reassign||this.options.with_existing_attr_reassign||t,s().each((e.$elem||this.$el).find(":input"),(function(n){var i=o()(n),r=this.model.get(i.attr("name"));if((s().isUndefined(r)||""===r||t)&&(!i.hasClass("js-form-changes-skip")||e.update)){if(i.hasClass("js-form-changes-skip")&&e.handle_skip_class_ignore)return;this.setModelValue(i)}}),this),s().each((e.$elem||this.$el).find(".js-control-checkboxes_dropdown-huge"),(function(e){var t=o()(e).data("view");t?this.setModelValueForCheckboxesDropdownHuge(t):o()(e).on("controls:view:init",s().bind((function(){t=o()(e).data("view"),this.setModelValueForCheckboxesDropdownHuge(t)}),this))}),this)},setUrl:function(e){this.model.url=e||this.$el.attr("action")},hasChanges:function(e){return this.model.hasChanges(e)},setInputValue:function(e,t,n){var i=e.attr("type");switch(n=n||e.attr("name"),i){case"checkbox":e.prop("checked",t);break;case"radio":""===t?(e.closest('[name="'.concat(n,'"]')),e.prop("checked",!1)):(e=e.closest('[name="'.concat(n,'"][value="').concat(t,'"]'))).prop("checked",!0);break;default:e.val(t)}e.trigger("change").trigger("controls:change").trigger("autosize").trigger("controls:textarea:autosize"),this.model.set(n,t)},getInputValue:function(e){var t="";switch(e.attr("type")){case"checkbox":case"radio":t=e.prop("checked")?e.val()||"on":"";break;default:t=e.val()}return t},setModelValue:function(e,t){var n,i=e.attr("name"),o=this.model.get(i);if(t=t||{},1==("checkbox"===e[0].type&&!1===this.options.flat)){if(n=this.getInputValue(e),o)switch(s().isArray(o)||(o=[o]),n?o.push(n):o=s().without(o,e.val()),(n=s().sortBy(s().uniq(o),(function(e){return(e||"").toString()}))).length){case 1:n=n[0];break;case 0:n=""}}else n=this.getInputValue(e);t.update_default&&(this.model.defaults[i]=n),this.model.set(i,n,{silent:t.base_form_silent||!1})},setModelValueForCheckboxesDropdownHuge:function(e){var t=e.getItemsForFormModel();s().extend(this.model.defaults,t),this.model.set(t,{silent:!0})},toggleSilence:function(e){this.silent=s().isBoolean(e)?e:!this.silent},updateDefaultsAndChangeInModel:function(e){this.changeInModel(e,{update_default:!0})},changeInModel:function(e,t){var n=o()(e.currentTarget);if(t=t||{},!this.silent&&!n.hasClass("js-form-changes-skip")){if(!0===this.options.new_attrs_dissalowed&&s().isUndefined(s().propertyOf(this)(["model","defaults",n.attr("name")])))return;this.setModelValue(n,t),this.checkChanges()}},checkChanges:function(){var e=this.hasChanges(),t="has_changes";return e||(t="has_reverted"),this.model.trigger(t,{type:t}),e}}),Model:u};var p="../build/transpiled/components/base/form";window.define(p,(function(){var e="undefined",n=typeof t===e?typeof __WEBPACK_AMD_DEFINE_RESULT__===e?typeof module===e?void 0:module.exports:__WEBPACK_AMD_DEFINE_RESULT__:t;return n&&n.default||n})),window.require([p])},555989:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>h});var i=n(661533),o=n.n(i),r=n(629133),s=n.n(r),a=n(460159),c=n.n(a),l=n(313981),d=n(577486),u=n(526471);const h=l.default.extend({template:"/tmpl/controls/checkboxes_search/opening_list.twig",className:"checkboxes-search__opening-list hidden",events:{click:"_stopPropagation","update:form:defaults":"updateFormDefaults"},_stopPropagation:function(e){e.stopPropagation()},_selectors:function(){return{cb_inputs:"input:checkbox",cb_ch_inputs:"input:checked"}},initialize:function(e){this.options=e||{},this.applyClick=s().isFunction(e.applyClick)?e.applyClick:s().noop,this.cancelClick=s().isFunction(e.cancelClick)?e.cancelClick:s().noop,this.parrentClose=s().isFunction(e.parrentClose)?e.parrentClose:s().noop,this.callbackHide=s().isFunction(e.callbackHide)?e.callbackHide:s().noop,l.default.prototype.initialize.apply(this,arguments),this.options.el||this.render(),this.initForm(),this.initEvent()},initEvent:function(){this.$el.on("click".concat(this.ns),".js-checkboxes-search-list-apply:not(.button-input-disabled)",s().bind(this.hide,this)).on("click".concat(this.ns),".js-checkboxes-search-list-close",s().bind(this.close,this)).on("input".concat(this.ns),".checkboxes-search__search-input",s().bind(this.search,this)).on("click".concat(this.ns),".js-checkboxes-search-clear-all",s().bind(this.allChangeClear,this)).on("click".concat(this.ns),".js-checkboxes-search-check-all",s().bind(this.allChangeCheck,this))},updateFormDefaults:function(){this.form.model.deepCloneDefaults(),this.form.checkChanges()},initForm:function(){this.form=this._addComponent(u.default.View,{el:this.$el,model:u.default.Model}),this.form.listenTo(this.form.model,"has_changes",s().bind(this.triggerButton,this,!0)).listenTo(this.form.model,"has_reverted",s().bind(this.triggerButton,this,!1))},close:function(e){e.stopPropagation(),e.preventDefault(),this.form&&this.form.revert(),this.cancelClick(),this.hide()},triggerButton:function(e){this._triggerButton||(this._triggerButton=s().throttle(s().bind((function(){var t=this.$el.find("input:checkbox"),n=this.$el.find("input:checked"),i=this.form.model.defaults[this.options.name];e=s().isString(i)&&!i.length||i&&i.length===t.length?t.length!==n.length&&0!==n.length:!s().isEqual(this.form.model.attributes,this.form.model.defaults),this.$el.find(".js-checkboxes-search-list-apply").trigger("button:save:".concat(e?"enable":"disable"))}),this),400)),s().isFunction(this._triggerButton)&&this._triggerButton()},render:function(){return c()._preload([this.template],s().bind((function(){this.$el.html(c()({ref:this.template}).render(this.options))}),this))()},hide:function(e){this.parrentClose(),e&&this.applyClick(),this.$el.addClass("hidden").find(".checkboxes-search__search-input").val("").trigger("input"),this._findElem("cb_inputs").length===this._findElem("cb_ch_inputs").length&&this._findElem("cb_inputs").attr("checked",!1),this._findElem("cb_inputs").trigger("change"),this._findElem("cb_ch_inputs").trigger("change"),this.form&&""===this.form.model.get(this.name)&&this.form.revert(),this.updateFormDefaults(),this.callbackHide()},allChange:function(e){this.$el.find("input:checkbox").prop("checked",!1),this.$el.find("input:checkbox").prop("checked",e).trigger("change")},allChangeClear:function(){this.allChange(!1)},allChangeCheck:function(){this.allChange(!0)},search:function(e){var t=o()(e.currentTarget).val();this.$el.find(".checkboxes-search__item-label").each((function(e,n){o()(n).toggleClass("hidden",s().isNull(o()(n).find(".element__text").text().toLowerCase().match(new d.UnsafeRegExp(t,"igm"))))}))},destroy:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this.$el.off(),this._destroyComponent(this.form),l.default.prototype.destroy.apply(this,t)}});var p="../build/transpiled/components/fields/checkboxes_search";window.define(p,(function(){var e="undefined",n=typeof t===e?typeof __WEBPACK_AMD_DEFINE_RESULT__===e?typeof module===e?void 0:module.exports:__WEBPACK_AMD_DEFINE_RESULT__:t;return n&&n.default||n})),window.require([p])},116028:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>l});var i,o,r=n(661533),s=n.n(r),a=(0,n(323344).getQueryParam)("beautifultimer");function c(e){var t=e/1e3,n=Math.abs(e%1e3);return(t=t>0?Math.floor(t):Math.round(t))<10&&(t=(t<0?"-":"")+"0"+Math.abs(t)),n<100&&"function"==typeof String(n).padStart&&(n=String(n).padStart(3,"0")),t+"."+n}const l={fix:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Date.now()-i;return a&&null!==o&&i&&(s()("#mybeautifultimer").parent().append("<div>"+e+": "+c(n)+"</div>"),t&&t.append('<span class="animated tada" style="position:fixed;top:0;z-index:1000;background:#000;color:#fff;">'+c(n)+" "+e+"</span>")),this},start:function(){return a&&(s()("#mybeautifultimer").parent().remove(),s()(document.body).append('\n        <div style="text-align:right;background:#000;color:#fff;position:fixed;top:0;right:0;z-index:110111010;padding:5px;">\n          <span id="mybeautifultimer"></span>\n        </div>\n      '),i=Date.now(),o=setInterval((function(){document.getElementById("mybeautifultimer").innerHTML=c(Date.now()-i)}),1),this.fix("СТАРТ")),this},stop:function(){return a&&null!==o&&(clearInterval(o),s()("#mybeautifultimer").html(c(Date.now()-i)),o=null),this}};var d="../build/transpiled/dev/timer";window.define(d,(function(){var e="undefined",n=typeof t===e?typeof __WEBPACK_AMD_DEFINE_RESULT__===e?typeof module===e?void 0:module.exports:__WEBPACK_AMD_DEFINE_RESULT__:t;return n&&n.default||n})),window.require([d])},19980:(e,t,n)=>{"use strict";n.r(t);var i=n(661533),o=n.n(i),r=n(629133),s=n.n(r),a=n(575049),c=n.n(a),l=n(116028),d=n(323344),u=n(661533),h=document.documentElement,p=/^(https?:\/\/)?([0-9a-z\-.]{1,})(\.amocrm\.(ru|com)|\.amocrm2\.saas).*/i,_=/^(https?:\/\/?[0-9a-z\-.]{1,}\.amocrm\.(ru|com)|\.amocrm2\.saas)?\/\w+\/(detail)\/.*/i;APP.controls={},APP.is_touch_device=c().tablet()&&!c().windowsTablet()||c().mobile(),u.fn.reverse=[].reverse,u.fn.prepareTransition=function(e){var t=o()(this);return s().isFunction(e)&&t.length?setTimeout((function(){e.call(t[0])}),0):u.contains(h,this)&&t.offset(),t},o()(document).on("page:back",(function(){APP.router.back()})).on("click",".js-card-back-button, .js-back-button",(function(e){e.preventDefault(),e.stopPropagation(),APP.router.back()})).on("click link:navigate",".js-navigate-link",(function(e){var t=o()(this).attr("href").toString().split("?");if(e.preventDefault(),e.stopPropagation(),l.default.start(),e.metaKey||e.ctrlKey){var n=t[1]?"?"+t[1]:"",i=t[0].match(_);i&&"detail"===i[3]&&(n=(0,d.setQueryParam)({compact:"yes"},{only_query_string:!0,query_string:t[1]||""})||"");var r=window.open();r.opener=null,r.location=t[0]+n}else APP.router&&APP.router.navigate(t.join("?"),{trigger:!0})})).on("click",'a[target="_blank"]:not(.js-navigate-link)',(function(){var e=o()(this).attr("href");if("/"!==e[0]&&!p.test(e)){var t=window.open();return t.opener=null,t.location=e,!1}})),o()((function(){o()("html").addClass("devicePixelRatio-"+window.devicePixelRatio).toggleClass("touch",APP.is_touch_device).toggleClass("no-touch",!APP.is_touch_device)}));var f="../build/transpiled/interface/controls/common";window.define(f,(function(){var e="undefined",n=typeof t===e?typeof __WEBPACK_AMD_DEFINE_RESULT__===e?typeof module===e?void 0:module.exports:__WEBPACK_AMD_DEFINE_RESULT__:t;return n&&n.default||n})),window.require([f])},985543:(e,t,n)=>{"use strict";n.r(t);var i=n(661533),o=n.n(i),r=n(629133),s=n.n(r),a=n(267651),c=n.n(a),l=n(982862),d=n(955026),u=n(661533);function h(e,t){return null!=t&&"undefined"!=typeof Symbol&&t[Symbol.hasInstance]?!!t[Symbol.hasInstance](e):e instanceof t}var p=o()(document),_={};function f(){var e=document.body;if(!parseInt(e.getAttribute("data-body-fixed"))&&!APP.is_touch_device){var t=_.getHolder();_.fixScroll(t,o()(e),!0)}e.setAttribute("data-body-fixed",++_.overlay_stack),APP.is_touch_device?(o().nonbounce("destroy"),o().nonbounce()):e.style.overflow="hidden"}function g(){var e=document.body;if(--_.overlay_stack,_.overlay_stack<0&&(_.overlay_stack=0),0===_.overlay_stack)if(APP.is_touch_device)o().nonbounce("destroy");else{var t=_.getHolder();e.style.overflow="",_.fixScroll(t,o()(e))}e.setAttribute("data-body-fixed",_.overlay_stack),p.trigger("overlay:unfixed")}n(59372),n(19980),_.overlay_stack=0,_.getHolder=function(){var e=o()("#page_holder");return"mail"===APP.getBaseEntity()&&APP.data.is_card&&(e=o()("#card_holder")),e.is(":hidden")?{}:e},_.show=function(e,t){t&&t.skip_fix||p.trigger("overlay:fix"),(e=h(e,u)?e:o()(e)).prepareTransition().addClass("default-overlay-visible")},_.hide=function(e,t){t=t||{},e=h(e,u)?e:o()(e);var n=function(){s().isFunction(t.callback)&&t.callback(),e.remove(),t&&t.skip_fix||p.trigger("overlay:unfix")};t.instantly?n():(s().delay(n,200),e.prepareTransition().addClass("default-overlay-fading"))},_.checkScroll=function(e,t){return e.outerHeight()>t.outerHeight()},_.fixScroll=function(e,t,n){var i=o()(".list__body-right__top"),r=i.length&&(0,d.isV3Design)();if("mail"===APP.getBaseEntity()&&APP.data.is_card&&(r=!0),e.length)if(n&&_.checkScroll(e,t)){var s=o()(window).scrollTop();e.css("overflow-y","scroll").scrollTop(s),r&&i.css("marginRight",l.scrollBarWidth+"px")}else e.css("overflow-y","").scrollTop(0),r&&i.css("marginRight","")},p.on("overlay:fix",f).on("overlay:unfix",g).on("touchmove",".default-overlay",(function(){return!1})).on("overlay:show",".default-overlay",(function(e,t){_.show(this,t)})).on("overlay:hide",".default-overlay",(function(e,t){_.hide(this,t)})),c().subscribe("overlay:show",(function(e,t){_.show(t.el,t.params)})),c().subscribe("overlay:hide",(function(e,t){_.hide(t.el,t.params)})),c().subscribe("overlay:fix",f),c().subscribe("overlay:unfix",g);var m="../build/transpiled/interface/controls/overlay";window.define(m,(function(){var e="undefined",n=typeof t===e?typeof __WEBPACK_AMD_DEFINE_RESULT__===e?typeof module===e?void 0:module.exports:__WEBPACK_AMD_DEFINE_RESULT__:t;return n&&n.default||n})),window.require([m])},709984:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>l});var i=n(661533),o=n.n(i),r=n(629133),s=n.n(r),a=n(210734),c=!1;const l=a.default.extend({controlClassName:"js-control-pipeline-select",_selectors:function(){return{wrapper:".pipeline-select-wrapper_plain",inner:".pipeline-select-wrapper__inner_plain",holder:".pipeline-select-wrapper__inner__holder",container:".pipeline-select-wrapper__inner__container",item:".pipeline-select__dropdown__item",pipeline:".pipeline-select",pipeline_radio:".pipeline-select__pipeline-input",pipeline_caption:".pipeline-select__caption",pipeline_caption_inner:".pipeline-select__caption__inner",pipeline_caption_text:".pipeline-select__caption-text",pipeline_selected:".pipeline-select__pipeline-selected",pipeline_checkbox:'.pipeline-select__caption input[type="checkbox"]',pipeline_checkbox_by_value:'.pipeline-select__caption input[type="checkbox"][value="%s"]',status_radio:".pipeline-select__dropdown__item__input",status_checkbox:'.pipeline-select__dropdown__item__label input[type="checkbox"]',status_checkbox_by_value:'.pipeline-select__dropdown__item__label input[type="checkbox"][value="%s"]'}},_classes:function(){return{showed:"pipeline-select-showed",item_selected:"pipeline-select__dropdown__item_selected"}},document_events:function(){var e={};return e["click ".concat(this._selector("showed")," ").concat(this._selector("inner")," ").concat(this._selector("container"))]="stopPropagationOnClickInside",e["controls:change:visual ".concat(this._selector("inner")," ").concat(this._selector("status_radio"))]="onStatusChange",e["change ".concat(this._selector("inner")," ").concat(this._selector("status_radio"))]="onStatusChange",e["change ".concat(this._selector("inner")," ").concat(this._selector("pipeline_radio"))]="onPipelineChange",e["keydown body".concat(this._selector("showed"))]="hideOnEscape",e["click ".concat(this._selector("inner"),", ").concat(this._selector("item_selected"))]="_hideSelect",e["controls:hide:private"]="onControlsHide",e["page:change:start page:change:stop"]="_hideSelect",e["control:select:reset"]="_resetSelect",e},events:function(){var e={};return e["click ".concat(this._selector("holder"))]="openOnClick",e["pipeline-select:open"]="open",s().extend({},s().result(a.default.prototype,"events",{}),e)},initialize:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];a.default.prototype.initialize.apply(this,t),this._$window.on("resize".concat(this.ns),s().bind(this._reposition,this)),this._left_menu_width=o()("#left_menu").width()},destroy:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._hideSelect(),a.default.prototype.destroy.apply(this,t)},onControlsHide:function(e){e.target!==this.el&&this._hideSelect()},openOnClick:function(e){e.stopPropagation(),this.open()},open:function(){!c&&this._isHidden()&&(this._$document.trigger({type:"controls:hide",target:this.$el}),this._$inner=this.$el.children(this._selector("inner")),this._$body.addClass(this._class("showed")).append(this._$inner),this._$inner.addClass("active"),this.$el.removeClass("folded"),this._reposition(),this._captionCentrify(this._$inner.find("".concat(this._selector("pipeline_radio"),"[checked] + ").concat(this._selector("pipeline")))),this._$overlay=o()('<div class="default-overlay pipeline-select-overlay" id="pipeline_select_overlay"></div>'),this._$inner.append(this._$overlay),this.$el.focus(),this._$overlay.trigger("overlay:show"),this._afterOpen())},hideOnEscape:function(e){27===e.keyCode&&(e.stopPropagation(),e.preventDefault(),this._hideSelect())},stopPropagationOnClickInside:function(e){e.stopPropagation()},onStatusChange:function(e){var t=o()(e.currentTarget);if(!e.isTrigger&&this._$inner&&o().contains(this._$inner.get(0),t.get(0))){var n=t.closest(this._selector("holder"));n.find("".concat(this._selector("status_radio"),"[checked]")).removeAttr("checked"),n.find(this._selector("item")).removeClass(this._class("item_selected"));var i=n.find(this._selector("pipeline_radio")).filter((function(e,t){return o()(t).attr("checked")||o()(t).prop("checked")}));n.find(this._selector("pipeline_selected")).val(i.val()),this._hideSelect()}},onPipelineChange:function(e){var t=o()(e.currentTarget);if(!e._is_trigger&&this._$inner&&o().contains(this._$inner.get(0),t.get(0))){var n=t.closest(this._selector("holder"));e.stopPropagation(),this._captionCentrify(t.next(this._selector("pipeline"))),n.find(this._selector("pipeline_radio")).not(t).removeProp("checked").removeAttr("checked"),"unsorted"!==t.attr("data-type")&&"y"!==t.attr("data-is-custom")||t.next().find("input").trigger("click")}},_reposition:function(){if(!this._isHidden()){var e=this.$el.offset(),t=this._$window.scrollTop();this._$inner.children(this._selector("holder")).css({left:e.left-this._left_menu_width,top:e.top-t,paddingBottom:this._$window.height()-(e.top+this.$el.height()+9)+t,width:this.$el.width()})}},_captionCentrify:function(e){var t=e.children(this._selector("pipeline_caption")),n=e.closest(this._selector("holder")).find(this._selector("pipeline")).index(e[0]);this._$inner.scrollTop(n*(t[0].offsetHeight+5))},_isHidden:function(){return this.$el.is(".folded")},_hideSelect:function(e){var t=this.$el;if(!this._isHidden()){e&&"click"===e.type&&e.stopPropagation(),this.$el.append(this._$inner);var n=this._findElem("holder"),i=this._elem("pipeline_radio"),r=this._findElem("pipeline_selected"),a=r.val();a||(a=this.$("".concat(this._selector("pipeline_radio"),":first")).val()),t.addClass("folded"),n.attr("style",""),this._$overlay.trigger("overlay:hide",{instantly:!0}),i.removeProp("checked").removeAttr("checked").each((function(){var e=o()(this);e.val().toString()===a.toString()&&e.prop("checked",!0).attr("checked","checked").trigger({type:"change",_is_trigger:!0})})),r.trigger("change"),this._$body.children(this._selector("inner")).length||this._$body.removeClass(this._class("showed")),this._afterHide(),this._$inner.removeClass("active"),this._$inner=null,c=!0,s().delay((function(){c=!1}),300)}},_afterOpen:function(){this.$el.trigger("controls:pipeline-select:open")},_afterHide:function(){this.$el.trigger("controls:pipeline-select:hide"),this.$("".concat(this._selector("status_radio"),":checked")).trigger("change").closest(this._selector("item")).addClass(this._class("item_selected"))},_resetSelect:function(){var e=parseInt(this.$el.find('input[name="lead[PIPELINE_ID]"]').val()||0),t='input[name="lead[STATUS]"]';e&&(t+=":checked");var n=parseInt(this.$el.find(t).val()||0);this._findElem("item").removeClass(this._class("item_selected")),this._findElem("pipeline_radio").removeAttr("checked").closest('[value="'.concat(e,'"]')).attr("checked","checked").find('input[name="lead[STATUS]"][value="'.concat(n,'"]')).closest(this._selector("item")).addClass(this._class("item_selected"))}});var d="../build/transpiled/interface/controls/pipeline_select/index";window.define(d,(function(){var e="undefined",n=typeof t===e?typeof __WEBPACK_AMD_DEFINE_RESULT__===e?typeof module===e?void 0:module.exports:__WEBPACK_AMD_DEFINE_RESULT__:t;return n&&n.default||n})),window.require([d])},313445:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>d});var i=n(661533),o=n.n(i),r=n(629133),s=n.n(r),a=n(445368),c=n(709984);function l(e,t){var n=this._$inner?this._$inner.get(0):this.el;!s().isUndefined(n)&&o().contains(n,t.currentTarget)&&e.call(this,t)}const d=c.default.extend({controlClassName:"js-control-pipeline-select_multiple",document_events:function(){var e={};return e["change ".concat(this._selector("inner")," ").concat(this._selector("pipeline_checkbox"))]=s().bind(l,this,this.onCheckAllPipelineStatuses),e["controls:change:visual ".concat(this._selector("inner")," ").concat(this._selector("status_checkbox"))]=s().bind(l,this,this.onStatusCheckboxChange),e["change ".concat(this._selector("inner")," ").concat(this._selector("status_checkbox"))]=s().bind(l,this,this.onStatusCheckboxChange),s().extend({},s().result(c.default.prototype,"document_events",{}),e)},events:function(){return s().extend({},s().result(c.default.prototype,"events",{}),{"controls:initDefaultStatuses":"_updateFoldedCaption"})},initialize:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];c.default.prototype.initialize.apply(this,t),this._updateFoldedCaptionThrottled=s().throttle(this._updateFoldedCaption,200),this._updateFoldedCaption()},onCheckAllPipelineStatuses:function(e){var t=o()(e.currentTarget),n=t.get(0).checked;n||t.trigger("controls:checkbox:minus",[!1]),e.isTrigger||t.closest(this._selector("pipeline")).find(this._selector("status_checkbox")).each((function(){this.disabled||(this.checked=n)}))},onStatusCheckboxChange:function(e){var t=o()(e.currentTarget).closest(this._selector("pipeline")),n=t.find(this._selector("status_checkbox")),i=t.find(this._selector("pipeline_checkbox"));switch(i.trigger("controls:checkbox:minus",[!1]),n.filter((function(){return this.checked})).length){case n.length:i[0].checked=!0;break;case 0:i[0].checked=!1;break;default:i.trigger("controls:checkbox:minus",[!0])}this._updateFoldedCaptionThrottled()},_updateFoldedCaption:function(){var e=(this._$inner||this.$el.children(this._selector("inner"))).find(this._selector("holder")),t=e.find(this._selector("pipeline_caption_text")),n=this._getStatusesChecked(e),i=this._getPipelinesChecked(e);this.empty_caption=0!==n&&0!==i,this.empty_caption?t.attr("data-folded-title",this._getFilledMultipleTitle(t,n,i)):t.attr("data-folded-title",this._getDefaultMultipleTitle())},_getFilledMultipleTitle:function(e,t,n){var i=[],o="";return t=s().isNaN(parseInt(t))?0:parseInt(t),o=-1===(n=s().isNaN(parseInt(n))?0:parseInt(n))?this._getCorrectAllLangValue():n,o+=" ".concat((0,a.numeralWord)(s().contains([-1,0],n)?",":n,e.attr("data-pipelines-numeral")||(0,a.i18n)("pipeline,pipelines"))),1!==n&&i.push(o),o=-1===t?this._getCorrectAllLangValue():t,o+=" ".concat((0,a.numeralWord)(s().contains([-1,0],t)?"all":t,e.attr("data-statuses-numeral")||(0,a.i18n)("stage,stages"))),i.push(o),i.join(", ")},_getCorrectAllLangValue:function(){return APP.lang.all},_getDefaultMultipleTitle:function(){return(0,a.capitalize)([(0,a.numeralWord)("all",(0,a.i18n)("pipeline,pipelines")),(0,a.numeralWord)("all",(0,a.i18n)("stage,stages"))].join(", ").toLowerCase())},_getStatusesChecked:function(e){var t,n=e.find(this._selector("status_checkbox")),i=[];return(t=n.filter((function(){var e=this.checked;return e&&i.push(o()(this).attr("value")),e})).length)===n.length&&(t=-1),this.$el.trigger("filter:statuses:update",{statuses:i}),t},_getPipelinesChecked:function(e){var t=e.find(this._selector("pipeline_checkbox")),n=t.filter((function(){return this.checked})).length;return t.length>1&&n===t.length&&(n=-1),n},_makeFingerPrint:function(){var e={};return this.$(this._selector("status_checkbox")).each((function(t,n){var i=n.getAttribute("name");e[i]||(e[i]=[]),e[i].push([n.value,n.checked].join("_"))})),e},open:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._finger_print=this._makeFingerPrint(),c.default.prototype.open.apply(this,t)},_afterHide:function(){var e=s().chain(this._makeFingerPrint()).reduce((function(e,t,n){return s().union(e,s().map(s().difference(t,this._finger_print[n]),(function(e){return e.split("_")[0]})))}),[],this).unique().value();s().each(e,(function(e){this._findElem("status_checkbox_by_value",e).trigger("change")}),this),this.$el.trigger("controls:pipeline-select:hide")}});var u="../build/transpiled/interface/controls/pipeline_select/multiple";window.define(u,(function(){var e="undefined",n=typeof t===e?typeof __WEBPACK_AMD_DEFINE_RESULT__===e?typeof module===e?void 0:module.exports:__WEBPACK_AMD_DEFINE_RESULT__:t;return n&&n.default||n})),window.require([u])},859200:(e,t,n)=>{"use strict";n.r(t),n.d(t,{RIGHTS_DENIED:()=>p,RIGHTS_FULL:()=>d,RIGHTS_GROUP:()=>u,RIGHTS_LINKED:()=>_,RIGHTS_MAIN:()=>h,canCatalog:()=>x,canDeleteCard:()=>k,canEditCard:()=>w,canImport:()=>A,canTask:()=>E,canViewLead:()=>S,getContactsMergedRights:()=>C,getRights:()=>g,groupMatesIDs:()=>y,hasRestrictedFieldAccess:()=>P,isAdmin:()=>m,isFromCard:()=>b,refreshCache:()=>f,userID:()=>v});var i=n(629133),o=n.n(i),r=n(866633),s=n(926168),a=n(214558),c=null;function l(e,t){var n=c;return null===n||o().isUndefined(e)||(n=o().has(n,e)?n[e]:null,t&&(n=o().has(n,t)?n[t]:null)),n}var d="A",u="G",h="M",p="D",_="L",f=function(){var e,t=APP.constant("user_rights");if(t){e=["add","add_company","has_multi","view_company","merge","view","edit","add_task","change_status","change_field","reassign","delete","manage_tags","import","export","can_save","copy"],(c=c||{}).contacts=o().extend({},c.contacts,t.contacts,t.contacts.CONTACT||{}),c.contacts=o().pick(c.contacts,e),e=["add_company","has_multi","view_company","merge","view","edit","add_task","change_status","change_field","reassign","delete","manage_tags","add","import","export","can_save","copy"],c.companies=o().extend({},c.companies,t.companies,t.contacts.COMPANY||{}),c.companies=o().pick(c.companies,e),o().each({leads:["view","edit","change_status","change_field","reassign","add_task","delete","manage_tags","add","import","export","has_multi","merge","can_save","can_delete"],todo:["delete","open","close","reassign","change_task_date","change_task_type_in_list"],tasks:["edit","delete"],unsorted:["accept","decline","denied"],customers:["view","export","edit","add","delete","reassign","has_multi","add_task","change_field","manage_tags"],tags:["add"],files:["view","delete"],mail:["add_contacts","add_customers","add_leads","delete_thread","mailing","multi_read","resend","reply","restore_thread"],"contacts-trash":["restore"],"leads-trash":["restore"],"todo-trash":["restore"],"files-trash":["restore"],users:["change_group","change_role","deactivate","activate","delete","email_confirm"],helpbot:["delete","activate","deactivate"],helpbot_dataset:["delete"],reply_templates:["delete"],broadcasting_scheduled:["delete","copy"],broadcasting_in_progress:["stop"],broadcasting_draft:["delete"],broadcasting_completed:["delete","copy"],bots_list:["delete","copy","deactivate_bot","activate_bot","stop_bot","reset_bot","export_bot"],onlinechats_list:["delete"],bots_list_marketing:["delete","copy","deactivate_bot","activate_bot","stop_bot","reset_bot","export_bot"],operday_report:["delete"],cleaning_rules_list:["delete"],restricted_fields:["leads","customers","contacts","companies"]},(function(e,n){c[n]=o().extend({},c[n],t[n]),c[n]=o().pick(c[n],e)})),c.is_admin=!!t.is_admin,c.is_free_user=!!t.is_free_user,c.mail_admin=!!t.mail_admin,c.duplicate_search=!!t.duplicate_search,c.base_rights=t.base_rights||{},c.status_rights=t.status_rights||{},c.catalog_rights=t.catalog_rights||{},c.catalogs=t.catalogs||{},c.oper_day_user_tracking=t.oper_day_user_tracking,c.oper_day_reports_view_access=t.oper_day_reports_view_access;var n=APP.constant("user");e=["id","group_mates_ids"],c.user=o().extend({},c.user,o().pick(n,e)),c.user.id=parseInt(c.user.id)}},g=function(e,t,n){var i;return c&&!0!==n||f(),null===(i=l(e,t))&&(f(),i=l(e,t)),i},m=function(){return!!g("is_admin")},v=function(){return g("user","id")},y=function(){return g("user","group_mates_ids")},b=function(){return APP.data.current_card&&APP.data.current_card.id>0&&APP.data.current_card.element_type>0},w=function(){return g(APP.data.current_entity,"can_save",!0)||"customers"===APP.data.current_entity&&APP.constant("grant_edit")},k=function(){return g(APP.data.current_entity,"can_delete",!0)||"customers"===APP.data.current_entity&&APP.constant("grant_delete")},x=function(e,t,n){var i,s,a;return APP.constant("account").pay_type!==r.PayType.PAYMENT_TYPE_BLOCK&&(m()?a=!0:(n=!!o().isUndefined(n)&&b(),i=(g("catalog_rights")[t]||{})[e]||p,s=n?[d,_]:[d],a=-1!==o().indexOf(s,i),n&&i===_&&("edit"===e?a=a&&w():"delete"===e&&(a=a&&k()))),a)},P=function(e,t,n){var i=g("restricted_fields",t)||[];return n=n||"edit",!!i[e]&&!1===o().propertyOf(i)([e,n])},E=function(e,t,n){var i,r,c,l,p,_,f=t.element_type||APP.element_types.todo,v=(0,s.convertElementType)(f,"string"),y=null,b=!1,w=(0,a.current)().id;if(n=n||{},"todos"===v&&(v="tasks"),m())b=!0;else switch(r=f===APP.element_types.todo?Number(t.responsible_user_id):Number(n.responsible_user_id),f===APP.element_types.leads&&(i=g("status_rights"),p=n.pipeline_id||0,_=n.status_id||0,y=o().propertyOf(i)([p,_])||null),null===y&&(y=g("base_rights",v)),y[e]){case d:b=!0;break;case h:b=w&&w===r;break;case u:c=(0,a.get)(!0)[w]||{},l=(0,a.get)(!0)[r]||{},b=!o().isEmpty(c)&&!o().isEmpty(l)&&c.group===l.group}return b},C=function(){var e={};f();var t=g("contacts"),n=g("companies");return o().each(o().keys(t),(function(i){e[i]=t[i]&&n[i]})),e},A=function(){return g("leads","import")||g("contacts","import")||g("company","import")},S=function(e,t){if(m())return!0;var n=g("status_rights");if(0===t){var i=o().keys(n);t=parseInt(o().first(i))}var r=o().propertyOf(n)([t,e,"view"]);return r===d||o().isUndefined(r)},D="../build/transpiled/utils/account/rights";window.define(D,(function(){var e="undefined",n=typeof t===e?typeof __WEBPACK_AMD_DEFINE_RESULT__===e?typeof module===e?void 0:module.exports:__WEBPACK_AMD_DEFINE_RESULT__:t;return n&&n.default||n})),window.require([D])},214558:(e,t,n)=>{"use strict";n.r(t),n.d(t,{add:()=>S,addGroup:()=>$,changeUserGroup:()=>j,current:()=>A,deleteGroup:()=>F,fetch:()=>U,first:()=>O,get:()=>k,getByAmoJoId:()=>C,getGroupName:()=>D,getLangTranslation:()=>w,getUserName:()=>I,isUserOnline:()=>L,remove:()=>E,saveGroupChange:()=>M,set:()=>P,updateAmoJoHash:()=>x,updateGroupName:()=>T,updateOnline:()=>B});var i=n(629133),o=n.n(i),r=n(661533),s=n.n(r),a=n(987081),c=n(128508),l=n(156040),d=n(445368),u=n(955026),h=n(761634),p=new a.Subject,_=new a.ReplaySubject(1),f=s().extend(!0,{},APP.constant("managers")||{}),g=s().extend(!0,{},APP.constant("free_users")||{}),m=s().extend(!0,{},APP.constant("user")||{}),v=s().extend(!0,{},APP.constant("groups")||{}),y={},b={en:"English",es:"Spanish",pt:"Portuguese",id:"Indonesian",tr:"Turkish",ru:"Russian"},w=function(e){return e?b[e]:b[APP.lang_id]};function k(e){var t,n={},i={},r=parseInt(e);if(r>0)return(t=f[r]||g[r])?o().extend({},t):t;switch(o().each(f,(function(e,t){e.active?n[t]=e:i[t]=e})),!0){case!0===e:case"all"===e:return s().extend(!0,{},n,g);case"free"===e:return s().extend(!0,{},g);case"inactive"===e:return s().extend(!0,{},i);case"everyone"===e:return s().extend(!0,{},f,g);case"groups"===e:return s().extend(!0,{},v);case"clean_groups"===e:return o().reduce(k("groups"),(function(e,t,n){var i=parseInt(n.replace("group_",""));return("group_free_users"===n||i>=0)&&e.push({id:"group_free_users"===n?"free_users":i,option:o().escape(t)}),e}),[]);default:return s().extend(!0,{},n)}}function x(){y=o().chain(k(!0)).reduce((function(e,t){return t.amojo_id&&(e[t.amojo_id]=t),e}),{}).value(),o().extend(y,o().reduce((0,h.get)(),(function(e,t){return("amojo_bot_default"===t.code||t.is_integration_bot)&&(e[t.amojo_id]=t),e}),{}))}function P(e){return o().extend(f,e),APP.constant("managers",f),x(),k()}function E(e){e=o().map(e,(function(e){return+e}));var t={paid:o().chain(f).keys().map((function(e){return+e})).intersection(e).value(),free:o().chain(g).keys().map((function(e){return+e})).intersection(e).value()};return o().isEmpty(t.paid)||(f=o().omit(f,t.paid),APP.constant("managers",f)),o().isEmpty(t.free)||(g=o().omit(g,t.free),APP.constant("free_users",g)),x(),o().extend({},f,g)}function C(){return o().extend({},y)}function A(e,t){var n=m;return o().isUndefined(e)||(t?(n[e]=t,APP.constant("user")[e]=t):n=n[e]),n}function S(e){var t={},n=f,i="managers";"Y"!==e.is_free&&"Y"!==e.free_user||(n=g,i="free_users"),t[e.id]=o().clone(e),n[e.id]&&(t[e.id].online=n[e.id].online),o().extend(n,t),APP.constant(i,n),x()}function D(e){return"group_free_users"===e?(0,d.i18n)("Free users"):(e=(o().isNumber(e)?e:e||"").toString().replace(/[^0-9]+/g,""),k("groups")["group_".concat(e)]||(0,d.i18n)("Group deleted"))}function I(e){var t=k(e)||{};return 0===parseInt(e)?(0,d.i18n)("Bot"):t.title||(0,d.i18n)("User deleted")}function T(e,t){var n="group_".concat(e),i={};k("groups")[n]&&t&&(i[n]=t,o().extend(v,i))}function F(e){k("groups")["group_".concat(e)]&&(v=o().omit(v,"group_".concat(e)))}function $(e){var t={};o().isObject(e)&&e.id&&e.name&&(t["group_".concat(e.id)]=e.name,o().extend(v,t))}function j(e,t){var n=k("everyone")[e];"Y"===n.free_user&&E([e]),o().extend(n,{group:"group_".concat(t),free_user:"N"}),S(n)}function M(e){return new Promise((function(t,n){e.group_new===e.group_old||"free"===e.group_new?t():s().ajax({url:"/ajax/v1/users/set",headers:{"X-Session-Token":APP.constant("session_token")},type:"POST",dataType:"json",data:{request:{users:{change_group:{group_id:e.group_new,id:[e.userID]}}}}}).done((function(i){var r=e.userID,s=k("everyone")[r];(0,u.hasKeys)(i,["response","users","set","change_group",r,"result"])?("Y"===s.free_user&&E([r]),o().extend(s,{active:!0}),S(s),j(r,e.group_new),t()):n()})).fail(n)}))}function O(){return o().values(k())[0]}function U(){return _.asObservable()}function N(e){return e}function R(){return a.from(s().ajaxPromisify({url:"/ajax/get_managers_with_group/",type:"POST",data:{free_users:"Y"},dataType:"json"}).then((function(e){return v=e.groups,e})))}function B(e,t){var n;o().each(e,(function(e){n=f[e]||g[e],o().isUndefined(n)||(n.online=t,y[n.amojo_id]&&(y[n.amojo_id].online=t))}))}function L(e){return!!(f[e]||{}).online||!!(g[e]||{}).online}(0,l.onPageFullyLoaded)((function(){a.merge(p,a.fromEvent(s()(document),"loaded_users:null")).pipe(c.startWith(!0),c.switchMap(R),c.map(N)).subscribe(_)})),x();var W="../build/transpiled/utils/account/users";window.define(W,(function(){var e="undefined",n=typeof t===e?typeof __WEBPACK_AMD_DEFINE_RESULT__===e?typeof module===e?void 0:module.exports:__WEBPACK_AMD_DEFINE_RESULT__:t;return n&&n.default||n})),window.require([W])},464702:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>o,getCDNPath:()=>i});var i=function(e){return APP.static_build_domain+e};const o={getCDNPath:i};var r="../build/transpiled/utils/cdn";window.define(r,(function(){var e="undefined",n=typeof t===e?typeof __WEBPACK_AMD_DEFINE_RESULT__===e?typeof module===e?void 0:module.exports:__WEBPACK_AMD_DEFINE_RESULT__:t;return n&&n.default||n})),window.require([r])},104737:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>p});var i=n(661533),o=n.n(i),r=n(629133),s=n.n(r),a=n(623967),c=n.n(a),l=n(567952),d=n.n(l);function u(e,t,n,i,o,r,s){try{var a=e[r](s),c=a.value}catch(e){return void n(e)}a.done?t(c):Promise.resolve(c).then(i,o)}function h(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const p={request:function(e){return(t=function(){var t,n,i;return function(e,t){var n,i,o,r,s={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return r={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function a(r){return function(a){return function(r){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,i&&(o=2&r[0]?i.return:r[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,r[1])).done)return o;switch(i=0,o&&(r=[2&r[0],o.value]),r[0]){case 0:case 1:o=r;break;case 4:return s.label++,{value:r[1],done:!1};case 5:s.label++,i=r[1],r=[0];continue;case 7:r=s.ops.pop(),s.trys.pop();continue;default:if(!((o=(o=s.trys).length>0&&o[o.length-1])||6!==r[0]&&2!==r[0])){s=0;continue}if(3===r[0]&&(!o||r[1]>o[0]&&r[1]<o[3])){s.label=r[1];break}if(6===r[0]&&s.label<o[1]){s.label=o[1],o=r;break}if(o&&s.label<o[2]){s.label=o[2],s.ops.push(r);break}o[2]&&s.ops.pop(),s.trys.pop();continue}r=t.call(e,s)}catch(e){r=[6,e],i=0}finally{n=o=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}([r,a])}}}(this,(function(r){switch(r.label){case 0:return t=function(e){var t=e.url,n=e.data,i=e.method,o=void 0===i?"GET":i,r=e.contentType,a=e.processData,l=void 0===a||a,d=e.dataType,u=e.isFormDataPayload,h=e.isFilePayload,p=e.shouldSnakeize,_=void 0===p||p,f=e.xhrFields,g=e.crossDomain,m=e.headers,v=e.xhr,y=e.beforeSend,b=_?c()(n):n,w=h?new FormData:null;return w&&s().each(b,(function(e,t){"files"===t?s().each(e,(function(e,t){w.append(t,e)})):w.append(t,e)})),u?{url:t,data:h?w:b,contentType:r,processData:l,dataType:d,xhrFields:f,crossDomain:g,xhr:v,beforeSend:y,headers:m,method:o}:{url:t,contentType:r||"application/json",data:"GET"===o?b:JSON.stringify(b),processData:l,dataType:d,xhrFields:f,crossDomain:g,xhr:v,beforeSend:y,headers:m,method:o}}((a=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},i=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(i=i.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),i.forEach((function(t){h(e,t,n[t])}))}return e}({},e),l=null!=(l={shouldCamelizeResponse:void 0})?l:{},Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(l)):function(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);n.push.apply(n,i)}return n}(Object(l)).forEach((function(e){Object.defineProperty(a,e,Object.getOwnPropertyDescriptor(l,e))})),a)),[4,o().ajaxPromisify(t)];case 1:return n=r.sent(),[2,void 0===(i=e.shouldCamelizeResponse)||i?d()(n):n]}var a,l}))},function(){var e=this,n=arguments;return new Promise((function(i,o){var r=t.apply(e,n);function s(e){u(r,i,o,s,a,"next",e)}function a(e){u(r,i,o,s,a,"throw",e)}s(void 0)}))})();var t}}}}]);var _global="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};_global.SENTRY_RELEASE={id:"build_2025_11_28_17_08_33"},function(){try{var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},t=(new Error).stack;t&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[t]="dda45184-c026-4806-8047-592e0831841a",e._sentryDebugIdIdentifier="sentry-dbid-dda45184-c026-4806-8047-592e0831841a")}catch(e){}}();
//# sourceMappingURL=29937.00a436b2503d97b46627.js.map