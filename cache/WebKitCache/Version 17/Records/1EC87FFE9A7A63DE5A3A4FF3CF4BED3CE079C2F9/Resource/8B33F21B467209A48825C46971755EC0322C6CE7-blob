mw.loader.impl(function(){return["ext.gadget.collapserefs@kyph1",function($,jQuery,require,module){mw.loader.using(['mediawiki.storage','mediawiki.util'],function(){if(!mw.config.get('wgIsArticle')||['edit','submit'].indexOf(mw.config.get('wgAction'))>-1||mw.util.getParamValue('printable')==='yes'||$('.collapsible-heading').length>0){return;}var storageKey='gadget-collapserefs';var showCompact='↑ Показать компактно';var showFull='↓ Показать полностью';mw.hook('wikipage.content').add(function($content){var collapseState=mw.storage.get(storageKey)==='min'?'min':'max';var foundReflist;function findClassHolders($reflists){var $classHolders=$();$reflists.each(function(){$classHolders=$classHolders.add($(this).children('.mw-references-wrap').get(0)||this);});return $classHolders;}function changeState(e){var $collapseRefsLinks=$content.find('.collapseRefs-link'),$classHolders=findClassHolders($collapseRefsLinks.parent().next());e.preventDefault();collapseState=collapseState==='max'?'min':'max';if(collapseState==='max'){$collapseRefsLinks.text(showCompact);
$classHolders.removeClass('reflist-compact');}else{$collapseRefsLinks.text(showFull);$classHolders.addClass('reflist-compact');}mw.storage.set(storageKey,collapseState);}$content.find('.reflist, .references-small').each(function(i,el){var computedStyle=el&&window.getComputedStyle(el);if(el.clientHeight<=((el.style.maxHeight&&el.style.maxHeight.replace('px',''))||el.style.height.replace('px','')||(computedStyle&&computedStyle.fontSize&&computedStyle.fontSize.replace('px','')*40))||el.clientHeight>el.parentNode.clientHeight){return;}foundReflist=true;if(collapseState==='min'){findClassHolders($(el)).addClass('reflist-compact');}$('<div>').addClass('collapseRefs'+($(el).hasClass('not-references')?' collapseRefs-notRefs':'')).append($('<a>').addClass('collapseRefs-link').attr('href','javascript:').attr('title','Большие блоки с примечаниями можно уменьшить').text(collapseState==='max'?showCompact:showFull).click(changeState)).insertBefore(el);});if(!foundReflist){
return;}});});
},{"css":[".collapseRefs{line-height:1;margin:0.3em 0}.collapseRefs-link{font-size:85%}.reflist-compact{ max-height:40em;overflow:auto;margin-top:0.3em; transform:translateZ(0)}.reflist-compact dl,.reflist-compact ul,.reflist-compact ol{margin-top:0}"]}];});
mw.loader.impl(function(){return["ext.gadget.directLinkToCommons@kjc67",function($,jQuery,require,module){mw.hook('wikipage.content').add(function($content){var fileSelector='a.image, a.mw-file-description, a.mw-tmh-play, a.mw-file-magnify';if(mw.config.get('skin')==='minerva'){fileSelector='.noviewer '+fileSelector.split(', ').join(', .noviewer ');}if(mw.config.get('wgNamespaceNumber',0)<0){return;}mw.loader.using('mediawiki.util').done(function(){var uploadBaseRe=/^(https:)?\/\/upload\.wikimedia\.org\/wikipedia\/commons/,localFileNSString=mw.config.get('wgFormattedNamespaces')['6']+':',server='(https:)?'+mw.util.escapeRegExp(mw.config.get('wgServer')),localBasePath=new RegExp('^(?:'+server+')?'+mw.util.escapeRegExp(mw.util.getUrl(localFileNSString)),),localBaseScript=new RegExp('^(?:'+server+')?'+mw.util.escapeRegExp(mw.util.wikiScript()+'?title='+mw.util.wikiUrlencode(localFileNSString),)),commonsBasePath='https://commons.wikimedia.org/wiki/File:',commonsBaseScript='https://commons.wikimedia.org/w/index.php?title=File:';$content.find(fileSelector).attr('href',function(i,currVal){if(!currVal)return;
var src=$(this).find('img').attr('src');if(!src)return;if(uploadBaseRe.test(src)){var url=currVal.replace(localBasePath,commonsBasePath).replace(localBaseScript,commonsBaseScript);if(!mw.config.get('wgUserId')){url+=(/\?/.test(url)?'&':'?')+'uselang=ru';}return url;}});});});
}];});
mw.loader.impl(function(){return["ext.gadget.edittop@17odq",function($,jQuery,require,module){runAsEarlyAsPossible(function addEditTopLinks(){if(!mw.config.get('wgArticleId')||mw.config.get('wgAction')!=='view'){return;}var direction=document.documentElement.dir;var $sectionLink=$('#mw-content-text').find('.mw-heading2 .mw-editsection, h2 .mw-editsection').first().clone().addClass(`gadget-edittop-editsection mw-content-${direction} ve-hide`).attr('dir',direction);if(mw.config.get('skin')==='vector-2022'){$sectionLink.prependTo('.mw-indicators');}else{$sectionLink.prependTo('#bodyContent');}var $links=$sectionLink.find('a');var hrefStart=mw.config.get('wgScript')+'?title='+mw.util.wikiUrlencode(mw.config.get('wgPageName'));$links.each(function(){var $link=$(this);if(typeof zeroSectionTip!=='undefined'){$link.attr('title',zeroSectionTip);}var href=hrefStart+($link.hasClass('mw-editsection-visualeditor')?'&veaction=edit&section=0':'&action=edit&section=0&summary=/*%20Преамбула%20*/%20');$link.attr('href',href);});},$('#mw-content-text').find('.mw-heading2, h2').next());
},{"css":[".gadget-edittop-editsection{clear:right;float:right;line-height:inherit;margin-top:-0.25em;position:relative;z-index:2}body.skin-vector-2022 .gadget-edittop-editsection{clear:none;float:none;margin:0} .gadget-edittop-editsection .mw-editsection-visualeditor,.gadget-edittop-editsection .mw-editsection-visualeditor + .mw-editsection-divider{display:none}"]}];});
mw.loader.impl(function(){return["ext.gadget.logo@7q1hp",null,{"css":[]}];});
mw.loader.impl(function(){return["ext.gadget.navboxDefaultGadgets@35w68",function($,jQuery,require,module){$(function(){if($('.navbox').length){mw.loader.load(['ext.gadget.navboxNavigation']);if(mw.config.get('wgUserName')!==null){mw.loader.load(['ext.gadget.navboxFeaturedArticles']);}}});
}];});
mw.loader.impl(function(){return["ext.gadget.referenceTooltips@1jv8u",function($,jQuery,require,module){window.rt_COMMENTED_TEXT_CLASS='ts-comment-commentedText';window.rt_COMMENTED_TEXT_SELECTOR=`.ts-comment-commentedText, abbr[title], .userflags-wrapper`;mw.messages.set({'rt-settings':'Настройки всплывающих примечаний','rt-enable-footer':'Включить всплывающие примечания','rt-settings-title':'Всплывающие примечания','rt-save':'Сохранить','rt-cancel':'Отмена','rt-enable':'Включить','rt-disable':'Отключить','rt-activationMethod':'Подсказка появляется при','rt-hovering':'наведении','rt-clicking':'клике','rt-delay':'Задержка перед появлением подсказки (в миллисекундах)','rt-tooltipsForComments':'Показывать всплывающие подсказки над <span title="Пример всплывающей подсказки" class="'+(rt_COMMENTED_TEXT_CLASS||'rt-commentedText')+'" style="border-bottom: 1px dotted; cursor: help;">подчёркнутым точками текстом</span> в стиле всплывающих примечаний (позволяет видеть такие подсказки на устройствах, где не поддерживается мышь)',
'rt-disabledNote':'Вы можете включить всплывающие примечания обратно, используя ссылку внизу страницы.','rt-done':'Готово','rt-enabled':'Всплывающие подсказки с примечаниями включены'});mw.loader.load('https://en.wikipedia.org/w/load.php?modules=ext.gadget.ReferenceTooltips&only=scripts');mw.loader.load('https://en.wikipedia.org/w/load.php?modules=ext.gadget.ReferenceTooltips&only=styles','text/css');
}];});
mw.loader.impl(function(){return["ext.gadget.wikibugs@ugf3t",function($,jQuery,require,module){mw.loader.using('mediawiki.util',()=>{mw.messages.set('bug_in_article','Сообщить об ошибке');window.wb$bugsPage='Википедия:Сообщения об ошибках';var wb$ignoredPageIds=[275424,639373,932117,919912,1297302,1534053,];if(wb$ignoredPageIds.includes(mw.config.get('wgArticleId'))){return;}function loadOnClick(e){if(e.ctrlKey||e.metaKey){return true;}e.preventDefault();if(typeof window.wb$runWikibug==='undefined'){mw.loader.using('ext.gadget.wikibugs-core').done(()=>{var interval=setInterval(()=>{if(typeof window.wb$runWikibug!=='undefined'){window.wb$runWikibug();clearInterval(interval);}},500);}).catch(()=>{window.location=mw.util.getUrl(wb$bugsPage);});}else{window.wb$runWikibug();}}function clickOnKeydown(e){if(['Space','Enter'].includes(e.code)){e.preventDefault();this.click();}}function setupButton(link){if(!link)return;link.setAttribute('role','button');link.addEventListener('click',loadOnClick);link.addEventListener('keydown',clickOnKeydown);}
$(()=>{var link=document.querySelector('#n-bug_in_article a');setupButton(link);if(mw.config.get('wgArticleId')!==0&&(!link||mw.config.get('skin')==='vector-2022')){var id='n-bug_in_article';var href=mw.util.getUrl(wb$bugsPage);var textContent=mw.msg('bug_in_article');var isTalkPage=mw.config.get('wgCanonicalNamespace').toLowerCase().includes('talk');link=mw.util.addPortletLink('p-tb',href,textContent,id);if(link){link=link.querySelector('a');}else if(!link&&mw.config.get('wgAction')==='view'&&!isTalkPage){link=document.createElement('a');link.textContent=textContent;link.href=href;var content=document.getElementById('mw-content-text');if(content){content.appendChild(link);}}setupButton(link);}});});
}];});
