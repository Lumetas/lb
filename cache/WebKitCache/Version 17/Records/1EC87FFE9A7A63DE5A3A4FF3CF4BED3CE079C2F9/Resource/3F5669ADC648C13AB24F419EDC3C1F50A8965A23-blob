"use strict";(window.webpackChunk=window.webpackChunk||[]).push([[7390],{585855:(e,t,a)=>{a.r(t),a.d(t,{default:()=>c});var n=a(629133),s=a.n(n),r=a(313981),i=a(304483);const c=r.default.extend({className:"modal-options",_classes:function(){for(var e=arguments.length,t=new Array(e),a=0;a<e;a++)t[a]=arguments[a];r.default.prototype._classes.apply(this,t)},_selectors:function(){return{close_icon:".icon-modal-close"}},events:function(){var e=s().result(r.default.prototype,"events",{});return e["click ".concat(this._selector("close_icon"))]="close",e},initialize:function(e){this.options=e||{},this.onDestroy=s().isFunction(this.options.onDestroy)?this.options.onDestroy:s().noop,this.send=!1,r.default.prototype.initialize.apply(this),this.modal=new i.default({class_name:"modal-list modal-hidden-options ".concat(this.options.class_name),init:s().bind((function(e){e.addClass("custom-scroll"),this.setElement(e)}),this),destroy:s().bind((function(){return this.destroy(),!0}),this)}),this.modal.listenTo(this.options.search_context,"OptionsModal:close",this.modal.destroy),this.render()},destroy:function(){for(var e=arguments.length,t=new Array(e),a=0;a<e;a++)t[a]=arguments[a];this.options.search_context.delete_in_modal=!1,this.options.search_context.need_width_count=!1,this.onDestroy.call(this.options.search_context),r.default.prototype.destroy.apply(this,t)},close:function(){this.modal.destroy()},render:function(){this.$el.trigger("modal:loaded"),this.options.elements.removeClass("hidden"),this.options.elements.appendTo(this.$el)}});var l="../build/transpiled/interface/search/partials/options_modal";window.define(l,(function(){var e="undefined",a=typeof t===e?typeof __WEBPACK_AMD_DEFINE_RESULT__===e?typeof module===e?void 0:module.exports:__WEBPACK_AMD_DEFINE_RESULT__:t;return a&&a.default||a})),window.require([l])},878928:(e,t,a)=>{a.r(t),a.d(t,{default:()=>A});var n=a(629133),s=a.n(n),r=a(161320),i=a.n(r),c=a(445368),l=a(214558),o=a(500034),u=a(661533),f={"-1":{id:"-1",name:(0,c.i18n)("No active leads linked")},"-2":{id:"-2",name:(0,c.i18n)("No leads linked")}};function d(e,t){var a=[s().escape(e)];return t&&(a=a.concat([": ",s().escape(t)])),a.join("")}function v(e,t,a,n,r){var i;switch(APP.getBaseEntity()){case"customers":i=this.statuses;break;case"contacts":i=f;break;default:i=s().isUndefined(this.statuses[APP.constant("main_pipeline")])?this.statuses:this.statuses[APP.constant("main_pipeline")].statuses}s().isArray(n.value)&&n.value.length>1?n.value.length===s().keys(i).length?t[a]={key:e,value:d("".concat((0,c.i18n)("All")," ").concat((0,c.i18n)("Statuses").toLowerCase()))}:t[a]={key:e,value:d((0,c.i18n)("Statuses"),r.get(e).length)}:s().find(i,(function(s){if(n.value==s.id)return t[a]={key:e,value:d((0,c.i18n)("Status"),s.option||s.name)}}))}function _(e,t,a,n){s().isArray(n.value)?s().each(n.value,(function(n,r){s().find(this.loss_reasons,(function(s){if(n==s.id){if(0===r)return t[a]={key:e,value:d((0,c.i18n)("Reason for close-lost leads"),s.option)};t[a].value+=", ".concat(s.option)}}))}),this):s().find(this.loss_reasons,(function(s){if(n.value==s.id)return t[a]={key:e,value:d((0,c.i18n)("Reason for close-lost leads"),s.option)}}))}function p(e,t,a,n,r){var i;s().isArray(n.value)&&n.value.length>1?t[a]={key:e,value:d((0,c.i18n)("tags_manage_caption"),r.get(e).length)}:(i=this.filter.tags_lib._list.get(n.value),t[a]={key:e,value:d((0,c.i18n)("tags_manage_caption"),null==i?void 0:i.get("name"))})}function y(e,t,a,n,r){s().isArray(n.value)&&n.value.length>1?t[a]={key:e,value:d((0,c.i18n)("Segments"),r.get(e).length)}:t[a]={key:e,value:d((0,c.i18n)("Segments"),this.filter.suggest_segment.getNameSelected(n.value))}}function m(e){var t=parseInt(e&&e.replace("previous_days_",""));if(t>0)return(0,c.numeralWord)(t,(0,c.i18n)("Last %s days (numeral)")).replace("%s",t);switch(e){case"current_day":case"today":return(0,c.i18n)("Today (filter)");case"yesterday":return(0,c.i18n)("Yesterday (filter)");case"current_week":case"week":return(0,c.i18n)("Current week (filter)");case"previous_week":return(0,c.i18n)("Last week (filter)");case"current_month":case"month":return(0,c.i18n)("Current month (filter)");case"previous_month":return(0,c.i18n)("Last month (filter)");case"current_quarter":case"quarter":return(0,c.i18n)("Current quarter (filter)");case"current_year":return(0,c.i18n)("Current year (filter)");default:return""}}function k(e,t,a,n,r){var i,l=Number(e.replace(/\D+/g,"")),o=s().keys(this.statuses),u="filter[pipe][".concat(APP.constant("main_pipeline"),"][]"),v=o.length,_=0,p=[],y=!1,m=!0;if(s().each(o,(function(e){s().isUndefined(r.get("filter[pipe][".concat(Number(e.replace(/\D+/g,"")),"][]")))&&(y=!0),""===r.get("filter[pipe][".concat(Number(e.replace(/\D+/g,"")),"][]"))&&(v-=1)}),this),i=y?this.$el.find(".filter__custom_settings__item_statuses").find(".checkboxes_dropdown__list__wrapper__inner").find("input:checkbox"):this.$el.find(".filter__custom_settings__item_statuses").find("input:checkbox"),s().each(i,(function(e){var t=e.name;switch(!0){case/filter\[pipe\]\[[\d+]/g.test(t):e.checked?_+=1:m=!1;break;case/filter\[pipe\]\[-(1|2)]/g.test(t):e.checked&&p.push(f[/filter\[pipe\]\[(-1|-2)]/.exec(t)[1]].name)}})),y)if(s().isArray(r.get(e)))t[a]=m?{key:e,value:d("".concat((0,c.i18n)("All")," ").concat((0,c.i18n)("Stages").toLowerCase()))}:{key:e,value:d((0,c.i18n)("Stages"),r.get(e).length)};else{if(!this.statuses["id_".concat(l)])return{key:"",value:""};s().find(this.statuses["id_".concat(l)].statuses,(function(s){if(n.value==s.id)return t[a]={key:e,value:d((0,c.i18n)("Stage"),s.name)}}),this)}else t[a]=m?{key:u,value:d("".concat((0,c.i18n)("All Pipelines"),", ").concat((0,c.i18n)("All")," ").concat((0,c.i18n)("Stages").toLowerCase()))}:{key:u,value:d((0,c.capitalize)(s().compact([p.length?p.join(", "):"",v?"".concat(v," ").concat((0,c.numeralWord)(v,(0,c.i18n)("pipeline,pipelines"))):"",_?"".concat(_," ").concat((0,c.numeralWord)(_,(0,c.i18n)("stage,stages"))):""]).join(", ").toLowerCase()))}}function g(e,t,a,n,r){var i,l,o;switch(n){case"object":l=s().isString(r.value)||s().isArray(r.value)&&1===r.value.length?(0,c.getEntityLang)(r.value):this.filter.params[n].title,i=s().isString(r.value)||s().isArray(r.value)&&1===r.value.length?"":":&nbsp;".concat(r.value.length);break;case"xevents":s().isArray(r.value)&&1===r.value.length&&(r.value=r.value[0]),s().isArray(r.value)||"24"!==r.value.split(":")[0]||function(e,t,a){a.value&&(e[e.length]={key:"filter[cf][]",value:APP.constant("account").cf[a.value]?"".concat((0,c.i18n)("Field"),":&nbsp;").concat(APP.constant("account").cf[a.value].NAME):(0,c.i18n)("Field is not selected")})}(t,0,{value:r.value.split(":")[1]}),o=APP.data.current_view.params?APP.data.current_view.params.filter.events.items:this.filter.params[n].items,l=this.filter.params[n].title,i=s().isString(r.value)?":&nbsp;".concat(s().find(o,(function(e){return e.id==r.value.split(":")[0]&&!e.cf_id})).option):r.value?":&nbsp;".concat(r.value.length):"";break;case"value_after":case"value_before":l=this.filter.params[n].title,i=s().isString(r.value)||s().isArray(r.value)&&1===r.value.length?"":r.value?":&nbsp;".concat(r.value.length):""}t[a]={key:e,value:l+i}}function h(e,t,a,n){var r=e;n.value&&(s().isArray(n.value)&&(r+=": ".concat(n.value.length)),t[a]={key:n.key,value:r})}function b(e,t,a,n){var r=e;n.value&&(s().isArray(n.value)&&(r+=": ".concat(n.value.length)),t[a]={key:n.key,value:r})}a(368439);const A={prepareDefaultOptions:function(e){var t=this.filter.form.model;s().each(e,(function(a,n){var r=a.key;switch(e[n]={key:r,value:(0,c.getEscapedEntity)(a.value)},r){case"filter[name]":case"filter[extensions][]":case"filter[company][name]":case"filter[main_contact][name]":case"filter[entity_name][]":case"filter[members][]":case"filter[thread_name][]":!function(e,t,a,n){var r,i=APP.getBaseEntity();switch(e){case"filter[name]":switch(i){case"leads":t[a]={key:e,value:d((0,c.i18n)("Lead name"),n.value)};break;case"customers":t[a]={key:e,value:d((0,c.i18n)("Customer name"),n.value)};break;default:t[a]={key:e,value:d((0,c.i18n)("Name"),n.value)}}break;case"filter[company][name]":t[a]={key:e,value:d("".concat((0,c.i18n)("notes_filter_companies"),": ").concat((0,c.i18n)("Name")),n.value)};break;case"filter[entity_name][]":t[a]={key:e,value:d((0,c.i18n)("Lead name"),n.value)};break;case"filter[members][]":t[a]={key:e,value:d((0,c.i18n)("From who"),n.value)};break;case"filter[thread_name][]":t[a]={key:e,value:d((0,c.i18n)("Subject"),n.value)};break;case"filter[extensions][]":t[a]={key:e,value:d((0,c.i18n)("Type"),(r=n.value,s().isArray(r)?s().map(r,(function(e){return"No type"===e?(0,c.i18n)("No type"):e})):"No type"===r?(0,c.i18n)("No type"):r))};break;default:t[a]={key:e,value:d("".concat((0,c.i18n)("Contacts"),": ").concat((0,c.i18n)("Name")),n.value)}}}(r,e,n,a);break;case"filter[talk_number]":case"talk_number":!function(e,t,a,n){t[a]={key:e,value:d((0,c.i18n)("Chat ID"),n.value)}}(r,e,n,a);break;case"filter[last_message_type][]":!function(e,t,a,n){if(t[a]={key:e,value:d((0,c.i18n)("Last message from"))},s().isArray(n.value))2===n.value.length?t[a].value+=": ".concat((0,c.i18n)("All")," ").concat((0,c.numeralWord)("all",(0,c.i18n)("value,values,values"))):t[a].value+=": ".concat(n.value.length);else switch(n.value){case"1":t[a].value+=": ".concat((0,c.i18n)("Incoming message (filter)"));break;case"2":t[a].value+=": ".concat((0,c.i18n)("Outgoing message (filter)"))}}(r,e,n,a);break;case"filter[talk_read_status][]":!function(e,t,a,n){if(t[a]={key:e,value:d((0,c.i18n)("Talk read status"))},s().isArray(n.value))2===n.value.length?t[a].value+=": ".concat((0,c.i18n)("All")," ").concat((0,c.numeralWord)("all",(0,c.i18n)("value,values,values"))):t[a].value+=": ".concat(n.value.length);else switch(n.value){case"1":t[a].value+=": ".concat((0,c.i18n)("Read message"));break;case"0":t[a].value+=": ".concat((0,c.i18n)("unread"))}}(r,e,n,a);break;case"filter[has_open_talk][]":!function(e,t,a,n){if(t[a]={key:e,value:d((0,c.i18n)("Talks"))},s().isArray(n.value))3===n.value.length?t[a].value+=": ".concat((0,c.i18n)("All")," ").concat((0,c.numeralWord)("all",(0,c.i18n)("value,values,values"))):t[a].value+=": ".concat(n.value.length);else switch(n.value){case"without":t[a].value+=": ".concat((0,c.i18n)("Without talks"));break;case"with_open":t[a].value+=": ".concat((0,c.i18n)("With open talks"));break;case"without_open":t[a].value+=": ".concat((0,c.i18n)("Without open talks"))}}(r,e,n,a);break;case"filter[mailbox][]":!function(e,t,a,n,s){var r=s.findWhere({id:parseInt(n.value)});t[a]={key:e,value:d((0,c.i18n)("Mail inbox"),r.get("email"))}}(r,e,n,a,this.filter.params.mailboxes);break;case"filter[has_attachments]":case"filter[is_unread]":case"filter[from_parser]":case"filter[has_entity]":!function(e,t,a,n){var s,r;switch(e){case"filter[has_attachments]":s=(0,c.i18n)("Attachments");break;case"filter[is_unread]":s=(0,c.i18n)("unread");break;case"filter[from_parser]":s=(0,c.i18n)("auto-processed");break;case"filter[has_entity]":s=(0,c.i18n)("linked to leads")}r="Y"===n.value?(0,c.i18n)("Yes"):(0,c.i18n)("No"),t[a]={key:e,value:d(s,r)}}(r,e,n,a);break;case"filter[tasks][]":case"filter[main_contact][tasks][]":case"filter[company][tasks][]":!function(e,t,a,n){switch(e){case"filter[tasks][]":t[a]={key:e,value:d((0,c.i18n)("Tasks"))};break;case"filter[main_contact][tasks][]":t[a]={key:e,value:d("".concat((0,c.i18n)("Contacts"),": ").concat((0,c.i18n)("Tasks")))};break;default:t[a]={key:e,value:d("".concat((0,c.i18n)("notes_filter_companies"),": ").concat((0,c.i18n)("Tasks")))}}if(s().isArray(n.value))7===n.value.length?t[a].value+=": ".concat((0,c.i18n)("All")," ").concat((0,c.numeralWord)("all",(0,c.i18n)("value,values,values"))):t[a].value+=": ".concat(n.value.length);else switch(n.value){case"today":t[a].value+=": ".concat((0,c.i18n)("Due today"));break;case"tomorrow":t[a].value+=": ".concat((0,c.i18n)("Due tomorrow"));break;case"week":t[a].value+=": ".concat((0,c.i18n)("Due this week"));break;case"month":t[a].value+=": ".concat((0,c.i18n)("Due this month"));break;case"quarter":t[a].value+=": ".concat((0,c.i18n)("Due this quarter"));break;case"no_tasks":t[a].value+=": ".concat((0,c.i18n)("No To-dos assigned"));break;case"failed_tasks":t[a].value+=": ".concat((0,c.i18n)("Overdue"))}}(r,e,n,a);break;case"filter[status_id][]":case"filter[dealstatus][]":v.apply(this,[r,e,n,a,t]);break;case"filter[loss_reason_id][]":_.apply(this,[r,e,n,a]);break;case"filter[size][from]":case"filter[size][to]":case"filter[price][from]":case"filter[price][to]":case"filter[next_price][from]":case"filter[next_price][to]":case"filter[ltv][from]":case"filter[ltv][to]":case"filter[purchases_count][from]":case"filter[purchases_count][to]":case"filter[average_check][from]":case"filter[average_check][to]":case"filter[labor_cost][from]":case"filter[labor_cost][to]":!function(e,t,a,n){var r,i,l,o=e.slice(0,s().lastIndexOf(e,"["));switch(e){case"filter[size][from]":case"filter[size][to]":r=(0,c.i18n)("Size"),i=""===n.get("filter[size][from]")?"0":n.get("filter[size][from]"),l=""===n.get("filter[size][to]")?"":" - ".concat(n.get("filter[size][to]"));break;case"filter[price][from]":case"filter[price][to]":r=(0,c.i18n)("Sale"),i=""===n.get("filter[price][from]")?"0":n.get("filter[price][from]"),l=""===n.get("filter[price][to]")?"":" - ".concat(n.get("filter[price][to]"));break;case"filter[next_price][from]":case"filter[next_price][to]":r=(0,c.i18n)("Expected amount"),i=""===n.get("filter[next_price][from]")?"0":n.get("filter[next_price][from]"),l=""===n.get("filter[next_price][to]")?"":" - ".concat(n.get("filter[next_price][to]"));break;case"filter[ltv][from]":case"filter[ltv][to]":r=(0,c.i18n)("Total sales value"),i=""===n.get("filter[ltv][from]")?"0":n.get("filter[ltv][from]"),l=""===n.get("filter[ltv][to]")?"":" - ".concat(n.get("filter[ltv][to]"));break;case"filter[purchases_count][from]":case"filter[purchases_count][to]":r=(0,c.i18n)("Purchases count"),i=""===n.get("filter[purchases_count][from]")?"0":n.get("filter[purchases_count][from]"),l=""===n.get("filter[purchases_count][to]")?"":" - ".concat(n.get("filter[purchases_count][to]"));break;case"filter[average_check][from]":case"filter[average_check][to]":r=(0,c.i18n)("Average check"),i=""===n.get("filter[average_check][from]")?"0":n.get("filter[average_check][from]"),l=""===n.get("filter[average_check][to]")?"":" - ".concat(n.get("filter[average_check][to]"));break;case"filter[labor_cost][from]":case"filter[labor_cost][to]":r=(0,c.i18n)("Labor costs (column)"),i=""===n.get("filter[labor_cost][from]")?"0":n.get("filter[labor_cost][from]"),l=""===n.get("filter[labor_cost][to]")?"":" - ".concat(n.get("filter[labor_cost][to]"))}t[a]={key:o,value:d(r,i+l)}}(r,e,n,t);break;case"filter[status][]":!function(e,t,a,n){var r=(0,c.i18n)("Stage");s().isArray(n.value)?2===n.value.length?t[a]={key:e,value:d("".concat((0,c.i18n)("All")," ").concat((0,c.numeralWord)("all",(0,c.i18n)("stage,stages"))))}:s().each(n.value,(function(e,n){0===n?t[a]="uncompl"===e?{key:e,value:d(r,(0,c.i18n)("Expired"))}:{key:e,value:d(r,(0,c.i18n)("Completed"))}:t[a].value+=", ".concat("uncompl"===e?(0,c.i18n)("Expired"):(0,c.i18n)("Completed"))})):"uncompl"===n.value?t[a]={key:e,value:d(r,(0,c.i18n)("Expired"))}:t[a]={key:e,value:d(r,(0,c.i18n)("Completed"))}}(r,e,n,a);break;case"filter[task_type][]":!function(e,t,a,n){var r=APP.constant("task_types"),i=[],l="";switch(n.value=s().isArray(n.value)?n.value:[n.value],(i=s().map(n.value,(function(e){if(e=parseInt(e),s().contains([1,2],e))return APP.todo_types[e];var t=s().find(r,(function(t){return parseInt(t.id)===e}));return t?t.option:e}))).length){case 0:break;case 1:l=i[0];break;default:l=[i[0],"".concat((0,c.i18n)("required_numeral_more")," ").concat(i.length-1)].join(", ")}t[a]={key:e,value:d((0,c.i18n)("Type"),l)}}(r,e,n,a);break;case"segments":case"filter[segments][]":y.apply(this,[r,e,n,a,t]);break;case"tag[]":p.apply(this,[r,e,n,a,t]);break;case"updated_at_from":!function(e,t,a,n){var r="closed"===(n.get("filter[date][type]")||n.get("date[type]"))?(0,c.i18n)("Closed"):(0,c.i18n)("Created");if(a.value){switch(!0){case!s().isEmpty(n.get("updated_at_from"))&&!s().isEmpty(n.get("updated_at_to")):r+=": ".concat(n.get("updated_at_from")," - ").concat(n.get("updated_at_to"));break;case!s().isEmpty(n.get("updated_at_from")):r+=": ".concat(n.get("updated_at_from"));break;case!s().isEmpty(n.get("updated_at_to")):r+=": ".concat(n.get("updated_at_to"))}e[t]={key:a.key,value:r}}}(e,n,a,t);break;case"filter_date_from":case"filter[date][type]":case"date[type]":case"date[from]":case"filter[date][from]":case"filter[date][date_preset]":case"filter[date_preset]":case"date_preset":case"filter[main_contact][date_preset]":case"filter[company][date_preset]":case"filter[active_talks][date_preset]":case"filter[company][date][from]":case"filter[main_contact][date][from]":case"filter[active_talks][from]":!function(e,t,a,n,r){var l,o,u;switch(u=s().contains(["filter_date_from","filter[date_preset]","filter[date][date_preset]","date_preset","filter[date][type]","date[type]","date[from]","filter[main_contact][date][from]","filter[main_contact][date_preset]","filter[company][date][from]","filter[company][date_preset]","filter[next_date][from]","filter[next_date][date_preset]","filter[active_talks][from]","filter[active_talks][date_preset]"],e)?e:e.slice(0,s().lastIndexOf(e,"[")),e){case"date[type]":case"filter[date][type]":l=r.get("filter[date][type]")||r.get("date[type]"),n.value="";break;case"filter_date_from":case"date_preset":case"filter[date_preset]":case"filter[date][date_preset]":l=r.get("filter_date_switch")||r.get("filter[date][type]")||r.get("date[type]"),o=r.get("filter_date_to");break;case"filter[main_contact][date][from]":case"filter[main_contact][date_preset]":l=r.get("filter[main_contact][type]"),o=r.get("filter[main_contact][date][to]");break;case"filter[active_talks][from]":case"filter[active_talks][date_preset]":l="active_talks",o=r.get("filter[active_talks][to]");break;case"filter[company][date][from]":case"filter[company][date_preset]":l=r.get("filter[company][type]"),o=r.get("filter[company][date][to]");break;case"filter[next_date][from]":case"filter[next_date][date_preset]":o=r.get("filter[next_date][to]");break;case"filter[date][from]":case"date[from]":l=r.get("filter[date][type]")||r.get("date[type]"),o=r.get("filter[date][to]")||r.get("date[to]")}s().contains(["filter[date_preset]","filter[date][date_preset]","date_preset","filter[main_contact][date_preset]","filter[company][date_preset]","filter[next_date][date_preset]","filter[active_talks][date_preset]"],e)&&(n.value=m(n.value)),n.value===i()([1,0,1]).format(APP.system.format.date.date)?n.value="".concat((0,c.i18n)("deals to").charAt(0).toUpperCase()+(0,c.i18n)("deals to").substr(1)," ").concat(o):n.value+=s().isUndefined(o)||""===o?"":" - ".concat(o),s().isUndefined(l)&&(l=r.get("fake"));var f="";"closed"===l?t[a]={key:u,value:d(f+(0,c.i18n)("Closed"),n.value)}:"in-work"===l||"in_work"===l?t[a]={key:u,value:d(f+(0,c.i18n)("In work"),n.value)}:s().contains(["modified","modify","updated_at"],l)?t[a]={key:u,value:d(f+(0,c.i18n)("Modified"),n.value)}:"created"===l||"create"===l?t[a]={key:u,value:d(f+(0,c.i18n)("Created"),n.value)}:"date"===l?t[a]={key:u,value:d(f+(0,c.i18n)("Date within"),n.value)}:t.filter_date_switch?t[a]={key:u,value:d(f+(0,c.i18n)("In work"),n.value)}:t[a]="active_talks"===l?{key:u,value:d(f+(0,c.i18n)("Active talks"),n.value)}:{key:u,value:d(f+(0,c.i18n)("Created"),n.value)}}(r,e,n,a,t);break;case"filter[next_date][date_preset]":case"filter[next_date][from]":case"filter[next_date][to]":!function(e,t,a,n,r){var i=""===r.get("filter[next_date][to]")?"":" - ".concat(r.get("filter[next_date][to]")),l=e.slice(0,s().lastIndexOf(e,"["));t[a]={key:l,value:d((0,c.i18n)("Next purchase"),"filter[next_date][date_preset]"===e?"":n.value+i)}}(r,e,n,a,t);break;case"filter[main_user][]":case"filter[created_by][]":case"filter[updated_by][]":case"filter[modified_by][]":!function(e,t,a,n,r){var i,o,u=APP.getBaseEntity();"filter[main_user][]"===e?i=d((0,c.i18n)("Users")):"filter[created_by][]"===e?"leads"===u||"customers"===u||"contacts"===u?i=d((0,c.i18n)("Created by")):"todo"===u?i=d((0,c.i18n)("Authors")):"files"===u&&(i=d((0,c.i18n)("Created by (masculine)"))):"filter[updated_by][]"===e&&"files"===u?i=d((0,c.i18n)("Updated by (masculine)")):"leads"===u?i=d((0,c.i18n)("Modified by")):"customers"!==u&&"contacts"!==u||(i=d((0,c.i18n)("Modified by"))),s().isArray(n.value)&&n.value.length>1&&r.get(e)?(o=r.get(e).length,t[a]={key:e,value:"".concat(i,": ").concat(o)}):s().isArray(n.value)&&"group"===n.value[0].substr(0,5)||(s().isArray(n.value)?"group"===n.value[0].substr(0,5):"group"===n.value.substr(0,5))?t[a]={key:e,value:"".concat(i,": ").concat((0,l.getGroupName)(n.value))}:(s().isArray(n.value)?-1===parseInt(n.value[0]):-1===parseInt(n.value))?t[a]={key:e,value:"".concat(i,": ").concat((0,c.i18n)("Client (user select)"))}:t[a]={key:e,value:"".concat(i,": ").concat((0,l.getUserName)(n.value))}}(r,e,n,a,t);break;case"filter[unsorted_category][]":!function(e,t,a,n){var r=APP.constant("unsorted_categories");s().isArray(n.value)?n.value.length===s().keys(r).length?t[a]={key:e,value:d((0,c.i18n)("Unsorted category"),"".concat((0,c.i18n)("All")," ").concat((0,c.numeralWord)("all",(0,c.i18n)("value,values,values"))))}:t[a]={key:e,value:d((0,c.i18n)("Unsorted category"),n.value.length)}:t[a]={key:e,value:d((0,c.i18n)("Unsorted category"),(0,c.i18n)("unsorted_category_".concat(r[n.value])))}}(r,e,n,a);break;case"filter[lead_source][]":!function(e,t,a,n){var r=APP.constant("lead_sources");s().isArray(n.value)&&r?n.value.length===s().keys(r).length?t[a]={key:e,value:d((0,c.i18n)("Source of lead"),"".concat((0,c.i18n)("All")," ").concat((0,c.numeralWord)("all",(0,c.i18n)("value,values,values"))))}:t[a]={key:e,value:d((0,c.i18n)("Source of lead"),n.value.length)}:t[a]={key:e,value:d((0,c.i18n)("Source of lead"),r[n.value].option?r[n.value].option:"")}}(r,e,n,a);break;case"filter[source_id]":!function(e,t,a,n){var s="";APP.constant("sources")&&APP.constant("sources")[n.value]&&APP.constant("sources")[n.value].option&&(s=APP.constant("sources")[n.value].option),t[a]={key:e,value:d((0,c.i18n)("Source"),s)}}(r,e,n,a);break;case"filter[products][]":!function(e,t,a,n){var r=s().isArray(n.value)?n.value.length:n.value.length>0?1:0;t[a]={key:e,value:"".concat((0,c.i18n)("Products"),": ").concat(r)}}(r,e,n,a);break;case"filter[event_type][]":g.apply(this,[r,e,n,"xevents",a]);break;case"filter[entity][]":g.apply(this,[r,e,n,"object",a]);break;case"filter[value_after]":case"filter[value_after][]":case"filter[value_after][status_lead][]":case"filter[value_after][helpbot][]":case"filter[value_after][cf][values][]":case"filter[value_after][responsible][]":case"filter[value_after][status_customer][]":case"filter[value_after][segments_ids][]":g.apply(this,[r,e,n,"value_after",a]);break;case"filter[value_before]":case"filter[value_before][]":case"filter[value_before][status_lead][]":case"filter[value_before][helpbot][]":case"filter[value_before][cf][values][]":case"filter[value_before][responsible][]":case"filter[value_before][status_customer][]":case"filter[value_before][segments_ids][]":g.apply(this,[r,e,n,"value_before",a]);break;case"role_id":case"role_id[]":!function(e,t,a){var n;if(a.value){s().isArray(a.value)&&1===a.value.length&&(a.value=a.value[0]);var r=s().find(APP.data.current_view.params.existed_data.roles,(function(e){return e.id.toString()===a.value}));r||"admin"!==a.value?r&&(n=r.name):n=(0,c.i18n)("Administrator"),e[t]={key:a.key,value:s().isArray(a.value)?"".concat((0,c.numeralWord)(a.value.length,(0,c.i18n)("role,roles,roles")),":&nbsp;").concat(a.value.length):"".concat((0,c.numeralWord)(1,(0,c.i18n)("role,roles,roles")),":&nbsp;").concat(n)}}}(e,n,a);break;case"group_id":case"group_id[]":!function(e,t,a){var n;a.value&&(s().isArray(a.value)&&1===a.value.length&&(a.value=a.value[0]),"free"===a.value?n=APP.lang["Free users"]:APP.data.current_view.params.existed_data.groups[a.value]&&(n=APP.data.current_view.params.existed_data.groups[a.value].name),e[t]={key:a.key,value:s().isArray(a.value)?"".concat((0,c.numeralWord)(a.value.length,(0,c.i18n)("group,groups,groups")),":&nbsp;").concat(a.value.length):"".concat((0,c.numeralWord)(1,(0,c.i18n)("group,groups,groups")),":&nbsp;").concat(n)})}(e,n,a);break;case"active":case"active[]":!function(e,t,a){a.value&&(s().isArray(a.value)&&1===a.value.length&&(a.value=a.value[0]),e[t]={key:a.key,value:s().isArray(a.value)?"".concat((0,c.i18n)("All")," ").concat((0,c.numeralWord)("all",(0,c.i18n)("user,user,users"))):"Y"===a.value?(0,c.i18n)("Active users"):(0,c.i18n)("Inactive users")})}(e,n,a);break;case"is_mfa_enabled":case"is_mfa_enabled[]":!function(e,t,a){if(a.value){var n;switch(s().isArray(a.value)&&1===a.value.length&&(a.value=s().first(a.value)),!0){case s().isArray(a.value):n=(0,c.i18n)("All verification types");break;case"Y"===a.value:n=(0,c.i18n)("Users with 2-step verification");break;default:n=(0,c.i18n)("Users without 2-step verification")}e[t]={key:a.key,value:n}}}(e,n,a);break;case"label[]":case"is_read[]":!function(e,t,a){a.value&&(e[t]={key:a.key,value:(0,c.i18n)("statuses")})}(e,n,a);break;case"provider[]":h((0,c.i18n)("Sources"),e,n,a);break;case"status[]":b((0,c.i18n)("Conversation status"),e,n,a);break;case"emotion[]":case"emotion":b((0,c.i18n)("Sentiment detected"),e,n,a);break;case"responsible":case"responsible[]":b((0,c.i18n)("Resp. user"),e,n,a);break;case"last_message_author":case"last_message_author[]":b((0,c.i18n)("Last message author"),e,n,a);break;case"subscribed_group":case"subscribed_user":case"subscribed_user[]":case"subscribed_group[]":b((0,o.isFeatureAvailable)("global_inbox")?(0,c.i18n)("Lead subscribers"):(0,c.i18n)("Participants"),e,n,a);break;case"participants_users":case"participants_groups":case"participants_users[]":case"participants_groups[]":b((0,c.i18n)("Participants"),e,n,a);break;case"is_starred[]":e[n]={key:r,value:d((0,c.i18n)("Starred"))};break;case"interaction_status[]":e[n]={key:r,value:d((0,c.i18n)("Interaction status"))};break;case"inbox_chat_source[]":h((0,c.i18n)("Channels"),e,n,a);break;default:!function(e,t,a){-1===t[a].key.indexOf("cf")&&-1===t[a].key.indexOf("custom_fields")&&(t[a]={key:"",value:""})}(0,e,n)}-1!==r.indexOf("filter[pipe]")&&k.apply(this,[r,e,n,a,t])}),this)},prepareCustomOptions:function(e){var t,a,n=u.extend(!0,{},APP.constant("account").predefined_cf,APP.constant("account").cf),r=this.filter.form.model;s().each(e,(function(l,o){var u=l.key;e[o]={key:u,value:(0,c.getEscapedEntity)(l.value)},-1===u.indexOf("cf")&&-1===u.indexOf("custom_fields")||(t=-1!==u.indexOf("company")?"".concat((0,c.i18n)("notes_filter_companies"),": "):-1===u.indexOf("main_contact")?"":"".concat((0,c.i18n)("Contacts"),": "),a=Number(s().propertyOf(u.match(/\[(cf|custom_fields)\]\[(\d+)\]/))(2)),-1!==u.indexOf("address_line")&&(a=String(a).slice(0,String(a).length-1)),s().find(n,(function(n){if(n.ID==a)switch(parseInt(n.TYPE_ID)){case APP.cf_types.select:case APP.cf_types.multiselect:case APP.cf_types.radiobutton:!function(e,t,a,n,r,i){s().isArray(n.value)?(r+=i.NAME,s().each(n.value,(function(n,c){s().find(i.ENUMS,(function(s){parseInt(s.ID)===parseInt(n)&&(0===c?t[a]={key:e,value:"".concat(r,": ").concat(s.VALUE)}:t[a].value+=", ".concat(s.VALUE))}))}))):s().find(i.ENUMS,(function(s){if(parseInt(s.ID)===parseInt(n.value))return t[a]={key:e,value:"".concat(r+i.NAME,": ").concat(s.VALUE)};"empty"===n.value&&(t[a]={key:e,value:"".concat(r+i.NAME,": ").concat((0,c.i18n)("empty"))})}))}(u,e,o,l,t,n);break;case APP.cf_types.date_time:case APP.cf_types.date:case APP.cf_types.birthday:!function(e,t,a,n,r,c){var l=e.slice(0,s().lastIndexOf(e,"[")),o=r.get("".concat(l,"[from]")),u=r.get("".concat(l,"[to]")),f=r.get("".concat(l,"[date_preset]")),d=APP.system.format.date.date,v=APP.system.format.date.date_short,_=m(f);c.TYPE_ID===APP.cf_types.birthday&&(o=i()(o,d).format(v),u=i()(u,d).format(v)),!f&&o&&(_=o+(s().isUndefined(u)||""===u?"":" - ".concat(u))),t[a]={key:l,value:n+c.NAME+(_?": ".concat(_):"")}}(u,e,o,t,r,n);break;case APP.cf_types.monetary:case APP.cf_types.numeric:case APP.cf_types.price:!function(e,t,a,n,r,i){var c=s().isUndefined(i.get(e.replace("[from]","[to]")))||""===i.get(e.replace("[from]","[to]"))?"":" - ".concat(i.get(e.replace("[from]","[to]"))),l=s().isUndefined(i.get(e.replace("[to]","[from]")))||""===i.get(e.replace("[to]","[from]"))?"0":+i.get(e.replace("[to]","[from]")),o=e.slice(0,s().lastIndexOf(e,"["));t[a]={key:o,value:"".concat(n+r.NAME,": ").concat(l).concat(c)}}(u,e,o,t,n,r);break;case APP.cf_types.chained_list:!function(e,t,a,n,r){var i=e.slice(0,s().lastIndexOf(e,"["));t[a]={key:i,value:n+r.NAME}}(u,e,o,t,n);break;case APP.cf_types.linked_entity:!function(e,t,a,n,r){var i=s().isArray(r.value)?r.value.length:r.value.length>0?1:0;t[a]={key:e,value:"".concat(n.NAME,": ").concat(i)}}(u,e,o,n,l);break;case APP.cf_types.checkbox:e[o]={key:u,value:"".concat(t+n.NAME,": ").concat("N"===l.value?(0,c.i18n)("Q_TOOLS_RADIO_NOT_CHECKED"):(0,c.i18n)("Q_TOOLS_RADIO_CHECKED"))};break;case APP.cf_types.smart_address:!function(e,t,a,n,r,i){var c=e.slice(0,s().lastIndexOf(e,"[")),l=0;t[a]={key:c,value:n+r.NAME},s().each(r.sub_types,(function(e){i.get("".concat(c,"[").concat(e,"]"))&&(0===l?(l+=1,t[a].value+=": ".concat("country"===e?r.VARIANTS.country[i.get("".concat(c,"[").concat(e,"]"))]:i.get("".concat(c,"[").concat(e,"]")))):t[a].value+=", ".concat("country"===e?r.VARIANTS.country[i.get("".concat(c,"[").concat(e,"]"))]:i.get("".concat(c,"[").concat(e,"]"))))}),this)}(u,e,o,t,n,r);break;case APP.cf_types.text:case APP.cf_types.url:case APP.cf_types.multitext:case APP.cf_types.textarea:case APP.cf_types.streetaddress:case APP.cf_types.gua:case APP.cf_types.tracking_data:!function(e,t,a,n,s,r){t[a]={key:e,value:"".concat(n+s.NAME,": ").concat(r.value)}}(u,e,o,t,n,l)}})))}),this)}};var P="../build/transpiled/interface/search/partials/prepare_filter_options";window.define(P,(function(){var e="undefined",a=typeof t===e?typeof __WEBPACK_AMD_DEFINE_RESULT__===e?typeof module===e?void 0:module.exports:__WEBPACK_AMD_DEFINE_RESULT__:t;return a&&a.default||a})),window.require([P])}}]);var _global="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};_global.SENTRY_RELEASE={id:"build_2025_11_28_18_50_52"},function(){try{var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},t=(new Error).stack;t&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[t]="1223f3af-4e16-441c-9f1d-8308364a59ea",e._sentryDebugIdIdentifier="sentry-dbid-1223f3af-4e16-441c-9f1d-8308364a59ea")}catch(e){}}();
//# sourceMappingURL=7390.730516c6dfa73edbe64d.js.map