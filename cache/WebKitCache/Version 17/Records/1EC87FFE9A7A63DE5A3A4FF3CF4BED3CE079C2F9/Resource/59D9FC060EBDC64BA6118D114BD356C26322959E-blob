"use strict";(window.webpackChunk=window.webpackChunk||[]).push([[83993],{956332:(e,t,n)=>{n.r(t),n.d(t,{default:()=>f});var a=n(661533),i=n.n(a),r=n(460159),o=n.n(r),s=n(629133),l=n.n(s),c=n(313981),d=n(445368),u=n(955026);function p(e,t,n,a,i,r,o){try{var s=e[r](o),l=s.value}catch(e){return void n(e)}s.done?t(l):Promise.resolve(l).then(a,i)}window.APP=window.APP||{},window.APP.player_prepare={};const f=c.default.extend({ns:".player",template:l().template('<div id="amo-player" class="amo-player-container"><div class="amo-player-container--inner"><div class="amo-player-container--play"><span></span></div><div class="amo-player-container--pause"><span></span><span></span></div><div class="amo-player-container--stop"><span></span></div><div class="amo-player-container--scrubber"><div class="amo-player-container--progress"><div class="amo-player-container--loaded"></div></div></div><div class="amo-player-container--time"><em class="amo-player-container--played">00:00</em>/<strong class="amo-player-container--duration">00:00</strong></div><div class="amo-player-container--movement-speed"></div></div></div>'),movement_speed_items:[{option:"0.5x",id:.5},{option:"1x (".concat((0,d.i18n)("normal speed"),")"),id:1},{option:"1.25x",id:1.25},{option:"1.5x",id:1.5},{option:"2x",id:2}],initialize:function(e){c.default.prototype.initialize.apply(this,arguments),this.options=i().extend({append_to:".custom-scroll",$container:this._$document,input_special_class:"",selector:!1},e),this.default_selector="#amo-player",this.default_width=495,this.bindEvents()},destroy:function(){this._$body.removeAttr("bgsound"),this._removalObserver(!1),this.options.$container.off(this.ns),this.last_audio&&this.last_audio.jPlayer("stop").remove(),this.remove()},prepare:function(){return i().extend({},this.default_prepare,APP.player_prepare)},bindEvents:function(){this.options.$container.on("click".concat(this.ns),".js-call-play",l().bind((function(e){var t,n=i()(e.currentTarget);n.hasClass("amo-player--playing")?this.stop(n):(t=n.attr("data-prepare"),this.stop(),this.show(n),n.removeClass("icon--play").addClass("amo-player--playing"),l().isString(t)&&l().isFunction(this.prepare()[t])?this.prepare()[t].call(this,n):this.play(n)),e.preventDefault(),e.stopPropagation()}),this)).on("change".concat(this.ns),"#amo-player .control--select--input",l().bind((function(e){"1"===i()(e.currentTarget).val()&&this.changeSelectedSpeedCaption(),this.last_audio&&this.last_audio.jPlayer("option","playbackRate",i()(e.currentTarget).val())}),this))},changeSelectedSpeedCaption:function(){i()("#amo-player").find(".control--select--button-inner").text("1x")},_getPlayer:function(e){var t=i()(this.default_selector);return e&&this.options.selector&&(t=e.closest(this.options.selector)),t},_getContainer:function(e){var t=e.closest(this.options.append_to);return t.length||(t=this._$body),t},showError:function(e,t,n,a){var i=this._getPlayer(e);(0,u.hasKeys)(a,["jPlayer","error","type"])&&"e_url"===a.jPlayer.error.type&&(i.data("attempt")>=2?(i.attr("data-error-text",t).addClass("js-ready js-error").find(".spinner-icon").remove(),this.stopTimer=setTimeout(l().bind(this.stop,this,e),1500)):(i.attr("data-attempt",2).addClass("js-ready").append('<span class="modal-overlay__spinner spinner-icon spinner-icon-abs-center" style="z-index: 3"></span>'),this.play(e,!1,0!==n&&n)))},fileHash:function(e){var t,n=0;if(0===e.length)return n;for(t=0;t<e.length;t++)n=(n<<5)-n+e.charCodeAt(t),n&=n;return n},show:function(e){var t,n,a,r,s,c,d,u,p=this._getContainer(e),f="static"===p.css("position")?0:p.scrollTop(),_="static"===p.css("position")?0:p.scrollLeft();this.options.selector||(i()(this.default_selector).remove(),p.append(this.template()),n=o()({ref:"/tmpl/controls/select.twig"}).render({class_name:"amo-player-container--movement-speed-select",name:"movement_speed",id:"movement_speed",selected:1,input_special_class:this.options.input_special_class,items:this.movement_speed_items}),p.find(".amo-player-container--movement-speed").append(n),t=this._getPlayer(),this.changeSelectedSpeedCaption(),this._removalObserver(!0,p),d=p.offset().left,a=e.offset().left-d,r=e.offset().top-p.offset().top,(u=p.width())<(s=t.width())&&(s=u),(c=a+e.width()/2-s/2)<0&&(c=0),c+s>p.width()&&(c=p.width()-s),l().isFunction(this.options.setPositions)&&this.options.setPositions.call(this,e,t),t.css({top:r+e.height()/2-t.height()/2+f,left:c+_,width:s}).one("click",".amo-player-container--stop",l().bind(this.stop,this,void 0)).on("click",".amo-player-container--progress",l().bind((function(e){var t=i()(e.currentTarget),n=t.offset(),a=t.outerWidth(),r=e.pageX-n.left,o=this.last_audio.data().jPlayer.status.duration,s=r*parseInt(o)/a;this.current_time_by_click=s}),this)).on("click",l().bind((function(e){0===i()(e.target).closest(".control--select").length&&e.stopPropagation()}),this)),l().isFunction(this.options.afterSetPositions)&&this.options.afterSetPositions.call(this,e,t),t.addClass("js-loading"))},play:function(e,t,a){return(r=function(){var r,o;return function(e,t){var n,a,i,r,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return r={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function s(r){return function(s){return function(r){if(n)throw new TypeError("Generator is already executing.");for(;o;)try{if(n=1,a&&(i=2&r[0]?a.return:r[0]?a.throw||((i=a.return)&&i.call(a),0):a.next)&&!(i=i.call(a,r[1])).done)return i;switch(a=0,i&&(r=[2&r[0],i.value]),r[0]){case 0:case 1:i=r;break;case 4:return o.label++,{value:r[1],done:!1};case 5:o.label++,a=r[1],r=[0];continue;case 7:r=o.ops.pop(),o.trys.pop();continue;default:if(!((i=(i=o.trys).length>0&&i[i.length-1])||6!==r[0]&&2!==r[0])){o=0;continue}if(3===r[0]&&(!i||r[1]>i[0]&&r[1]<i[3])){o.label=r[1];break}if(6===r[0]&&o.label<i[1]){o.label=i[1],i=r;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(r);break}i[2]&&o.ops.pop(),o.trys.pop();continue}r=t.call(e,o)}catch(e){r=[6,e],a=0}finally{n=i=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}([r,s])}}}(this,(function(s){switch(s.label){case 0:return(t=t||e.attr("href"))?[4,n.e(53081).then(n.t.bind(n,53081,23))]:(this.stop(e),[2]);case 1:return s.sent(),o=this.fileHash(t),i()(document.body).attr("bgsound",t),l().isUndefined(a)||i()("#audio".concat(o)).remove(),i()("#audio".concat(o)).length&&l().isUndefined(a)||(this._$body.append('<div id="audio'.concat(o,'" controls class="amo-player--audio"></div>')),this.last_audio=i()("#audio".concat(o)).jPlayer({cssSelectorAncestor:this.options.selector||this.default_selector,cssSelector:{seekBar:".amo-player-container--progress",playBar:".amo-player-container--loaded",play:".amo-player-container--play",pause:".amo-player-container--pause",currentTime:".amo-player-container--played",duration:".amo-player-container--duration"},solution:"html",supplied:"mp3,wav,oga,m4a",preload:"auto",muted:!1,ended:l().bind(this.stop,this,void 0),error:l().bind((function(t){this.current_time_by_click=this.current_time_by_click||!1,this.showError(e,APP.lang.player_no_file,!1===this.current_time_by_click?t.jPlayer.status.currentTime:this.current_time_by_click,t)}),this),play:l().bind((function(){(r=this._getPlayer(e)).data("attempt","").addClass("js-ready").find(".spinner-icon").remove(),l().isUndefined(a)&&!a||r.removeClass("js-error"),this.current_time_by_click=!1}),this),ready:l().bind((function(n){var o={};o.mp3=t,o.wav=t,i()(n.currentTarget).jPlayer("setMedia",o).jPlayer("play",a||0),(r=this._getPlayer(e)).addClass("js-ready")}),this)})),e.addClass("amo-player--playing icon--stop"),[2]}}))},function(){var e=this,t=arguments;return new Promise((function(n,a){var i=r.apply(e,t);function o(e){p(i,n,a,o,s,"next",e)}function s(e){p(i,n,a,o,s,"throw",e)}o(void 0)}))}).apply(this);var r},stop:function(e){e||(e=i()("a.amo-player--playing")),this._removalObserver(!1),clearTimeout(this.stopTimer),this.last_audio?(this.last_audio.jPlayer("stop").remove(),this.options.selector?e.closest(this.options.selector).find(".amo-player-container--played").text("00:00"):i()(this.default_selector).remove(),this.last_audio=null):i()(this.default_selector).remove(),e.length&&(e.removeClass("amo-player--loading-ajax amo-player--playing icon--stop").addClass("icon--play"),e.hasClass("amo-player--loading-ajax")&&e.addClass("amo-player--dont-play"),l().isFunction(this.options.stop)&&this.options.stop())},_removalObserver:function(e,t){!1!==e?(this._observer=new MutationObserver(l().bind((function(e){l().each(e,(function(e){l().each(e.removedNodes,(function(e){e.parentNode||e!==t.get(0)&&!i().contains(e,t.get(0))||this.stop()}),this)}),this)}),this)),this._observer.observe(document.body,{childList:!0,subtree:!0})):this._observer&&(this._observer.disconnect(),this._observer=null)},default_prepare:{onlinepbx:function(e){e.hasClass("amo-player--loading-ajax")||(e.addClass("amo-player--loading-ajax"),i().ajax({url:e.attr("href"),dataType:"json",success:l().bind((function(t){e.removeClass("amo-player--loading-ajax"),/^http:\/\/(.*)\.(onlinepbx|onpbx)\.ru\/$/.test(t.redirect)?this.showError(e,APP.lang.player_no_file):e.hasClass("amo-player--dont-play")?e.removeClass("amo-player--dont-play"):this.play(e,t.redirect.replace(/^([\s\S]{0,5}):\/\//,"//"))}),this)}))},oktell:function(e){var t;e.hasClass("amo-player--loading-ajax")||void 0===APP.widgets.oktell||(e.addClass("amo-player--loading-ajax"),APP.widgets.oktell.exec("gettemphttppass",{},(function(n){n.result&&n.password?(t="".concat(e.attr("href"),"?temppass=").concat(n.password),this.play(e,t),e.addClass("amo-player--loading-ajax")):(e.removeClass("amo-player--dont-play"),this.showError(e,APP.lang.player_no_file))})))},amo_ringcentral:function(e){var t=e.attr("href"),n=e.closest(".feed-note-wrapper");this.play(e,t),this.last_audio.bind(i().jPlayer.event.play,l().bind((function(){this.last_audio.jPlayer("option","cssSelector",{duration:""}),n.find(".amo-player-container--duration").html(n.find(".feed-note__call-duration").html())}),this))}}});var _="../build/transpiled/components/base/player";window.define(_,(function(){var e="undefined",n=typeof t===e?typeof __WEBPACK_AMD_DEFINE_RESULT__===e?typeof module===e?void 0:module.exports:__WEBPACK_AMD_DEFINE_RESULT__:t;return n&&n.default||n})),window.require([_])},781424:(e,t,n)=>{n.r(t),n.d(t,{default:()=>o});var a=n(629133),i=n.n(a),r=n(93103);const o=r.default.extend({getHighlightedItem:function(e,t){var n,a=i().keys(t.users);return a.length?(n=i().chain(a).sortBy((function(e){return e})).first().value(),i().first(i().values(t.users[n]))):r.default.prototype.getHighlightedItem.apply(this,arguments)}});var s="../build/transpiled/components/filter/users_select";window.define(s,(function(){var e="undefined",n=typeof t===e?typeof __WEBPACK_AMD_DEFINE_RESULT__===e?typeof module===e?void 0:module.exports:__WEBPACK_AMD_DEFINE_RESULT__:t;return n&&n.default||n})),window.require([s])},862227:(e,t,n)=>{n.r(t),n.d(t,{default:()=>o});var a=n(629133),i=n.n(a);function r(e,t,n,a,i,r,o){try{var s=e[r](o),l=s.value}catch(e){return void n(e)}s.done?t(l):Promise.resolve(l).then(a,i)}const o={events:{"click .js-list-export":"onExportClick"},onExportClick:function(e){return(t=function(){return function(e,t){var n,a,i,r,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return r={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function s(r){return function(s){return function(r){if(n)throw new TypeError("Generator is already executing.");for(;o;)try{if(n=1,a&&(i=2&r[0]?a.return:r[0]?a.throw||((i=a.return)&&i.call(a),0):a.next)&&!(i=i.call(a,r[1])).done)return i;switch(a=0,i&&(r=[2&r[0],i.value]),r[0]){case 0:case 1:i=r;break;case 4:return o.label++,{value:r[1],done:!1};case 5:o.label++,a=r[1],r=[0];continue;case 7:r=o.ops.pop(),o.trys.pop();continue;default:if(!((i=(i=o.trys).length>0&&i[i.length-1])||6!==r[0]&&2!==r[0])){o=0;continue}if(3===r[0]&&(!i||r[1]>i[0]&&r[1]<i[3])){o.label=r[1];break}if(6===r[0]&&o.label<i[1]){o.label=i[1],i=r;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(r);break}i[2]&&o.ops.pop(),o.trys.pop();continue}r=t.call(e,o)}catch(e){r=[6,e],a=0}finally{n=i=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}([r,s])}}}(this,(function(t){switch(t.label){case 0:return e.preventDefault(),n.e(24951).then(n.bind(n,724951)),i().contains(["todo"],APP.getBaseEntity())?[4,n.e(22442).then(n.bind(n,822442))]:[3,2];case 1:return new(0,t.sent().default)({id:"export"}),[3,4];case 2:return[4,Promise.all([n.e(95882),n.e(10572),n.e(82966)]).then(n.bind(n,482966))];case 3:new(0,t.sent().default)({}),t.label=4;case 4:return[2]}}))},function(){var e=this,n=arguments;return new Promise((function(a,i){var o=t.apply(e,n);function s(e){r(o,a,i,s,l,"next",e)}function l(e){r(o,a,i,s,l,"throw",e)}s(void 0)}))})();var t}};var s="../build/transpiled/components/lists/actions/export/mixin";window.define(s,(function(){var e="undefined",n=typeof t===e?typeof __WEBPACK_AMD_DEFINE_RESULT__===e?typeof module===e?void 0:module.exports:__WEBPACK_AMD_DEFINE_RESULT__:t;return n&&n.default||n})),window.require([s])},883807:(e,t,n)=>{n.r(t),n.d(t,{default:()=>s});var a=n(661533),i=n.n(a),r=n(859200);function o(e,t,n,a,i,r,o){try{var s=e[r](o),l=s.value}catch(e){return void n(e)}s.done?t(l):Promise.resolve(l).then(a,i)}const s={events:{"click .js-list-import":"onImportClick","click .js-list-import-clientbank-exchange":"onImportClick"},onImportClick:function(e){return(t=function(){var t;return function(e,t){var n,a,i,r,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return r={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function s(r){return function(s){return function(r){if(n)throw new TypeError("Generator is already executing.");for(;o;)try{if(n=1,a&&(i=2&r[0]?a.return:r[0]?a.throw||((i=a.return)&&i.call(a),0):a.next)&&!(i=i.call(a,r[1])).done)return i;switch(a=0,i&&(r=[2&r[0],i.value]),r[0]){case 0:case 1:i=r;break;case 4:return o.label++,{value:r[1],done:!1};case 5:o.label++,a=r[1],r=[0];continue;case 7:r=o.ops.pop(),o.trys.pop();continue;default:if(!((i=(i=o.trys).length>0&&i[i.length-1])||6!==r[0]&&2!==r[0])){o=0;continue}if(3===r[0]&&(!i||r[1]>i[0]&&r[1]<i[3])){o.label=r[1];break}if(6===r[0]&&o.label<i[1]){o.label=i[1],i=r;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(r);break}i[2]&&o.ops.pop(),o.trys.pop();continue}r=t.call(e,o)}catch(e){r=[6,e],a=0}finally{n=i=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}([r,s])}}}(this,(function(a){switch(a.label){case 0:return e?(t=this.getButtonType(e),e.preventDefault()):t="import",[4,Promise.all([n.e(95882),n.e(10572),n.e(19260)]).then(n.bind(n,319260))];case 1:return new(0,a.sent().default)({id:t,entity:APP.getBaseEntity()}),[2]}}))},function(){var e=this,n=arguments;return new Promise((function(a,i){var r=t.apply(e,n);function s(e){o(r,a,i,s,l,"next",e)}function l(e){o(r,a,i,s,l,"throw",e)}s(void 0)}))}).apply(this);var t},checkImportHash:function(){"#show_import"===window.location.hash&&(window.location.hash="",(0,r.canImport)()&&this.onImportClick())},getButtonType:function(e){var t=i()(e.currentTarget);return t&&t.hasClass("js-list-import-clientbank-exchange")?"import_clientbank_exchange":"import"}};var l="../build/transpiled/components/lists/actions/import/mixin";window.define(l,(function(){var e="undefined",n=typeof t===e?typeof __WEBPACK_AMD_DEFINE_RESULT__===e?typeof module===e?void 0:module.exports:__WEBPACK_AMD_DEFINE_RESULT__:t;return n&&n.default||n})),window.require([l])},244294:(e,t,n)=>{n.r(t),n.d(t,{default:()=>o});var a=n(661533),i=n.n(a),r=n(323344);const o={events:{"click .js-list-caption-link":"onTopNavigationButtonClick"},onTopNavigationButtonClick:function(e){var t=(0,r.getQueryString)();return i()(e.currentTarget).addClass("list-top-nav__icon-button_active").siblings(".js-list-caption-link").removeClass("list-top-nav__icon-button_active"),APP.router.navigate(e.currentTarget.getAttribute("href")+(t?"?".concat(t):""),{trigger:!0,no_loading:!0}),!1}};var s="../build/transpiled/components/lists/mixins/navigation";window.define(s,(function(){var e="undefined",n=typeof t===e?typeof __WEBPACK_AMD_DEFINE_RESULT__===e?typeof module===e?void 0:module.exports:__WEBPACK_AMD_DEFINE_RESULT__:t;return n&&n.default||n})),window.require([s])},530463:(e,t,n)=>{n.r(t),n.d(t,{default:()=>_});var a=n(629133),i=n.n(a),r=n(567952),o=n.n(r),s=n(23456),l=n(323344),c=n(823672),d=n(661533);function u(e,t,n,a,i,r,o){try{var s=e[r](o),l=s.value}catch(e){return void n(e)}s.done?t(l):Promise.resolve(l).then(a,i)}function p(e){return function(){var t=this,n=arguments;return new Promise((function(a,i){var r=e.apply(t,n);function o(e){u(r,a,i,o,s,"next",e)}function s(e){u(r,a,i,o,s,"throw",e)}o(void 0)}))}}function f(e,t){var n,a,i,r,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return r={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function s(r){return function(s){return function(r){if(n)throw new TypeError("Generator is already executing.");for(;o;)try{if(n=1,a&&(i=2&r[0]?a.return:r[0]?a.throw||((i=a.return)&&i.call(a),0):a.next)&&!(i=i.call(a,r[1])).done)return i;switch(a=0,i&&(r=[2&r[0],i.value]),r[0]){case 0:case 1:i=r;break;case 4:return o.label++,{value:r[1],done:!1};case 5:o.label++,a=r[1],r=[0];continue;case 7:r=o.ops.pop(),o.trys.pop();continue;default:if(!((i=(i=o.trys).length>0&&i[i.length-1])||6!==r[0]&&2!==r[0])){o=0;continue}if(3===r[0]&&(!i||r[1]>i[0]&&r[1]<i[3])){o.label=r[1];break}if(6===r[0]&&o.label<i[1]){o.label=i[1],i=r;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(r);break}i[2]&&o.ops.pop(),o.trys.pop();continue}r=t.call(e,o)}catch(e){r=[6,e],a=0}finally{n=i=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}([r,s])}}}const _={events:{"click .js-cbh-install":"showCbhModal","click .js-duplicate-search":"showDuplicateSearchModal","click .js-broadcasting-create":"handleNewBroadcastingCreateClick","click .js-edit-pipeline":"handlePipelineSettingsClick"},document_events:{"filter:deserialize:callback":"onFilterDeserializeForBroadcasting"},showCbhModal:function(){return p((function(){var e,t;return f(this,(function(a){switch(a.label){case 0:return[4,n.e(98899).then(n.bind(n,998899))];case 1:return e=a.sent(),t=e.default,this._addComponent(t),[2]}}))})).apply(this)},showDuplicateSearchModal:function(){return p((function(){var e,t;return f(this,(function(a){switch(a.label){case 0:return[4,Promise.all([n.e(50769),n.e(85827)]).then(n.bind(n,285827))];case 1:return e=a.sent(),t=e.default,this._addComponent(t,{type:"leads"}),[2]}}))})).apply(this)},onFilterDeserializeForBroadcasting:function(e,t){var n,a=(0,l.getQueryParam)("term"),i=(0,c.normalizeObjectArrays)(o()((0,l.QStoJSON)(d.param(t),!0)));a&&(!i.tag&&(null===(n=i.filter)||void 0===n?void 0:n.tagsLogic)&&delete i.filter.tagsLogic,i.term=a),this._broadcasting_filter=i},getFilterLeadsCountForBroadcasting:function(){var e=this.$("#list-top-search__summary");return!e.length||e.is(":empty")?null:parseInt(e.children().first().text())},getEntityIds:function(){if(i().isArray(this.existedItems))return i().pluck(this.existedItems,"id");var e=this.response.items;return e?i().chain(e).map((function(e){return i().values(e)})).flatten().pluck("id").value():void 0},handleNewBroadcastingCreateClick:function(){return p((function(){var e,t,a;return f(this,(function(i){switch(i.label){case 0:return e=this,[4,Promise.all([n.e(93671),n.e(69314),n.e(17815),n.e(17052),n.e(2134)]).then(n.bind(n,617052))];case 1:return t=i.sent(),a=t.default,(0,s.kommoLogAmplitude)("brNewBroadcast",{Source:"Leads"}),this._addComponent(a,{filter:this._broadcasting_filter,pipelineId:this.pipeline_id,entityIds:this.getEntityIds(),getSelectedLeadsCount:function(){return e.getFilterLeadsCountForBroadcasting()||0}}),[2]}}))})).apply(this)},showBroadcastModal:function(e){return p((function(){var t,a,i,r,o;return f(this,(function(s){switch(s.label){case 0:return t=this,a=e.draftData,i=e.caseData,[4,Promise.all([n.e(93671),n.e(69314),n.e(17815),n.e(17052),n.e(2134)]).then(n.bind(n,617052))];case 1:return r=s.sent(),o=r.default,this._addComponent(o,{filter:this._broadcasting_filter,pipelineId:this.pipeline_id,entityIds:this.getEntityIds(),getSelectedLeadsCount:function(){return t.getFilterLeadsCountForBroadcasting()||0},draftData:a,caseData:i}),[2]}}))})).apply(this)},handlePipelineSettingsClick:function(){var e=this,t=this.pipeline_id;this._$document.trigger("page:overlay:show"),Promise.all([n.e(3473),n.e(82356)]).then(n.bind(n,382356)).then((function(n){var a=n.default;e._addComponent(a,{pipeline_id:parseInt(t),shouldCheckTriggers:!0})}))}};var h="../build/transpiled/interface/leads/mixins/leads_more";window.define(h,(function(){var e="undefined",n=typeof t===e?typeof __WEBPACK_AMD_DEFINE_RESULT__===e?typeof module===e?void 0:module.exports:__WEBPACK_AMD_DEFINE_RESULT__:t;return n&&n.default||n})),window.require([h])},224043:(e,t,n)=>{n.r(t),n.d(t,{default:()=>c});var a=n(629133),i=n.n(a),r=n(460159),o=n.n(r),s=n(445368),l=n(304483);const c={linkClick:function(e){var t=(e=e||this.model).get("category");this.$el.trigger("unsorted:link:click"),new l.default({class_name:"modal-list",focus_element:"#unsorted_link_suggest",init:function(n){var a,r,l,c=this,d=o()({ref:"/tmpl/common/modal/unsorted_linking_up/modal.twig"}),u=o()({ref:"/tmpl/common/modal/unsorted_linking_up/suggest_list_item.twig"}),p={};p.is_retail_functions_enabled=APP.constant("account").is_retail_functions_enabled,p.lang=APP.lang||{},p.suggest={name:"unsorted_leads_search",id:"unsorted_link_suggest",class_name:" linkup-unsorted-suggest ",type:"leads_concat",disable_filter:!0,ajax:{url:"/ajax/unsorted/linkup/",params:"t=".concat(t,"&q=#q#")}},n.trigger("modal:loaded").html(d.render(p)).on("suggest:changed #unsorted_link_suggest",(function(t,a){var i=a.data("value-id"),r=a.data("contact-id"),o=a.data("value-type");n.hide(),n.find("#unsorted--linkup-block").hide(),e.link([{id:i,contact_id:r,type:o}]),c.destroy()})).on("suggest:loaded #unsorted_link_suggest",(function(e,t,n){var o=[];"ok"===(t=t||{}).status&&t.result.length>0&&(a=0,i().each(t.result,(function(e){r={2:(0,s.i18n)("Leads"),12:(0,s.i18n)("Customers")},e.type!==a&&(a=e.type,o.push({id:0,title:r[a],text:u.render({text:r[a],type:"head"}),custom_class:"js--suggest-item--not-selectable",raw_highlight:!0})),e.contact=e.contact||{},l=e.contact,p={id:e.id,title:[e.name,(0,s.contactName)(l.name),l.phone,l.email].join(", "),custom_class:e.custom_class,contact_id:l.id,type:e.type,text:u.render({text:e.name,type:"item",contact:l}),raw_highlight:!0},o.push(p),n.trigger("suggest:reset",[o,['<li data-value-id="<%= data.id %>" data-value-type="<%= data.type %>" data-contact-id="<%= data.contact_id %>" class="control--suggest--list--item <%= data.custom_class %>">','<span class="control--suggest--list--item-inner" title="<%= _.escape(data.title) %>"><%= data.highlighted_text %></span>',"</li>"].join("")])})))})).trigger("modal:centrify")}})},linkFailed:function(e){this.failedModal(e),this.loadStop(),this.$el.trigger("unsorted:link:failed")}};var d="../build/transpiled/interface/leads/pipeline/unsorted/mixins/unsorted_linking_up";window.define(d,(function(){var e="undefined",n=typeof t===e?typeof __WEBPACK_AMD_DEFINE_RESULT__===e?typeof module===e?void 0:module.exports:__WEBPACK_AMD_DEFINE_RESULT__:t;return n&&n.default||n})),window.require([d])},249909:(e,t,n)=>{n.r(t),n.d(t,{default:()=>s});var a=n(629133),i=n.n(a),r=n(214558),o=n(661533);const s={accept:function(e,t){return this.proceed("accept",e,t)},decline:function(e){return this.proceed("decline",e)},link:function(e,t){var n={};return t=t||[],i().each(t,(function(t){n[e]=t})),this.proceed("link",e,{data:{link:[e],links:n}})},proceed:function(e,t,n){var a,s=o.Deferred(),l={};return n=n||{},l.user_id=(0,r.current)("id"),l[e]=[t],o.ajax({url:"/ajax/unsorted/".concat(e),data:o.param({request:{unsorted:i().extend({lang:APP.lang_id},l,n.data||{})}}),dataType:"json",type:"POST"}).then((function(t){var n={finished:!0,response:t};if(t&&t.response&&t.response.unsorted){if((t=t.response.unsorted)[e]&&"success"===t[e].status)return a=i().chain(t[e].data).values().first().value(),a=!!i().isEmpty(a)||a,void s.resolve({success:!0,response:a})}else n.failed=!0;s.resolve(n)}),(function(e){s.resolve({failed:!0,response:e})})),s.promise()}};var l="../build/transpiled/network/leads/unsorted";window.define(l,(function(){var e="undefined",n=typeof t===e?typeof __WEBPACK_AMD_DEFINE_RESULT__===e?typeof module===e?void 0:module.exports:__WEBPACK_AMD_DEFINE_RESULT__:t;return n&&n.default||n})),window.require([l])},501922:(e,t,n)=>{n.r(t),n.d(t,{USERFLOW_CONSTANTS:()=>a});var a={TOKENS:{PRODUCTION:"ct_njv4pont65ef7fcnio5rc5ypky",DEVELOPMENT:"ct_6nku5ydoofeppc2d6k52bp6fhe"},STORAGE_KEYS:{IS_LOGGLY_METRICS_RESTRICTED:"isLogglyMetricsRestricted"},FEATURE_FLAG:"userflow",FLOWS:{TEST_FLOW:{id:"7b8ac78f-0877-49f5-80a9-9eeb2dc6343a",name:"Test Flow"},PROD_FLOW:{id:"c3d82478-589d-46f9-a8db-decab812b5c5",name:"PROD FLOW"},PROD_FLOW_CHAT_MARKETING:{id:"4702717a-7e60-4f5d-b14b-63847ce345b1",name:"PROD FLOW chat marketing"},PROD_FLOW_CHAT_MARKETING_WA:{id:"4cf359d0-0abd-4c00-8238-ebe6b1dbc50e",name:"PROD FLOW chat marketing (WA)"},PROD_FLOW_LEAD_MANAGEMENT:{id:"c57ca919-5b16-4ac3-8f72-d9613915958a",name:"PROD FLOW lead management"},PROD_FLOW_LEAD_MANAGEMENT_WA:{id:"d9f43a53-b5cf-4a96-84c9-bb932cc598bf",name:"PROD FLOW lead management (WA)"},PROD_FLOW_CHAT_MANAGEMENT:{id:"54737f9e-129c-4254-aa8f-13aac7487dde",name:"PROD FLOW chat management"},PROD_FLOW_CHAT_MANAGEMENT_V2:{id:"d4293a97-208e-40d3-bb20-0ef33db3c79f",name:"PROD FLOW chat management (v2)"},PROD_FLOW_CHAT_MANAGEMENT_WA:{id:"7b941141-e3a5-4558-af02-93068a1d52b4",name:"PROD FLOW chat management (WA)"},PROD_FLOW_ENDING:{id:"b5f3f3e2-5791-46cf-a3a3-b6b30e23db69",name:"PROD FLOW ending"},PROD_FLOW_ENDING_WA:{id:"b27da17b-703a-48c3-bdd4-8643ec104daa",name:"PROD FLOW ending (WA)"},PROD_FLOW_UNCLEAR:{id:"5ff0adae-c5b5-434b-a8a3-d4fcc02d833f",name:"PROD FLOW unclear"},PROD_FLOW_UNCLEAR_WA:{id:"f020bf2d-84fd-4f9f-8252-26c06e87f03c",name:"PROD FLOW unclear (WA)"}},CHECKLISTS:{TEST_CHECKLIST:{id:"8124ce1e-98fd-48d3-9e8d-1a18d5439218",name:"Test Checklist"},GETTING_STARTED:{id:"6ad42100-6c54-4e3e-9f9e-ec30624bafaf",name:"Getting Started"}},EVENTS:{CUSTOMIZATION_SCREEN_SHOWED:"customization_screen_showed"},METRIC_MARKS:{PAGE_LOAD_STARTED:"page_load_started",GLOBAL_CONTROLLER_STARTED:"global_controller_started",USERFLOW_INSTANCE_CREATED:"userflow_instance_created",FIRST_DISPATCH_CALLED:"first_dispatch_called",USERFLOW_JS_LOADED:"userflow_js_loaded",WELCOME_SCREEN_SHOWN:"welcome_screen_shown",WELCOME_SCREEN_CLOSED:"welcome_screen_closed",FIRST_STEP_SHOWED:"first_step_showed"}},i="../build/transpiled/tour/userflow/utils/userflow_constants";window.define(i,(function(){var e="undefined",n=typeof t===e?typeof __WEBPACK_AMD_DEFINE_RESULT__===e?typeof module===e?void 0:module.exports:__WEBPACK_AMD_DEFINE_RESULT__:t;return n&&n.default||n})),window.require([i])},951726:(e,t,n)=>{n.r(t),n.d(t,{cloneDeep:()=>r});var a=n(629133),i=n.n(a),r=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new WeakMap;if(!i().isObject(e)||null===e)return e;if(t.has(e))return t.get(e);var n=i().isArray(e)?[]:{};return t.set(e,n),i().each(e,(function(e,a){n[a]=r(e,t)})),n}},655300:(e,t,n)=>{n.r(t),n.d(t,{deepExtend:()=>o});var a=n(629133),i=n.n(a),r=n(951726),o=function(e,t){var n=(0,r.cloneDeep)(e);for(var a in t)i().isObject(t[a])&&i().has(n,a)&&i().isObject(n[a])?n[a]=o(n[a],t[a]):n[a]=t[a];return n}},823672:(e,t,n)=>{n.r(t),n.d(t,{cloneDeep:()=>a.cloneDeep,deepExtend:()=>i.deepExtend,normalizeObjectArrays:()=>r.normalizeObjectArrays});var a=n(951726),i=n(655300),r=n(367342)},367342:(e,t,n)=>{n.r(t),n.d(t,{normalizeObjectArrays:()=>a});var a=function(e){var t=function(e){if(Array.isArray(e))return e.map(t);if(function(e){return Boolean(e)&&"object"==typeof e&&!Array.isArray(e)}(e)){var n=Object.keys(e);if(n.every((function(e,t){return String(t)===n[t]})))return n.map((function(n){return t(e[n])}));var a={},i=!0,r=!1,o=void 0;try{for(var s,l=n[Symbol.iterator]();!(i=(s=l.next()).done);i=!0){var c=s.value;a[c]=t(e[c])}}catch(e){r=!0,o=e}finally{try{i||null==l.return||l.return()}finally{if(r)throw o}}return a}return e};return t(e)}}}]);var _global="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};_global.SENTRY_RELEASE={id:"build_2025_11_28_18_50_52"},function(){try{var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},t=(new Error).stack;t&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[t]="e02baa99-329f-4c68-93a7-388b47e5265a",e._sentryDebugIdIdentifier="sentry-dbid-e02baa99-329f-4c68-93a7-388b47e5265a")}catch(e){}}();
//# sourceMappingURL=83993.276aeb47d5173eafd650.js.map