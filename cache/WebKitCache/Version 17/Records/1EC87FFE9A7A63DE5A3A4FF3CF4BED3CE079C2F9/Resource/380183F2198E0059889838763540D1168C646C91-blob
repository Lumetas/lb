"use strict";(window.webpackChunk=window.webpackChunk||[]).push([[31579],{798119:(t,e,i)=>{i.r(e),i.d(e,{default:()=>f});var n=i(629133),o=i.n(n),s=i(661533),a=i.n(s),h=i(500034),r=i(998798),d=i(537107),l=i(397927),c=i(778636),_=i(695453),u=i(621448);const f=c.default.extend({_classes:function(){return o().extend({},o().result(c.default.prototype,"_classes",{}),{hidden_inbox:"inbox-holder_hidden"})},document_events:function(){var t={};return t["click ".concat(this._selector("inbox_toggle_button"))]="toggle",t["click ".concat(this._selector("navigation"))]="onNavigationClick",o().extend({},o().result(c.default.prototype,"document_events",{}),t)},initialize:function(){for(var t=arguments.length,e=new Array(t),i=0;i<t;i++)e[i]=arguments[i];c.default.prototype.initialize.apply(this,e),this._onOpenStateChangeListeners=[],this.$el.length&&(this.listenTo(_.default,"add",this._onInternalFileNotificationAdd),this.listenTo(_.default,"remove",this._onInternalFileNotificationRemove),this.listenTo(this.notifications,"reset",this._onNotificationsResetRestoreInternalFileNotifications)),this._overlay_ns=".inbox_overlay",this._checkHash()},_onInternalFileNotificationAdd:function(t){this.notifications.add(t,{merge:!0}),this.refreshCounter()},_onInternalFileNotificationRemove:function(t){this.notifications.remove(t),this.refreshCounter()},_onNotificationsResetRestoreInternalFileNotifications:function(){var t=this;_.default.each((function(e){t.notifications.add(e,{merge:!0})})),this.refreshCounter()},onNavigationClick:function(t){t.ctrlKey||t.metaKey||this.hide()},_checkHash:function(){var t=window.location.hash.split(":");if(0!==t.length&&"#inbox"===t[0])switch(!0){case 3===t.length&&"chat_direct"===t[1]:this.openDirectChat(t[2]);break;case 3===t.length&&"chat_group"===t[1]:default:this.toggle()}},requestPushPermission:function(){for(var t=arguments.length,e=new Array(t),i=0;i<t;i++)e[i]=arguments[i];APP.constant("main_tour").show||c.default.prototype.requestPushPermission.apply(this,e)},refreshCounter:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this._last_resp;if(t){if(this._last_resp=o().clone(t),o().contains([u.InboxBadgeId.BADGE_NO_CHAT_BRIEF,u.InboxBadgeId.BADGE_NO_EXTERNAL_CHAT_BRIEF,u.InboxBadgeId.BADGE_BRIEF],this.badge_id)&&/^\d+$/.test(t[this.badge_id])&&(t[this.badge_id]=(parseInt(t[this.badge_id])+_.default.length).toString()),!(0,h.isFeatureAvailable)(h.Features.SYSTEM_NAVIGATION_V2))return c.default.prototype.refreshCounter.call(this,t);var e=t[this.badge_id];(0,n.isUndefined)(e)||(0,l.updateItemCounter)({id:l.CounterId.NOTIFICATIONS,count:t[this.badge_id]||0})}},showNotification:function(){for(var t=arguments.length,e=new Array(t),i=0;i<t;i++)e[i]=arguments[i];if(!this._is_opened)return c.default.prototype.showNotification.apply(this,e)},toggle:function(){this._is_opened?this.hide():this.show()},show:function(){var t=a().Deferred();return this._is_opened?(APP.is_touch_device&&this._fixBodyPosition(),t.resolve()):(d.default.isHoverMenuVisible()&&d.default.closeHoverMenu(),this._toggleClass("active","inbox",!0),this._toggleClass("hidden_inbox",this.$el,!1),this._toggleClass("hide_animation","inbox",!1),this._toggleClass("show_animation","inbox",!0),this.$el.show(),this.showOverlay(),this.$el.one("animationend",o().bind((function(){this.showLoading(),this.afterFirstLoad().then(o().bind((function(){APP.is_touch_device&&this._fixBodyPosition()}),this)).then(o().bind((function(){this._onShow(),this.hideLoading(),t.resolve()}),this)),this.onVirtualizedResize()}),this))),this._is_opened=!0,this._triggerOnOpenStateChangeListeners(),c.default.prototype.show.apply(this),t.promise()},hide:function(){this.destroyQuickActionMenu(),this.closeDirectChat().then(o().bind((function(){this._$document.off(this._overlay_ns),this._onHide(),this._toggleClass("active","inbox",!1),this._toggleClass("hidden_inbox",this.$el,!0),this.$el.hide(),this._toggleClass("hide_animation","inbox",!0),this._toggleClass("show_animation","inbox",!1),this.hideOverlay(),c.default.prototype.hide.apply(this),APP.is_touch_device&&this._releaseBodyPosition()}),this)),this._is_opened=!1,this._triggerOnOpenStateChangeListeners()},subscribeOnOpenStateChange:function(t){var e=this;return this._onOpenStateChangeListeners.push(t),function(){e._onOpenStateChangeListeners=e._onOpenStateChangeListeners.filter((function(e){return e!==t}))}},_triggerOnOpenStateChangeListeners:function(){var t=this;this._onOpenStateChangeListeners.forEach((function(e){e(t._is_opened)}))},_onShow:function(){this.inbox_fully_opened=!0,this.autoloadContent(),this.readable_ids.length>0&&this.read({id:this.readable_ids}),this.onVirtualizedResize()},_onHide:function(){this.inbox_fully_opened=!1,this.loader&&this.loader.destroy()},showOverlay:function(){this._$body.append(this.$overlay=a()('<div class="default-overlay notifications-overlay" id="notification_overlay"></div>')),this.$overlay.trigger("overlay:show"),this._$document.one("click".concat(this._overlay_ns),"#notification_overlay",o().bind(this.hide,this)).one("page:changed".concat(this._overlay_ns),o().bind(this.hide,this))},hideOverlay:function(){this.$overlay&&this.$overlay.length&&this.$overlay.trigger("overlay:hide")},_fixBodyPosition:function(){this._$body.css({position:"fixed"})},_releaseBodyPosition:function(){this._$body.css({position:""})},openChat:function(t){var e=t.id;return this._isChatAlreadyOpened(e)?a().Deferred().resolve():this.show().then(o().bind((function(){o().delay(o().bind((function(){c.default.prototype.openChat.apply(this,[t])}),this),100)}),this))},disableNotificationEntryCheck:function(t){var e=o().propertyOf(t.get("linked_entity"))("type");return(!(0,r.isChatsInboxEnabled)()||"chat"!==e)&&c.default.prototype.disableNotificationEntryCheck.apply(this,arguments)},excludeTypeEntryCheck:function(t){var e=APP.constant("account").is_chats_inbox_enabled,i=o().propertyOf(t.get("entity"))("type"),n=o().propertyOf(t.get("linked_entity"))("type");return e?e&&!(0,h.isFeatureAvailable)("global_inbox")?o().includes(["chat"],n):o().includes(["chat_group","chat_direct"],i)||o().includes(["chat","entity_chat"],n):c.default.prototype.excludeTypeEntryCheck.apply(this,arguments)}});var p="../build/transpiled/components/base/inbox/inbox";window.define(p,(function(){var t="undefined",i=typeof e===t?typeof __WEBPACK_AMD_DEFINE_RESULT__===t?typeof module===t?void 0:module.exports:__WEBPACK_AMD_DEFINE_RESULT__:e;return i&&i.default||i})),window.require([p])}}]);var _global="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};_global.SENTRY_RELEASE={id:"build_2025_11_28_18_50_52"},function(){try{var t="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},e=(new Error).stack;e&&(t._sentryDebugIds=t._sentryDebugIds||{},t._sentryDebugIds[e]="c629df50-a762-4625-b76c-597f3d59d3e6",t._sentryDebugIdIdentifier="sentry-dbid-c629df50-a762-4625-b76c-597f3d59d3e6")}catch(t){}}();
//# sourceMappingURL=31579.1ed03bf6aa0882dbb9e7.js.map