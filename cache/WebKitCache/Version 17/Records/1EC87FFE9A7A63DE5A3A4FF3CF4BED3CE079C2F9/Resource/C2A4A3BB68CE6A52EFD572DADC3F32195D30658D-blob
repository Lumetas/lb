"use strict";(window.webpackChunk=window.webpackChunk||[]).push([[37061],{618749:(e,t,n)=>{n.r(t),n.d(t,{default:()=>r});const r={wrapper:"a00a3c048","image-wrapper":"a37bd6616"}},215015:(e,t,n)=>{n.r(t),n.d(t,{default:()=>r});const r={wrapper:"a483d1168",option:"ab70e600",chosen:"d54af006"}},464587:(e,t,n)=>{n.r(t),n.d(t,{default:()=>r});const r={wrapper:"a2f94da70",icon:"a02e7fbbc",title:"a5ab54b75"}},700056:(e,t,n)=>{n.r(t),n.d(t,{default:()=>r});const r={"modal-body--global-rounded":"fe7ec80a"}},604874:(e,t,n)=>{n.r(t),n.d(t,{ABORT_ERROR_MESSAGE:()=>j,ANSWER_URL:()=>A,BASE_URL:()=>E,BASE_YCLOUD_API_URL:()=>D,KNOWLEDGE_BASE_DEFAULT_URL:()=>I,MARK_ANSWER_URL:()=>P,MARK_REWRITER_URL:()=>O,MARK_TASK_URL:()=>R,REWRITER_URL:()=>_,TASK_URL:()=>T,addSource:()=>X,addYCloud:()=>Se,cancelSourceUploading:()=>re,checkYCloudKeyStatus:()=>Ee,connectAiTrial:()=>_e,deleteMultipleRow:()=>$,deleteRow:()=>Z,get:()=>B,getEmotionDetectionSettings:()=>Pe,getPage:()=>ce,getSourcePages:()=>ue,getSources:()=>Q,getTaskSuggestionSettings:()=>he,getYCloud:()=>be,grammar:()=>J,linkSources:()=>Oe,mark:()=>Y,markTrialExpiredShown:()=>Te,post:()=>W,profanity:()=>z,reloadPage:()=>fe,remove:()=>V,removeMultiplePage:()=>de,removePage:()=>le,removeYCloud:()=>we,requestAiTrial:()=>Ae,setAnswerOnboarding:()=>ge,summarize:()=>K,switchMultiplePageAvailability:()=>pe,switchMultipleSourceAvailability:()=>ee,switchSourceAvailability:()=>te,toggleAnswerSettings:()=>ye,toggleEmotionDetectionSettings:()=>Re,toggleTaskSuggestionSettings:()=>ve,tone:()=>H,updateNameSource:()=>ae,updatePage:()=>se,updateSourceData:()=>oe,updateSourcePagesLang:()=>ie,updateUrlSource:()=>ne,updateYCloud:()=>me});var r=n(567952),a=n.n(r),o=n(623967),i=n.n(o),u=n(629133),c=n.n(u),s=n(744741),l=n(990703),f=n(286340),d=n(197634),p=n(926168),v=n(661533);function h(e,t,n,r,a,o,i){try{var u=e[o](i),c=u.value}catch(e){return void n(e)}u.done?t(c):Promise.resolve(c).then(r,a)}function y(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var o=e.apply(t,n);function i(e){h(o,r,a,i,u,"next",e)}function u(e){h(o,r,a,i,u,"throw",e)}i(void 0)}))}}function g(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function b(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){g(e,t,n[t])}))}return e}function S(e,t){var n,r,a,o,i={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return o={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function u(o){return function(u){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(a=2&o[0]?r.return:o[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,o[1])).done)return a;switch(r=0,a&&(o=[2&o[0],a.value]),o[0]){case 0:case 1:a=o;break;case 4:return i.label++,{value:o[1],done:!1};case 5:i.label++,r=o[1],o=[0];continue;case 7:o=i.ops.pop(),i.trys.pop();continue;default:if(!((a=(a=i.trys).length>0&&a[a.length-1])||6!==o[0]&&2!==o[0])){i=0;continue}if(3===o[0]&&(!a||o[1]>a[0]&&o[1]<a[3])){i.label=o[1];break}if(6===o[0]&&i.label<a[1]){i.label=a[1],a=o;break}if(a&&i.label<a[2]){i.label=a[2],i.ops.push(o);break}a[2]&&i.ops.pop(),i.trys.pop();continue}o=t.call(e,i)}catch(e){o=[6,e],r=0}finally{n=a=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,u])}}}var m,w="",E=APP.constant("airewriter").url,_="".concat(E,"/api/v1/rewrite_text"),A="".concat(E,"/api/v1/answer"),T="".concat(E,"/api/v1/task"),O="".concat(E,"/api/v1/rewrite_text/stats/mark_used"),P="".concat(E,"/api/v1/answer/stats/mark_used"),R="".concat(E,"/api/v1/task/stats/mark_used"),I="".concat(E,"/api/v1/source"),N="".concat(E,"/api/v1/multi/source/disable"),k="".concat(E,"/api/v1/multi/source/delete"),C="".concat(E,"/api/v1/summarize_talk"),x="".concat(E,"/api/v1/tone/analyze"),L="".concat(E,"/api/v1/sources/link"),D="".concat(E,"/api/v1/ycloud/apikey"),U="/ajax/v4/emotion_detector/settings",M="/ajax/v4/airewriter/task_suggestion/settings",j="AbortError",F=function(){return v.ajax({url:"/ajax/v4/airewriter/issue_token",method:"POST"})},G=null,q=(m=y((function(e){var t,n,r,a;return S(this,(function(o){switch(o.label){case 0:t=function(t){return v.ajax(v.extend(!0,{},e,{url:e.url,beforeSend:function(t){e.signal&&(e.signal.onabort=t.abort)},headers:{"X-Auth-Token":t,"x-language":(0,p.isCustomers)()&&c().includes(["leads","customers"],APP.getBaseEntity())?(0,f.getEntityLangInCustomers)(APP.getBaseEntity()):(0,p.getLangId)()},contentType:"application/json"}))},o.label=1;case 1:return o.trys.push([1,6,11,12]),w?[4,t(w)]:[3,3];case 2:return[2,o.sent()];case 3:return G||(G=y((function(){var e,t;return S(this,(function(n){switch(n.label){case 0:return n.trys.push([0,2,,3]),[4,F()];case 1:return e=n.sent().token,w=e,[2,e];case 2:throw t=n.sent(),G=null,t;case 3:return[2]}}))}))()),[4,G];case 4:return n=o.sent(),[4,t(n)];case 5:return[2,o.sent()];case 6:if(0===(r=o.sent()).status)throw new Error(j);return r.status!==s.HttpStatusCode.FORBIDDEN?[3,8]:[4,F()];case 7:return a=o.sent(),w=a.token,[2,t(w)];case 8:return r.status!==s.HttpStatusCode.UNAUTHORIZED?[3,10]:[4,(0,l.updateCoreTokens)()];case 9:return o.sent(),[2,t(w)];case 10:throw JSON.parse(r.responseText);case 11:return w&&(G=null),[7];case 12:return[2]}}))})),function(e){return m.apply(this,arguments)}),B=function(){var e=y((function(e){var t,n,r=arguments;return S(this,(function(o){switch(o.label){case 0:return t=!(r.length>1&&void 0!==r[1])||r[1],[4,q(e)];case 1:return n=o.sent(),[2,t?a()(n):n]}}))}));return function(t){return e.apply(this,arguments)}}(),W=function(){var e=y((function(e){var t,n,r;return S(this,(function(o){switch(o.label){case 0:return t=e.url,n=e.data,[4,q({url:t,method:"POST",data:JSON.stringify(b({},i()(n)))})];case 1:return r=o.sent(),[2,a()(r)]}}))}));return function(t){return e.apply(this,arguments)}}(),V=function(){var e=y((function(e){var t,n;return S(this,(function(r){switch(r.label){case 0:return t=e.url,[4,q({url:t,method:"DELETE"})];case 1:return n=r.sent(),[2,a()(n)]}}))}));return function(t){return e.apply(this,arguments)}}(),Y=function(){var e=y((function(e){var t,n;return S(this,(function(r){switch(r.label){case 0:return t=e.url,n=e.data,[4,q({url:t,method:"POST",data:JSON.stringify(b({},i()(n)))})];case 1:return r.sent(),[2]}}))}));return function(t){return e.apply(this,arguments)}}(),K=function(){var e=y((function(e){var t,n,r;return S(this,(function(a){switch(a.label){case 0:return t=e.talkId,n=e.elementId,r=e.elementType,[4,q({url:"".concat(C,"/").concat(t),method:"POST",data:JSON.stringify({date_format:APP.system.format.date.date,entity_id:n,entity_type:r})})];case 1:return a.sent(),[2]}}))}));return function(t){return e.apply(this,arguments)}}(),z=function(){var e=y((function(e){var t,n;return S(this,(function(r){switch(r.label){case 0:return t=APP.constant("ai_services").prdservice,n=t.server_url,[4,v.ajax({url:"".concat(n,"/api/detect"),method:"POST",data:JSON.stringify({text:e,lang:APP.lang_id}),contentType:"application/json"})];case 1:return[2,r.sent()]}}))}));return function(t){return e.apply(this,arguments)}}(),J=function(){var e=y((function(e){var t,n;return S(this,(function(r){switch(r.label){case 0:return t=APP.constant("ai_services").spell_checker_service,n=t.server_url,[4,v.ajax({url:"".concat(n,"/api/check/grammar"),method:"POST",data:JSON.stringify({text:e,lang:APP.lang_id}),contentType:"application/json"})];case 1:return[2,r.sent()]}}))}));return function(t){return e.apply(this,arguments)}}(),H=function(){var e=y((function(e){return S(this,(function(t){switch(t.label){case 0:return[4,q({url:"".concat(x),method:"POST",data:JSON.stringify({text:e})})];case 1:return[2,t.sent()]}}))}));return function(t){return e.apply(this,arguments)}}(),Q=function(){var e=y((function(e){var t,n,r,o,i,u,c,s,l,f,d,p;return S(this,(function(v){switch(v.label){case 0:return n=e.totalLimit,r=e.page,o=e.orderBy,i=e.orderType,u=e.enabledFor,c=e.linkedAgentId,s=e.withSamples,l=e.excludeAgentIds,f=r?"".concat(I,"?page=").concat(r):"".concat(I,"?limit=").concat(n),o&&i&&(f="".concat(f,"&order_by=").concat(o,"&order_type=").concat(i)),u&&(f="".concat(f,"&enabled_for=").concat(u)),c&&(f="".concat(f,"&linked_agent_id=").concat(c)),s&&(f="".concat(f,"&with_samples=Y")),l&&(f="".concat(f,"&exclude_agent_ids[]=").concat(l.join(","))),[4,q({url:f})];case 1:return d=v.sent(),[2,a()({items:null!==(p=null==d||null===(t=d._embedded)||void 0===t?void 0:t.sources)&&void 0!==p?p:null==d?void 0:d.sources[0],currentPage:null==d?void 0:d._page,isNextPageAvailable:(null==d?void 0:d._page)?(null==d?void 0:d._page)<(null==d?void 0:d._page_count):null==d?void 0:d.is_next_page_available})]}}))}));return function(t){return e.apply(this,arguments)}}(),X=function(){var e=y((function(e){var t;return S(this,(function(n){switch(n.label){case 0:return[4,q({url:I,method:"POST",data:JSON.stringify(e),contentType:"application/json"})];case 1:return t=n.sent(),[2,a()(null==t?void 0:t.source)]}}))}));return function(t){return e.apply(this,arguments)}}(),$=function(){var e=y((function(e){return S(this,(function(t){switch(t.label){case 0:return[4,q({url:k,method:"POST",data:JSON.stringify(e),contentType:"application/json"})];case 1:return[2,t.sent()]}}))}));return function(t){return e.apply(this,arguments)}}(),Z=function(){var e=y((function(e){return S(this,(function(t){switch(t.label){case 0:return[4,q({url:"".concat(I,"/").concat(e),method:"DELETE",contentType:"application/json"})];case 1:return[2,t.sent()]}}))}));return function(t){return e.apply(this,arguments)}}(),ee=function(){var e=y((function(e){return S(this,(function(t){switch(t.label){case 0:return[4,q({url:N,data:JSON.stringify(e),method:"POST",contentType:"application/json"})];case 1:return[2,t.sent()]}}))}));return function(t){return e.apply(this,arguments)}}(),te=function(){var e=y((function(e,t){return S(this,(function(n){switch(n.label){case 0:return[4,q({url:"".concat(I,"/").concat(t,"/disable"),data:JSON.stringify(e),method:"POST",contentType:"application/json"})];case 1:return[2,n.sent()]}}))}));return function(t,n){return e.apply(this,arguments)}}(),ne=function(){var e=y((function(e){var t;return S(this,(function(n){switch(n.label){case 0:return t=e.id,[4,q({url:"".concat(I,"/").concat(t,"/update_pages"),method:"POST",contentType:"application/json"})];case 1:return[2,n.sent()]}}))}));return function(t){return e.apply(this,arguments)}}(),re=function(){var e=y((function(e){return S(this,(function(t){switch(t.label){case 0:return[4,q({url:"".concat(I,"/").concat(e,"/cancel"),method:"POST",contentType:"application/json"})];case 1:return[2,t.sent()]}}))}));return function(t){return e.apply(this,arguments)}}(),ae=function(){var e=y((function(e){var t,n;return S(this,(function(r){switch(r.label){case 0:return t=e.id,n=e.value,(0,d.isEmptyString)(n)?[2]:[4,q({url:"".concat(I,"/").concat(t),method:"PUT",data:JSON.stringify({name:n})})];case 1:return[2,r.sent()]}}))}));return function(t){return e.apply(this,arguments)}}(),oe=function(){var e=y((function(e){var t,n;return S(this,(function(r){switch(r.label){case 0:return t=e.id,(n=e.data).name&&(0,d.isEmptyString)(n.name)?[2]:[4,q({url:"".concat(I,"/").concat(t),method:"PUT",data:JSON.stringify(b({},i()(n)))})];case 1:return[2,r.sent()]}}))}));return function(t){return e.apply(this,arguments)}}(),ie=function(){var e=y((function(e){var t,n;return S(this,(function(r){switch(r.label){case 0:return t=e.id,n=e.data,[4,q({url:"".concat(I,"/").concat(t,"/pages/lang"),method:"PATCH",data:JSON.stringify(b({},i()(n)))})];case 1:return[2,r.sent()]}}))}));return function(t){return e.apply(this,arguments)}}(),ue=function(){var e=y((function(e){var t,n,r,o,i,u,c,s,l,f,d,p;return S(this,(function(v){switch(v.label){case 0:return n=e.sourceId,r=e.totalLimit,o=e.page,i=e.orderBy,u=e.orderType,c=e.term,s=e.signal,l="".concat(I,"/").concat(n,"/page"),f=o?"".concat(l,"?page=").concat(o):"".concat(l,"?limit=").concat(r),i&&u&&(f="".concat(f,"&order_by=").concat(i,"&order_type=").concat(u)),c&&(f="".concat(f,"&term=").concat(c)),[4,q({url:f,signal:s})];case 1:return d=v.sent(),[2,a()({items:null!==(p=null==d||null===(t=d._embedded)||void 0===t?void 0:t.pages)&&void 0!==p?p:null==d?void 0:d.pages[0],currentPage:null==d?void 0:d._page,pageCount:null==d?void 0:d._page_count,isNextPageAvailable:(null==d?void 0:d._page)?(null==d?void 0:d._page)<(null==d?void 0:d._page_count):null==d?void 0:d.is_next_page_available})]}}))}));return function(t){return e.apply(this,arguments)}}(),ce=function(e){var t=e.sourceId,n=e.pageId;return q({url:"".concat(I,"/").concat(t,"/page/").concat(n)})},se=function(e){var t=e.sourceId,n=e.pageId,r=e.data;return q({url:"".concat(I,"/").concat(t,"/page/").concat(n),method:"PATCH",data:JSON.stringify(b({},i()(r)))})},le=function(e){var t=e.sourceId,n=e.pageId;return q({url:"".concat(I,"/").concat(t,"/page/").concat(n),method:"DELETE"})},fe=function(e){var t=e.sourceId,n=e.pageId;return q({url:"".concat(I,"/").concat(t,"/page/").concat(n,"/reload"),method:"PUT"})},de=function(e){var t=e.sourceId,n=e.data;return q({url:"".concat(I,"/").concat(t,"/pages/delete"),method:"PATCH",data:JSON.stringify(b({},i()(n)))})},pe=function(e){var t=e.sourceId,n=e.data;return q({url:"".concat(I,"/").concat(t,"/pages/disable"),method:"PATCH",data:JSON.stringify(b({},i()(n)))})},ve=function(){var e=y((function(e){return S(this,(function(t){switch(t.label){case 0:return[4,q({url:M,method:"POST",data:JSON.stringify({is_ai_task_suggestion_enabled:e})})];case 1:return t.sent(),[2]}}))}));return function(t){return e.apply(this,arguments)}}(),he=function(){var e=y((function(){return S(this,(function(e){switch(e.label){case 0:return[4,B({url:M})];case 1:return[2,e.sent()]}}))}));return function(){return e.apply(this,arguments)}}(),ye=function(){var e=y((function(e){return S(this,(function(t){switch(t.label){case 0:return[4,q({url:"".concat(A,"/settings"),method:"POST",data:JSON.stringify({ai_answer_enable:e})})];case 1:return[2,t.sent()]}}))}));return function(t){return e.apply(this,arguments)}}(),ge=function(){var e=y((function(){return S(this,(function(e){switch(e.label){case 0:return[4,q({url:"/api/v4/features",method:"POST",data:JSON.stringify({is_ai_user_onboarding_completed:{is_available:!0,user_id:APP.constant("user").id}})})];case 1:return e.sent(),[2]}}))}));return function(){return e.apply(this,arguments)}}(),be=function(){return q({url:D})},Se=function(e){return q({url:D,method:"POST",data:JSON.stringify(b({},i()(e))),contentType:"application/json"})},me=function(e){return q({url:D,method:"PUT",data:JSON.stringify(b({},i()(e))),contentType:"application/json"})},we=function(e){return q({url:"".concat(D,"/").concat(e),method:"DELETE",contentType:"application/json"})},Ee=function(e){var t=e.id,n=e.data;return q({url:"".concat(D,"/").concat(t),method:"PUT",data:JSON.stringify(b({},i()(n))),contentType:"application/json"})},_e=function(){return v.ajax({url:"/ajax/v4/packages/kommo_ai_trial/connect",method:"POST"})},Ae=function(e){var t={type:e};return v.ajax({url:"/ajax/v4/airewriter/user_request",method:"POST",data:JSON.stringify(t),contentType:"application/json"})},Te=function(){var e={is_kait_expired_modal_shown:{is_available:!0,user_id:APP.constant("user").id}};return v.ajax({url:"/ajax/v4/features",method:"POST",data:JSON.stringify(e),contentType:"application/json"})},Oe=function(){var e=y((function(e){return S(this,(function(t){switch(t.label){case 0:return[4,W({url:L,data:e})];case 1:return t.sent(),[2]}}))}));return function(t){return e.apply(this,arguments)}}(),Pe=function(){var e=y((function(){return S(this,(function(e){switch(e.label){case 0:return[4,B({url:U})];case 1:return[2,e.sent()]}}))}));return function(){return e.apply(this,arguments)}}(),Re=function(){var e=y((function(e){return S(this,(function(t){switch(t.label){case 0:return[4,W({url:U,data:e})];case 1:return t.sent(),[2]}}))}));return function(t){return e.apply(this,arguments)}}()},292562:(e,t,n)=>{n.r(t),n.d(t,{AiSourceEntities:()=>r,AnswerUsingStatuses:()=>f,AvailableSummarizeEntityTypes:()=>l,LinkSourceEntity:()=>y,LinkSourcesActions:()=>h,RewriteStatusRequest:()=>c,RewriterErrorCodes:()=>s,SourceErrorStatus:()=>i,SourceLoadingStatus:()=>o,SourceOrigins:()=>u,SourcesType:()=>a,TaskTypes:()=>p,TaskUsingStatuses:()=>d,TrialUserRequest:()=>v});var r,a,o,i,u,c,s,l,f,d,p,v,h,y,g=n(19050);!function(e){e[e.UNSET=0]="UNSET",e[e.SUGGESTED_REPLY=1]="SUGGESTED_REPLY",e[e.AGENT=2]="AGENT",e[e.SUGGESTED_REPLY_AGENT=3]="SUGGESTED_REPLY_AGENT"}(r||(r={})),function(e){e[e.URL=1]="URL",e[e.FILE=2]="FILE",e[e.TEXT=3]="TEXT"}(a||(a={})),function(e){e[e.IN_PROGRESS=1]="IN_PROGRESS",e[e.SUCCESS=2]="SUCCESS",e[e.FAIL=3]="FAIL",e[e.UPDATE=4]="UPDATE",e[e.STOP=5]="STOP",e[e.DELETED=6]="DELETED",e[e.UPDATE_CANCEL=7]="UPDATE_CANCEL"}(o||(o={})),function(e){e[e.SOMETHING_WENT_WRONG=1]="SOMETHING_WENT_WRONG",e[e.INVALID_LANG=2]="INVALID_LANG",e[e.SITE_NOT_AVAILABLE=3]="SITE_NOT_AVAILABLE",e[e.PARSE_FAIL=4]="PARSE_FAIL",e[e.UNSUPPORTED_FORMAT=5]="UNSUPPORTED_FORMAT",e[e.LARGE_FILE=6]="LARGE_FILE",e[e.INVALID_FILE_FORMAT=7]="INVALID_FILE_FORMAT",e[e.BROKEN_FILE=8]="BROKEN_FILE",e[e.TOO_MANY_FILES=9]="TOO_MANY_FILES"}(i||(i={})),function(e){e.USER="user",e.SHOPIFY="shopify",e.WOOCOMMERCE="woocom",e.NUVEMSHOP="nuvemshop",e.LAZADA="lazada"}(u||(u={})),function(e){e.SUCCESS="success",e.PENDING="pending",e.ERROR="error",e.LOADING="loading"}(c||(c={})),function(e){e[e.NOT_FOUND=404]="NOT_FOUND",e[e.PAYMENT_REQUIRED=402]="PAYMENT_REQUIRED",e[e.VALIDATION_ERROR=400]="VALIDATION_ERROR"}(s||(s={})),function(e){e[e.LEADS=g.default.leads]="LEADS",e[e.CUSTOMERS=g.default.customers]="CUSTOMERS",e[e.CONTACTS=g.default.contacts]="CONTACTS"}(l||(l={})),function(e){e[e.OPEN_ANSWER=1]="OPEN_ANSWER",e[e.SHOW_ANSWER=2]="SHOW_ANSWER",e[e.SEND_ANSWER=3]="SEND_ANSWER",e[e.EDIT_ANSWER=4]="EDIT_ANSWER",e[e.SKIP_ANSWER=5]="SKIP_ANSWER",e[e.CLOSE_ANSWER=6]="CLOSE_ANSWER"}(f||(f={})),function(e){e[e.CORRECT_TASK=1]="CORRECT_TASK",e[e.EDIT_TASK=2]="EDIT_TASK"}(d||(d={})),function(e){e[e.FOLLOW_UP=1]="FOLLOW_UP",e[e.MEET=2]="MEET",e[e.CUSTOM=3]="CUSTOM"}(p||(p={})),function(e){e.UPGRADE_REQUESTED="upgrade_requested",e.TRIAL_REQUESTED="trial_requested",e.AGENT_REQUESTED="ai_agent_requested"}(v||(v={})),function(e){e.LINK="link",e.UNLINK="unlink"}(h||(h={})),function(e){e.AGENT="agent",e.ANSWER_SOURCE="answer_source"}(y||(y={}))},700682:(e,t,n)=>{n.r(t),n.d(t,{checkAgentPreviewTasks:()=>C,clearAgentPreviewDialog:()=>L,disableAiAgent:()=>N,getAgentPreviewMessages:()=>k,getAgentSettings:()=>_,getAgentSources:()=>w,getAllChannels:()=>P,getBaseAgentSettings:()=>T,getIsAgentSourcesEditable:()=>D,getIsAiAgentEnabled:()=>I,importAgentKnowledge:()=>R,resetAgentSources:()=>E,saveAgentSettings:()=>A,saveBaseAgentSettings:()=>O,sendAgentPreviewMessage:()=>x});var r=n(629133),a=n.n(r),o=n(104737),i=n(604874),u=n(661533);function c(e,t,n,r,a,o,i){try{var u=e[o](i),c=u.value}catch(e){return void n(e)}u.done?t(c):Promise.resolve(c).then(r,a)}function s(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var o=e.apply(t,n);function i(e){c(o,r,a,i,u,"next",e)}function u(e){c(o,r,a,i,u,"throw",e)}i(void 0)}))}}function l(e,t){var n,r,a,o,i={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return o={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function u(o){return function(u){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(a=2&o[0]?r.return:o[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,o[1])).done)return a;switch(r=0,a&&(o=[2&o[0],a.value]),o[0]){case 0:case 1:a=o;break;case 4:return i.label++,{value:o[1],done:!1};case 5:i.label++,r=o[1],o=[0];continue;case 7:o=i.ops.pop(),i.trys.pop();continue;default:if(!((a=(a=i.trys).length>0&&a[a.length-1])||6!==o[0]&&2!==o[0])){i=0;continue}if(3===o[0]&&(!a||o[1]>a[0]&&o[1]<a[3])){i.label=o[1];break}if(6===o[0]&&i.label<a[1]){i.label=a[1],a=o;break}if(a&&i.label<a[2]){i.label=a[2],i.ops.push(o);break}a[2]&&i.ops.pop(),i.trys.pop();continue}o=t.call(e,i)}catch(e){o=[6,e],r=0}finally{n=a=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,u])}}}var f="".concat(i.BASE_URL,"/api/v1/agent"),d="".concat(f,"/knowledge"),p="".concat(f,"/settings"),v="".concat(d,"/import"),h="".concat(d,"/reset"),y="".concat("/ajax/v4/airewriter/agent","/settings"),g="/ajax/v4/talks/agent/multiple",b={detailAgentSettings:null,baseAgentSettings:null},S=function(){b.detailAgentSettings=null,b.baseAgentSettings=null};u(document).on("page:entity_changed",S);var m,w=(m=s((function(){return l(this,(function(e){switch(e.label){case 0:return[4,(0,i.get)({url:d})];case 1:return[2,e.sent()]}}))})),function(){return m.apply(this,arguments)}),E=function(){var e=s((function(e){return l(this,(function(t){switch(t.label){case 0:return[4,(0,i.post)({url:h,data:{origin:e}})];case 1:return t.sent(),[2]}}))}));return function(t){return e.apply(this,arguments)}}(),_=function(){var e=s((function(e){var t;return l(this,(function(n){switch(n.label){case 0:return t=b.detailAgentSettings,e&&!a().isNull(t)?[2,t]:(b.detailAgentSettings=(0,i.get)({url:p}),[4,b.detailAgentSettings]);case 1:return[2,n.sent()]}}))}));return function(t){return e.apply(this,arguments)}}(),A=function(e){return S(),(0,i.post)({url:p,data:e})},T=function(){var e=s((function(){var e;return l(this,(function(t){switch(t.label){case 0:return e=b.baseAgentSettings,a().isNull(e)?(b.baseAgentSettings=(0,i.get)({url:y}),[4,b.baseAgentSettings]):[2,e];case 1:return[2,t.sent()]}}))}));return function(){return e.apply(this,arguments)}}(),O=function(e){return S(),(0,i.post)({url:y,data:e})},P=function(){var e=s((function(){var e,t;return l(this,(function(n){switch(n.label){case 0:return[4,o.default.request({url:"/ajax/v4/sources?only=chats&with=supports_delivery_notification,is_widget_disabled"})];case 1:return[2,(null==(t=n.sent())||null===(e=t.Embedded)||void 0===e?void 0:e.sources)||[]]}}))}));return function(){return e.apply(this,arguments)}}(),R=function(){var e=s((function(e){return l(this,(function(t){switch(t.label){case 0:return[4,(0,i.post)({url:v,data:e})];case 1:return t.sent(),[2]}}))}));return function(t){return e.apply(this,arguments)}}(),I=function(e){var t=e.talkIds;return o.default.request({url:"".concat(g),method:"POST",data:{talk_ids:t},contentType:"application/json"})},N=function(e){var t=e.talkIds;return o.default.request({url:"".concat(g,"/cancel"),method:"POST",data:{talk_ids:t},contentType:"application/json"})},k=function(){var e=s((function(){return l(this,(function(e){return[2,(0,i.get)({url:"".concat(i.BASE_URL,"/api/v1/agent/preview/messages")})]}))}));return function(){return e.apply(this,arguments)}}(),C=function(){var e=s((function(e){var t;return l(this,(function(n){return t=e.taskId,[2,(0,i.get)({url:"".concat(i.BASE_URL,"/api/v1/agent/preview/execute/").concat(t)})]}))}));return function(t){return e.apply(this,arguments)}}(),x=function(){var e=s((function(e){return l(this,(function(t){return[2,(0,i.post)({url:"".concat(i.BASE_URL,"/api/v1/agent/preview/execute"),data:e})]}))}));return function(t){return e.apply(this,arguments)}}(),L=function(){var e=s((function(){return l(this,(function(e){return[2,(0,i.get)({url:"".concat(i.BASE_URL,"/api/v1/agent/preview/clean"),method:"DELETE"})]}))}));return function(){return e.apply(this,arguments)}}(),D=function(){return(0,i.get)({url:"".concat(i.BASE_URL,"/api/v1/features/status")})}},908658:(e,t,n)=>{var r,a;n.r(t),n.d(t,{PreviewMessageTypes:()=>a,ProductsImportStatus:()=>r}),function(e){e[e.NONE=0]="NONE",e[e.ACCEPTED=1]="ACCEPTED",e[e.IN_PROGRESS=2]="IN_PROGRESS",e[e.COMPLETED=3]="COMPLETED"}(r||(r={})),function(e){e.Incoming="incoming",e.Outgoing="outgoing"}(a||(a={}))},653140:(e,t,n)=>{n.r(t),n.d(t,{AgentSettings:()=>r.AgentSettings,BaseAgentSettings:()=>r.BaseAgentSettings});var r=n(908658)},89217:(e,t,n)=>{n.r(t),n.d(t,{DEFAULT_VIEWING_TIME:()=>r});var r=.1},593444:(e,t,n)=>{n.r(t),n.d(t,{getRewriterRequest:()=>d,postRewriterRequest:()=>v});var r=n(717068),a=n(445368),o=n(604874),i=n(292562);function u(e,t,n,r,a,o,i){try{var u=e[o](i),c=u.value}catch(e){return void n(e)}u.done?t(c):Promise.resolve(c).then(r,a)}function c(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var o=e.apply(t,n);function i(e){u(o,r,a,i,c,"next",e)}function c(e){u(o,r,a,i,c,"throw",e)}i(void 0)}))}}function s(e,t){var n,r,a,o,i={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return o={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function u(o){return function(u){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(a=2&o[0]?r.return:o[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,o[1])).done)return a;switch(r=0,a&&(o=[2&o[0],a.value]),o[0]){case 0:case 1:a=o;break;case 4:return i.label++,{value:o[1],done:!1};case 5:i.label++,r=o[1],o=[0];continue;case 7:o=i.ops.pop(),i.trys.pop();continue;default:if(!((a=(a=i.trys).length>0&&a[a.length-1])||6!==o[0]&&2!==o[0])){i=0;continue}if(3===o[0]&&(!a||o[1]>a[0]&&o[1]<a[3])){i.label=o[1];break}if(6===o[0]&&i.label<a[1]){i.label=a[1],a=o;break}if(a&&i.label<a[2]){i.label=a[2],i.ops.push(o);break}a[2]&&i.ops.pop(),i.trys.pop();continue}o=t.call(e,i)}catch(e){o=[6,e],r=0}finally{n=a=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,u])}}}var l,f=(l=c((function(e){var t,n,r,u,c,l,f,d,p,v,h,y,g,b,S,m,w,E,_;return s(this,(function(s){switch(s.label){case 0:t=e.jobUuid,n=e.maxRequestCount,r=e.url,u=e.resolve,c=e.reject,l=e.requestCount,f=e.incrementRequestCount,d=e.clearRequestCount,s.label=1;case 1:return s.trys.push([1,3,,4]),[4,(0,o.get)({url:"".concat(r,"/").concat(t)})];case 2:switch(p=s.sent(),v=p.status,h=p.answer,y=void 0===h?"":h,g=p.detail,b=void 0===g?"":g,S=p.answerId,m=p.usedReferences,v){case i.RewriteStatusRequest.ERROR:d(),c({detail:b});break;case i.RewriteStatusRequest.PENDING:l===n?(d(),c({detail:(0,a.i18n)("Something went wrong"),code:i.RewriterErrorCodes.NOT_FOUND})):f();break;case i.RewriteStatusRequest.LOADING:case i.RewriteStatusRequest.SUCCESS:y&&d()}return u({answer:y,status:v,answerId:S,usedReferences:m}),[3,4];case 3:return w=s.sent(),_=(null==w||null===(E=w.responseJSON)||void 0===E?void 0:E.detail)?w.responseJSON:{detail:(0,a.i18n)("Something went wrong"),code:i.RewriterErrorCodes.NOT_FOUND},d(),c(_),[3,4];case 4:return[2]}}))})),function(e){return l.apply(this,arguments)}),d=function(){var e=c((function(e){var t,n,a,o,i,u,c,l,d,p;return s(this,(function(s){return t=e.jobUuid,n=e.maxRequestCount,a=e.url,o=e.requestCount,i=e.clearRequestCount,u=e.incrementRequestCount,c=new r.SplitPromise,l=c.promise,d=c.resolve,p=c.reject,f({jobUuid:t,resolve:d,reject:p,maxRequestCount:n,url:a,requestCount:o,clearRequestCount:i,incrementRequestCount:u}),[2,l]}))}));return function(t){return e.apply(this,arguments)}}(),p=function(){var e=c((function(e){var t,n,r,u,c,l,f,d,p,v,h,y,g,b,S,m,w,E;return s(this,(function(s){switch(s.label){case 0:t=e.text,n=e.id,r=e.resolve,u=e.reject,s.label=1;case 1:return s.trys.push([1,3,,4]),[4,(0,o.post)({url:o.REWRITER_URL,data:{rewriteTypes:[n],text:t}})];case 2:return c=s.sent(),l=c.status,f=c.answer,d=void 0===f?"":f,p=c.jobUuid,v=void 0===p?"":p,h=c.detail,y=void 0===h?"":h,g=c.answerId,b=c.usedReferences,S=c.code,d||l===i.RewriteStatusRequest.PENDING?(r({answer:d,status:l,jobUuid:v,answerId:g,usedReferences:b}),[2]):(!y&&v||u({detail:y,code:S}),[3,4]);case 3:return m=s.sent(),E=(null==m||null===(w=m.responseJSON)||void 0===w?void 0:w.detail)?m.responseJSON:{detail:(0,a.i18n)("Something went wrong"),code:i.RewriterErrorCodes.NOT_FOUND},u(E),[3,4];case 4:return[2]}}))}));return function(t){return e.apply(this,arguments)}}(),v=function(){var e=c((function(e){var t,n,a,o,i,u;return s(this,(function(c){return t=e.text,n=e.id,a=new r.SplitPromise,o=a.promise,i=a.resolve,u=a.reject,p({text:t,id:n,resolve:i,reject:u}),[2,o]}))}));return function(t){return e.apply(this,arguments)}}()},960190:(e,t,n)=>{n.r(t),n.d(t,{AgentSetupTypes:()=>c.AgentSetupTypes,AiSourceEntities:()=>d.AiSourceEntities,AvailableSummarizeEntityTypes:()=>d.AvailableSummarizeEntityTypes,BaseAgentSettings:()=>l.BaseAgentSettings,KNOWLEDGE_BASE_DEFAULT_URL:()=>f.KNOWLEDGE_BASE_DEFAULT_URL,LinkSourceEntity:()=>d.LinkSourceEntity,LinkSourcesActions:()=>d.LinkSourcesActions,PreviewMessage:()=>p.PreviewMessage,PreviewMessageTypes:()=>p.PreviewMessageTypes,ProductsImportStatus:()=>p.ProductsImportStatus,REWRITER_URL:()=>f.REWRITER_URL,RewriteStatusRequest:()=>d.RewriteStatusRequest,RewriterError:()=>d.RewriterError,RewriterErrorCodes:()=>d.RewriterErrorCodes,SourceErrorStatus:()=>d.SourceErrorStatus,SourceLoadingStatus:()=>d.SourceLoadingStatus,SourceOrigins:()=>d.SourceOrigins,SourcesType:()=>d.SourcesType,TaskTypes:()=>d.TaskTypes,TaskUsingStatuses:()=>d.TaskUsingStatuses,addSource:()=>f.addSource,cancelSourceUploading:()=>f.cancelSourceUploading,checkAgentPreviewTasks:()=>s.checkAgentPreviewTasks,clearAgentPreviewDialog:()=>s.clearAgentPreviewDialog,connectAiTrial:()=>f.connectAiTrial,deleteMultipleRow:()=>f.deleteMultipleRow,deleteRow:()=>f.deleteRow,disableAiAgent:()=>s.disableAiAgent,get:()=>f.get,getAgentPreviewMessages:()=>s.getAgentPreviewMessages,getAgentSettings:()=>s.getAgentSettings,getAgentSources:()=>s.getAgentSources,getAllChannels:()=>s.getAllChannels,getBaseAgentSettings:()=>s.getBaseAgentSettings,getEmotionDetectionSettings:()=>f.getEmotionDetectionSettings,getIsAgentSourcesEditable:()=>s.getIsAgentSourcesEditable,getIsAiAgentEnabled:()=>s.getIsAiAgentEnabled,getPage:()=>f.getPage,getRewriterRequest:()=>i.getRewriterRequest,getSourcePages:()=>f.getSourcePages,getSources:()=>f.getSources,getTaskSuggestionSettings:()=>f.getTaskSuggestionSettings,grammar:()=>f.grammar,importAgentKnowledge:()=>s.importAgentKnowledge,linkSources:()=>f.linkSources,mark:()=>f.mark,markAnswer:()=>a.default,markRewriter:()=>r.default,markTrialExpiredShown:()=>f.markTrialExpiredShown,post:()=>f.post,postAnswerRequest:()=>o.default,postRewriterRequest:()=>i.postRewriterRequest,profanity:()=>f.profanity,reloadPage:()=>f.reloadPage,remove:()=>f.remove,removeMultiplePage:()=>f.removeMultiplePage,removePage:()=>f.removePage,requestAiTrial:()=>f.requestAiTrial,resetAgentSources:()=>s.resetAgentSources,saveAgentSettings:()=>s.saveAgentSettings,saveBaseAgentSettings:()=>s.saveBaseAgentSettings,sendAgentPreviewMessage:()=>s.sendAgentPreviewMessage,sendAgentSurveyIsSeenMetric:()=>u.sendAgentSurveyIsSeenMetric,sendFirstTimeAgentSetupMetric:()=>c.sendFirstTimeAgentSetupMetric,setAnswerOnboarding:()=>f.setAnswerOnboarding,summarize:()=>f.summarize,switchMultiplePageAvailability:()=>f.switchMultiplePageAvailability,switchMultipleSourceAvailability:()=>f.switchMultipleSourceAvailability,switchSourceAvailability:()=>f.switchSourceAvailability,toggleAnswerSettings:()=>f.toggleAnswerSettings,toggleEmotionDetectionSettings:()=>f.toggleEmotionDetectionSettings,toggleTaskSuggestionSettings:()=>f.toggleTaskSuggestionSettings,tone:()=>f.tone,updateNameSource:()=>f.updateNameSource,updatePage:()=>f.updatePage,updateSourceData:()=>f.updateSourceData,updateSourcePagesLang:()=>f.updateSourcePagesLang,updateUrlSource:()=>f.updateUrlSource});var r=n(872767),a=n(743773),o=n(746716),i=n(593444),u=n(508459),c=n(584840),s=n(700682),l=n(653140),f=n(604874),d=n(292562),p=n(908658)},743773:(e,t,n)=>{n.r(t),n.d(t,{default:()=>a});var r=n(604874);const a=function(e){var t=e.data,n=e.answerId;(0,r.mark)({url:"".concat(r.MARK_ANSWER_URL,"/").concat(n),data:t})}},872767:(e,t,n)=>{n.r(t),n.d(t,{default:()=>o});var r=n(604874);function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const o=function(e){var t,n=e.currentText,o=e.rewriterAnswer,i=o.answer,u=o.answerId;t=n===i?{data:{isUsed:!0}}:{data:{isUsed:!1,userText:n}},(0,r.mark)(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){a(e,t,n[t])}))}return e}({url:"".concat(r.MARK_REWRITER_URL,"/").concat(u)},t))}},746716:(e,t,n)=>{n.r(t),n.d(t,{default:()=>v,postGenerateAnswerRequest:()=>p});var r=n(717068),a=n(445368),o=n(292562),i=n(604874);function u(e,t,n,r,a,o,i){try{var u=e[o](i),c=u.value}catch(e){return void n(e)}u.done?t(c):Promise.resolve(c).then(r,a)}function c(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var o=e.apply(t,n);function i(e){u(o,r,a,i,c,"next",e)}function c(e){u(o,r,a,i,c,"throw",e)}i(void 0)}))}}function s(e,t){var n,r,a,o,i={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return o={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function u(o){return function(u){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(a=2&o[0]?r.return:o[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,o[1])).done)return a;switch(r=0,a&&(o=[2&o[0],a.value]),o[0]){case 0:case 1:a=o;break;case 4:return i.label++,{value:o[1],done:!1};case 5:i.label++,r=o[1],o=[0];continue;case 7:o=i.ops.pop(),i.trys.pop();continue;default:if(!((a=(a=i.trys).length>0&&a[a.length-1])||6!==o[0]&&2!==o[0])){i=0;continue}if(3===o[0]&&(!a||o[1]>a[0]&&o[1]<a[3])){i.label=o[1];break}if(6===o[0]&&i.label<a[1]){i.label=a[1],a=o;break}if(a&&i.label<a[2]){i.label=a[2],i.ops.push(o);break}a[2]&&i.ops.pop(),i.trys.pop();continue}o=t.call(e,i)}catch(e){o=[6,e],r=0}finally{n=a=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,u])}}}var l,f=(l=c((function(e){var t,n,r,u,c,l,f,d,p,v,h,y,g,b,S,m,w,E;return s(this,(function(s){switch(s.label){case 0:t=e.url,n=void 0===t?i.ANSWER_URL:t,r=e.data,u=e.resolve,c=e.reject,s.label=1;case 1:return s.trys.push([1,3,,4]),[4,(0,i.post)({url:n,data:r})];case 2:return l=s.sent(),f=l.status,d=l.answer,p=void 0===d?"":d,v=l.jobUuid,h=void 0===v?"":v,y=l.detail,g=void 0===y?"":y,b=l.answerId,S=l.usedReferences,m=l.code,p||f===o.RewriteStatusRequest.PENDING||f===o.RewriteStatusRequest.LOADING?(u({answer:p,status:f,usedReferences:S,jobUuid:h,answerId:b}),[2]):(!g&&h||c({detail:g,code:m}),[3,4]);case 3:return w=s.sent(),E=w.detail?w:{detail:(0,a.i18n)("Something went wrong. Please Try again."),code:o.RewriterErrorCodes.NOT_FOUND},c(E),[3,4];case 4:return[2]}}))})),function(e){return l.apply(this,arguments)}),d=function(){var e=c((function(e){var t,n,a,o,i,u,c,l;return s(this,(function(s){return t=e.lastMessageId,n=e.talkId,a=e.entityId,o=e.entityType,i=new r.SplitPromise,u=i.promise,c=i.resolve,l=i.reject,f({data:{talkId:n,lastMessageId:t,entityId:a,entityType:o},resolve:c,reject:l}),[2,u]}))}));return function(t){return e.apply(this,arguments)}}(),p=function(){var e=c((function(e){var t,n,a,o,u,c,l,d;return s(this,(function(s){return t=e.text,n=e.talkId,a=e.entityId,o=e.entityType,u=new r.SplitPromise,c=u.promise,l=u.resolve,d=u.reject,f({data:{talkId:n,text:t,entityId:a,entityType:o},url:"".concat(i.ANSWER_URL,"/direct"),resolve:l,reject:d}),[2,c]}))}));return function(t){return e.apply(this,arguments)}}();const v=d},508459:(e,t,n)=>{n.r(t),n.d(t,{sendAgentSurveyIsSeenMetric:()=>s});var r=n(320526),a=n(417438),o=n(89217);function i(e,t,n,r,a,o,i){try{var u=e[o](i),c=u.value}catch(e){return void n(e)}u.done?t(c):Promise.resolve(c).then(r,a)}var u,c,s=(u=function(){return function(e,t){var n,r,a,o,i={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return o={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function u(o){return function(u){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(a=2&o[0]?r.return:o[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,o[1])).done)return a;switch(r=0,a&&(o=[2&o[0],a.value]),o[0]){case 0:case 1:a=o;break;case 4:return i.label++,{value:o[1],done:!1};case 5:i.label++,r=o[1],o=[0];continue;case 7:o=i.ops.pop(),i.trys.pop();continue;default:if(!((a=(a=i.trys).length>0&&a[a.length-1])||6!==o[0]&&2!==o[0])){i=0;continue}if(3===o[0]&&(!a||o[1]>a[0]&&o[1]<a[3])){i.label=o[1];break}if(6===o[0]&&i.label<a[1]){i.label=a[1],a=o;break}if(a&&i.label<a[2]){i.label=a[2],i.ops.push(o);break}a[2]&&i.ops.pop(),i.trys.pop();continue}o=t.call(e,i)}catch(e){o=[6,e],r=0}finally{n=a=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,u])}}}(this,(function(e){switch(e.label){case 0:return e.trys.push([0,2,,3]),[4,(0,r.saveSurveyResult)({name:a.Surveys.AGENT_SURVEY_SEEN,data:{isSeen:!0},metadata:{viewingTime:o.DEFAULT_VIEWING_TIME,viewingUrl:window.location.pathname},options:{isEnableCooldown:!1}})];case 1:case 2:return e.sent(),[3,3];case 3:return[2]}}))},c=function(){var e=this,t=arguments;return new Promise((function(n,r){var a=u.apply(e,t);function o(e){i(a,n,r,o,c,"next",e)}function c(e){i(a,n,r,o,c,"throw",e)}o(void 0)}))},function(){return c.apply(this,arguments)})},584840:(e,t,n)=>{n.r(t),n.d(t,{AgentSetupTypes:()=>a.AgentSetupTypes,sendFirstTimeAgentSetupMetric:()=>r.sendFirstTimeAgentSetupMetric});var r=n(595679),a=n(809114)},595679:(e,t,n)=>{n.r(t),n.d(t,{sendFirstTimeAgentSetupMetric:()=>s});var r=n(320526),a=n(417438),o=n(89217);function i(e,t,n,r,a,o,i){try{var u=e[o](i),c=u.value}catch(e){return void n(e)}u.done?t(c):Promise.resolve(c).then(r,a)}var u,c,s=(u=function(e){return function(e,t){var n,r,a,o,i={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return o={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function u(o){return function(u){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(a=2&o[0]?r.return:o[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,o[1])).done)return a;switch(r=0,a&&(o=[2&o[0],a.value]),o[0]){case 0:case 1:a=o;break;case 4:return i.label++,{value:o[1],done:!1};case 5:i.label++,r=o[1],o=[0];continue;case 7:o=i.ops.pop(),i.trys.pop();continue;default:if(!((a=(a=i.trys).length>0&&a[a.length-1])||6!==o[0]&&2!==o[0])){i=0;continue}if(3===o[0]&&(!a||o[1]>a[0]&&o[1]<a[3])){i.label=o[1];break}if(6===o[0]&&i.label<a[1]){i.label=a[1],a=o;break}if(a&&i.label<a[2]){i.label=a[2],i.ops.push(o);break}a[2]&&i.ops.pop(),i.trys.pop();continue}o=t.call(e,i)}catch(e){o=[6,e],r=0}finally{n=a=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,u])}}}(this,(function(t){switch(t.label){case 0:return t.trys.push([0,2,,3]),[4,(0,r.saveSurveyResult)({name:a.Surveys.FIRST_TIME_AGENT_SETUP,data:{setup:e},metadata:{viewingTime:o.DEFAULT_VIEWING_TIME,viewingUrl:window.location.pathname},options:{isEnableCooldown:!1}})];case 1:case 2:return t.sent(),[3,3];case 3:return[2]}}))},c=function(){var e=this,t=arguments;return new Promise((function(n,r){var a=u.apply(e,t);function o(e){i(a,n,r,o,c,"next",e)}function c(e){i(a,n,r,o,c,"throw",e)}o(void 0)}))},function(e){return c.apply(this,arguments)})},809114:(e,t,n)=>{var r;n.r(t),n.d(t,{AgentSetupTypes:()=>r}),function(e){e.FROM_SCRATCH="from_scratch",e.TEMPLATE="template"}(r||(r={}))},245387:(e,t,n)=>{n.r(t),n.d(t,{DRIVE_BASE_URL:()=>r,VIDEO_EXTENSIONS:()=>o,VIDEO_MIME_TYPES:()=>a});var r=APP.constant("amocrm_drive").url,a=["video/3gp","video/3gpp","video/avi","video/mp4","video/mpeg","video/quicktime","video/webm","video/x-msvideo"],o=[".3gp",".avi",".mkv",".mp4",".mpeg",".mov",".webm"]},646472:(e,t,n)=>{n.r(t),n.d(t,{checkCleaningRules:()=>y,deleteFile:()=>w,deleteFiles:()=>E,getFileData:()=>S,getFilesList:()=>m,uploadFile:()=>b});var r=n(629133),a=n.n(r),o=n(245387),i=n(535882),u=n(782579),c=n(286150);function s(e,t,n,r,a,o,i){try{var u=e[o](i),c=u.value}catch(e){return void n(e)}u.done?t(c):Promise.resolve(c).then(r,a)}function l(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var o=e.apply(t,n);function i(e){s(o,r,a,i,u,"next",e)}function u(e){s(o,r,a,i,u,"throw",e)}i(void 0)}))}}function f(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function d(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){f(e,t,n[t])}))}return e}function p(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):function(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n.push.apply(n,r)}return n}(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})),e}function v(e,t){var n,r,a,o,i={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return o={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function u(o){return function(u){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(a=2&o[0]?r.return:o[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,o[1])).done)return a;switch(r=0,a&&(o=[2&o[0],a.value]),o[0]){case 0:case 1:a=o;break;case 4:return i.label++,{value:o[1],done:!1};case 5:i.label++,r=o[1],o=[0];continue;case 7:o=i.ops.pop(),i.trys.pop();continue;default:if(!((a=(a=i.trys).length>0&&a[a.length-1])||6!==o[0]&&2!==o[0])){i=0;continue}if(3===o[0]&&(!a||o[1]>a[0]&&o[1]<a[3])){i.label=o[1];break}if(6===o[0]&&i.label<a[1]){i.label=a[1],a=o;break}if(a&&i.label<a[2]){i.label=a[2],i.ops.push(o);break}a[2]&&i.ops.pop(),i.trys.pop();continue}o=t.call(e,i)}catch(e){o=[6,e],r=0}finally{n=a=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,u])}}}var h,y=(h=l((function(e){var t;return v(this,(function(n){return t=e.data,[2,(0,u.authorizedRequest)({data:{url:"".concat(o.DRIVE_BASE_URL,"/v1.0/cleaning_rules/check"),method:"POST",data:t}})()]}))})),function(e){return h.apply(this,arguments)}),g=function(){var e=l((function(e){var t,n,r,o,c,s,l,f,h,y,b,S,m,w,E,_,A,T,O,P,R,I,N,k,C;return v(this,(function(v){switch(v.label){case 0:if(t=e.settings,n=e.currentPart,r=void 0===n?0:n,o=e.errors,c=void 0===o?{session:!1}:o,s=t.url,l=t.arrayBuffer,f=t.fileName,h=t.fileSize,y=t.partSize,b=t.withPreview,S=t.onProgress,m=void 0===S?a().noop:S,w=t.onLoadFinish,E=void 0===w?a().noop:w,(_=t.isCancelled)())return[2,!1];T=function(){return(0,u.authorizedRequest)({data:{url:s,method:"POST",data:l.slice(y*r,y*(r+1)),processData:!1,beforeSend:function(e){e.abort=function(){_=function(){return!0}}},isFormDataPayload:!0,shouldSnakeize:!1}})()},v.label=1;case 1:return v.trys.push([1,3,,10]),[4,T()];case 2:return A=v.sent(),[3,10];case 3:switch(O=v.sent(),P=(O||{}).status,!0){case 404===P&&!c.session:return[3,4];case 500===P&&c.retries&&c.retries<5:return[3,6]}return[3,8];case 4:return[4,(0,i.initSession)({data:{fileName:f,fileSize:h,withPreview:b}})];case 5:return R=v.sent(),I=R.uploadUrl,N=R.maxPartSize,c.session=!0,[2,g({settings:p(d({},t),{url:I,partSize:N}),currentPart:0,errors:c})];case 6:return c.retries+=1,[4,(x=1e3*c.retries,new Promise((function(e){return setTimeout(e,x)})))];case 7:return v.sent(),[2,T()];case 8:throw Error("file upload failed");case 9:return[3,10];case 10:return k=(r+1)/Math.ceil(l.byteLength/y)*100,_()||m(k),(C=A.nextUrl)?[4,g({settings:p(d({},t),{url:C}),currentPart:r+1,errors:c})]:[3,12];case 11:A=v.sent(),v.label=12;case 12:return E(A),[2,A]}var x}))}));return function(t){return e.apply(this,arguments)}}(),b=function(){var e=l((function(e){var t,n,r,a,o,u,s,l,f,d,p,h;return v(this,(function(v){switch(v.label){case 0:return t=e.settings,n=t.onProgress,r=t.onLoadFinish,a=e.file,o=function(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}(e.settings,["onProgress","onLoadFinish"]),u=a.name,s=a.size,l=(0,c.prepareProcessingSessionOptions)(a,o),[4,(0,i.initSession)({data:l})];case 1:return f=v.sent(),d=f.uploadUrl,p=f.maxPartSize,[4,a.arrayBuffer()];case 2:return h=v.sent(),[2,g({currentPart:0,settings:{url:d,partSize:p,fileName:u,fileSize:s,arrayBuffer:h,onProgress:n,isCancelled:function(){return!1},onLoadFinish:r,withPreview:l.withPreview}})]}}))}));return function(t){return e.apply(this,arguments)}}(),S=function(){var e=l((function(e){return v(this,(function(t){switch(t.label){case 0:return[4,(0,u.authorizedRequest)({data:{url:"".concat(o.DRIVE_BASE_URL,"/v1.0/files/").concat(e)}})()];case 1:return[2,t.sent()]}}))}));return function(t){return e.apply(this,arguments)}}(),m=function(){var e=l((function(e){return v(this,(function(t){switch(t.label){case 0:return[4,(0,u.authorizedRequest)({data:{url:"".concat(o.DRIVE_BASE_URL,"/v1.0/files"),data:e}})()];case 1:return[2,t.sent().Embedded.files]}}))}));return function(t){return e.apply(this,arguments)}}(),w=function(){var e=l((function(e){return v(this,(function(t){switch(t.label){case 0:return[4,(0,u.authorizedRequest)({data:{url:"".concat(o.DRIVE_BASE_URL,"/v1.0/files/").concat(e),method:"DELETE"}})()];case 1:return t.sent(),[2]}}))}));return function(t){return e.apply(this,arguments)}}(),E=function(){var e=l((function(e){return v(this,(function(t){switch(t.label){case 0:return[4,(0,u.authorizedRequest)({data:{url:"".concat(o.DRIVE_BASE_URL,"/v1.0/files"),method:"DELETE",dataType:"text",data:a().map(e,(function(e){return{uuid:e}}))}})()];case 1:return t.sent(),[2]}}))}));return function(t){return e.apply(this,arguments)}}()},112609:(e,t,n)=>{n.r(t),n.d(t,{checkRules:()=>f});var r=n(629133),a=n.n(r),o=n(445368),i=n(845043),u=n(646472);function c(e,t,n,r,a,o,i){try{var u=e[o](i),c=u.value}catch(e){return void n(e)}u.done?t(c):Promise.resolve(c).then(r,a)}var s,l,f=(s=function(e){var t,n,r,c,s,l,f=arguments;return function(e,t){var n,r,a,o,i={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return o={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function u(o){return function(u){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(a=2&o[0]?r.return:o[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,o[1])).done)return a;switch(r=0,a&&(o=[2&o[0],a.value]),o[0]){case 0:case 1:a=o;break;case 4:return i.label++,{value:o[1],done:!1};case 5:i.label++,r=o[1],o=[0];continue;case 7:o=i.ops.pop(),i.trys.pop();continue;default:if(!((a=(a=i.trys).length>0&&a[a.length-1])||6!==o[0]&&2!==o[0])){i=0;continue}if(3===o[0]&&(!a||o[1]>a[0]&&o[1]<a[3])){i.label=o[1];break}if(6===o[0]&&i.label<a[1]){i.label=a[1],a=o;break}if(a&&i.label<a[2]){i.label=a[2],i.ops.push(o);break}a[2]&&i.ops.pop(),i.trys.pop();continue}o=t.call(e,i)}catch(e){o=[6,e],r=0}finally{n=a=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,u])}}}(this,(function(d){switch(d.label){case 0:return t=f.length>1&&void 0!==f[1]?f[1]:a().noop,n=a().map(e,(function(e){var t=e.size;return{fileName:e.name,size:t}})),[4,(0,u.checkCleaningRules)({data:n})];case 1:return r=d.sent(),c=[],s=[],a().each(r,(function(e,t){var r=e.fitsRule;c.push(r),r&&(s.push({text:n[t].fileName}),s.length>5&&s.splice(5,s.length,{text:"..."}))})),s.length?(l=s.concat([{text:"The media will be deleted immediately, as it matches the deletion rule set by the account administrator. You can restore media from the Deleted folder in the Media list within 30 days."},{text:"Are you sure you want to upload this media?"}]),new i.default({class_name:"",text:"".concat((0,o.i18n)("Upload media"),":"),decline_text:(0,o.i18n)("button_cancel"),accept_text:(0,o.i18n)("Confirm"),message:l,no_close:!0,destroy:function(){return this.accepted||t(),!0}}),[2]):[2]}}))},l=function(){var e=this,t=arguments;return new Promise((function(n,r){var a=s.apply(e,t);function o(e){c(a,n,r,o,i,"next",e)}function i(e){c(a,n,r,o,i,"throw",e)}o(void 0)}))},function(e){return l.apply(this,arguments)})},286150:(e,t,n)=>{n.r(t),n.d(t,{prepareProcessingSessionOptions:()=>i});var r=n(628612),a=n(926969);function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var i=function(e,t){var n=t.withPreview,i=t.billable;return function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){o(e,t,n[t])}))}return e}({fileName:e.name,fileSize:e.size,withPreview:n,billable:i},(0,r.isHeicHeifImage)(e)&&{processing:{image:{convertTo:"image/jpeg"}}},(0,a.isVideo)(e)&&{processing:{video:{convertTo:"video/mp4"}}})}},807160:(e,t,n)=>{n.r(t),n.d(t,{VIDEO_EXTENSIONS:()=>r.VIDEO_EXTENSIONS,VIDEO_MIME_TYPES:()=>r.VIDEO_MIME_TYPES,checkRules:()=>o.checkRules,deleteFile:()=>a.deleteFile,deleteFiles:()=>a.deleteFiles,getFileData:()=>a.getFileData,getFilesList:()=>a.getFilesList,uploadFile:()=>a.uploadFile});var r=n(245387),a=n(646472),o=n(112609)},535882:(e,t,n)=>{n.r(t),n.d(t,{initSession:()=>o});var r=n(245387),a=n(782579),o=function(e){var t=e.data;return(0,a.authorizedRequest)({data:{url:"".concat(r.DRIVE_BASE_URL,"/v1.0/sessions"),data:t,method:"POST"}})()}},782579:(e,t,n)=>{n.r(t),n.d(t,{authorizedRequest:()=>g,updateDriveToken:()=>y});var r=n(629133),a=n.n(r),o=n(926168),i=n(104737);function u(e,t,n,r,a,o,i){try{var u=e[o](i),c=u.value}catch(e){return void n(e)}u.done?t(c):Promise.resolve(c).then(r,a)}function c(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var o=e.apply(t,n);function i(e){u(o,r,a,i,c,"next",e)}function c(e){u(o,r,a,i,c,"throw",e)}i(void 0)}))}}function s(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function l(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){s(e,t,n[t])}))}return e}function f(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):function(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n.push.apply(n,r)}return n}(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})),e}function d(e,t){var n,r,a,o,i={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return o={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function u(o){return function(u){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(a=2&o[0]?r.return:o[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,o[1])).done)return a;switch(r=0,a&&(o=[2&o[0],a.value]),o[0]){case 0:case 1:a=o;break;case 4:return i.label++,{value:o[1],done:!1};case 5:i.label++,r=o[1],o=[0];continue;case 7:o=i.ops.pop(),i.trys.pop();continue;default:if(!((a=(a=i.trys).length>0&&a[a.length-1])||6!==o[0]&&2!==o[0])){i=0;continue}if(3===o[0]&&(!a||o[1]>a[0]&&o[1]<a[3])){i.label=o[1];break}if(6===o[0]&&i.label<a[1]){i.label=a[1],a=o;break}if(a&&i.label<a[2]){i.label=a[2],i.ops.push(o);break}a[2]&&i.ops.pop(),i.trys.pop();continue}o=t.call(e,i)}catch(e){o=[6,e],r=0}finally{n=a=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,u])}}}var p,v=new Map,h=(p=c((function(e){return d(this,(function(t){return[2,i.default.request({url:"/ajax/v4/files/issue_token",method:"POST",data:e})]}))})),function(e){return p.apply(this,arguments)}),y=function(){var e=c((function(e){var t,n,r,i,u,c,s,l,f,p,y,g,b,S;return d(this,(function(d){switch(d.label){case 0:return n=(t=e||{}).elementId,r=void 0===n?null:n,i=t.elementType,u=void 0===i?null:i,c=t.leadElementId,s=void 0===c?null:c,l=t.shouldForceUpdate,f=void 0!==l&&l,p="",r&&u&&(y=a().some(APP.element_types,(function(e){return e===u})),p={entityId:r,entityType:y?(0,o.convertElementType)(u,"string"):u},s&&(p.parent={entityId:s,entityType:"leads"})),g=JSON.stringify(p),(b=v.get(g))&&!f?[2,b]:[4,h(g)];case 1:return S=d.sent().token,v.set(g,S),[2,S]}}))}));return function(t){return e.apply(this,arguments)}}(),g=function(e){var t=e.data,n=function(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}(e,["data"]),r=function(){var e=c((function(){var e,r,a;return d(this,(function(o){switch(o.label){case 0:return o.trys.push([0,2,,5]),[4,y()];case 1:return e=o.sent(),[2,i.default.request(f(l({},t),{xhrFields:{withCredentials:!0},crossDomain:!0,headers:{"X-Auth-Token":e}}))];case 2:return 403!==((r=o.sent())||{}).status?[3,4]:[4,y(f(l({},n),{shouldForceUpdate:!0}))];case 3:return a=o.sent(),[2,i.default.request(f(l({},t),{xhrFields:{withCredentials:!0},crossDomain:!0,headers:{"X-Auth-Token":a}}))];case 4:throw Error(r);case 5:return[2]}}))}));return function(){return e.apply(this,arguments)}}();return r}},260012:(e,t,n)=>{n.r(t),n.d(t,{getSurveyName:()=>h,saveSurveyResult:()=>y});var r=n(629133),a=n.n(r),o=n(104737),i=n(242473),u=n(56100),c=n(417438);function s(e,t,n,r,a,o,i){try{var u=e[o](i),c=u.value}catch(e){return void n(e)}u.done?t(c):Promise.resolve(c).then(r,a)}var l,f,d="/ajax/v4/feedback/survey",p="init_survey",v=function(e){return{ai_agent_activation:c.Surveys.AI_AGENT_ACTIVATION_BY_PROMO}[e]},h=(l=function(){var e,t;return function(e,t){var n,r,a,o,i={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return o={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function u(o){return function(u){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(a=2&o[0]?r.return:o[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,o[1])).done)return a;switch(r=0,a&&(o=[2&o[0],a.value]),o[0]){case 0:case 1:a=o;break;case 4:return i.label++,{value:o[1],done:!1};case 5:i.label++,r=o[1],o=[0];continue;case 7:o=i.ops.pop(),i.trys.pop();continue;default:if(!((a=(a=i.trys).length>0&&a[a.length-1])||6!==o[0]&&2!==o[0])){i=0;continue}if(3===o[0]&&(!a||o[1]>a[0]&&o[1]<a[3])){i.label=o[1];break}if(6===o[0]&&i.label<a[1]){i.label=a[1],a=o;break}if(a&&i.label<a[2]){i.label=a[2],i.ops.push(o);break}a[2]&&i.ops.pop(),i.trys.pop();continue}o=t.call(e,i)}catch(e){o=[6,e],r=0}finally{n=a=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,u])}}}(this,(function(n){switch(n.label){case 0:return e=(0,i.getQueryStringAsJsonObject)(window.location.search)[p],a().isString(e)?((0,u.removeQueryKeyWithRedirect)([p]),[2,v(e)]):[4,o.default.request({url:d,method:"GET"})];case 1:return t=n.sent(),[2,a().propertyOf(t)(["response","survey","name"])]}}))},f=function(){var e=this,t=arguments;return new Promise((function(n,r){var a=l.apply(e,t);function o(e){s(a,n,r,o,i,"next",e)}function i(e){s(a,n,r,o,i,"throw",e)}o(void 0)}))},function(){return f.apply(this,arguments)}),y=function(e){var t=e.name,n={data:e.data,metadata:e.metadata,options:e.options};return o.default.request({url:"".concat(d,"/").concat(t,"/result"),method:"POST",data:n})}},320526:(e,t,n)=>{n.r(t),n.d(t,{getSurveyName:()=>r.getSurveyName,saveSurveyResult:()=>r.saveSurveyResult});var r=n(260012)},801461:(e,t,n)=>{n.r(t),n.d(t,{default:()=>_});var r=n(827378),a=n.n(r),o=n(629133),i=n.n(o),u=n(267651),c=n.n(u),s=n(460159),l=n.n(s),f=n(500034),d=n(614759),p=n(792971),v=n(589051);function h(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var y=["/dashboard/","/leads/pipeline/","/settings/communications/"],g=function(e,t){return a().lazy((function(){return e().then((function(e){return{default:e[t]}}))}))},b=g((function(){return Promise.all([n.e(88039),n.e(53256),n.e(66340)]).then(n.bind(n,353256))}),"AiTrialExpiredSurveyPopup"),S=g((function(){return Promise.all([n.e(88039),n.e(53256),n.e(66340)]).then(n.bind(n,353256))}),"AiAgentActivationPopup"),m=g((function(){return Promise.all([n.e(81220),n.e(88039),n.e(59913),n.e(21483),n.e(8649),n.e(82640),n.e(32157),n.e(11480),n.e(93573)]).then(n.bind(n,821483))}),"WaLiteMigrationSurvey"),w=g((function(){return Promise.all([n.e(88039),n.e(6957)]).then(n.bind(n,906957))}),"SatisfactionSurveyPopup"),E=a().lazy((function(){return Promise.all([Promise.all([n.e(37107),n.e(22170)]).then(n.bind(n,22170)),l()._preload("langs/navigationWelcomeModal")()]).then((function(e){return{default:(t=e,n=1,function(e){if(Array.isArray(e))return e}(t)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,o=[],i=!0,u=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);i=!0);}catch(e){u=!0,a=e}finally{try{i||null==n.return||n.return()}finally{if(u)throw a}}return o}}(t,n)||function(e,t){if(e){if("string"==typeof e)return h(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(n):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?h(e,t):void 0}}(t,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}())[0].NavigationV2WelcomeModal};var t,n}))}));const _=(0,d.withQueryProvider)((function(e){var t=e.onModalCloseRequest,o=e.onModalLearnMoreClick,u=function(){return i().some(y,(function(e){return window.location.pathname.startsWith(e)}))},s=(0,v.useSurvey)({onError:function(){t()}}),l=s.survey,d=s.saveSurvey,h=function(e){d(e)},g=null;if(0===APP.constant("main_tour").step)return a().createElement(r.Suspense,null,g);switch(l){case p.Surveys.SYSTEM_NAVIGATION_V2_WELCOME:g=a().createElement(E,{onCloseRequest:t,onSuccess:h});break;case p.Surveys.SYSTEM_NAVIGATION_V2_TURN_ON:n.e(37107).then(n.bind(n,537107)).then((function(e){e.default.showNavigationAvatarPromotionTooltip()}));break;case p.Surveys.SYSTEM_NAVIGATION_V2_FEEDBACK:c().publish("systemNavigationV2:feedbackSurveyOpen",!0);break;case p.Surveys.KOMMO_AI_TRIAL:u()&&(g=a().createElement(b,{onCloseRequest:t,onSuccess:h}));break;case p.Surveys.AI_AGENT_ACTIVATION:u()&&(g=a().createElement(S,{onCloseRequest:t,onSuccess:h}));break;case p.Surveys.AI_AGENT_ACTIVATION_BY_PROMO:(0,f.isFeatureAvailable)("ai_agent_viewable")&&(u()||"chats"===APP.getBaseEntity())&&(g=a().createElement(S,{onCloseRequest:t,onSuccess:h}));break;case p.Surveys.WACA_PROMOTION:(u()||"widgetsSettings"===APP.getBaseEntity())&&(g=a().createElement(m,{onCloseRequest:t,onModalLearnMoreClick:o,onSuccess:h}));break;case p.Surveys.CUSTOMER_SATISFACTION:g=a().createElement(w,{onCloseRequest:t,onSuccess:h})}return a().createElement(r.Suspense,null,g)}))},792971:(e,t,n)=>{var r;n.r(t),n.d(t,{Surveys:()=>r}),function(e){e.KOMMO_AI_TRIAL="kommo_ai_trial",e.SYSTEM_NAVIGATION_V2_WELCOME="system_navigation_v2_welcome",e.SYSTEM_NAVIGATION_V2_TURN_ON="system_navigation_v2_turn_on",e.AI_AGENT_ACTIVATION="want_turn_on_universal_ai_agent",e.AI_AGENT_ACTIVATION_BY_PROMO="ai_agent_activation_by_promo",e.WACA_PROMOTION="walite_to_waca_promotion",e.CUSTOMER_SATISFACTION="customer_satisfaction",e.AI_USAGE_FEEDBACK="ai_usage_feedback",e.SYSTEM_NAVIGATION_V2_FEEDBACK="system_navigation_v2_feedback",e.AI_ONBOARDING_TIME_METRICS="ai_onboarding",e.BILLING_AFTER_FIRST_PAYMENT="billing_after_first_payment",e.FIRST_TIME_AGENT_SETUP="first_time_agent_setup",e.AGENT_SURVEY_SEEN="agent_survey_seen"}(r||(r={}))},415058:(e,t,n)=>{n.r(t),n.d(t,{default:()=>o});var r=n(456552),a=n(417438);const o=function(){var e=(0,r.useQueryClient)();return{invalidateSurveyRequest:function(){e.removeQueries(a.SURVEY_QUERY_KEY,{exact:!0})}}}},589051:(e,t,n)=>{n.r(t),n.d(t,{useSurvey:()=>r.useSurvey});var r=n(876203)},876203:(e,t,n)=>{n.r(t),n.d(t,{QUERY_KEY:()=>s,useSurvey:()=>f});var r=n(456552),a=n(320526);function o(e,t,n,r,a,o,i){try{var u=e[o](i),c=u.value}catch(e){return void n(e)}u.done?t(c):Promise.resolve(c).then(r,a)}function i(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var i=e.apply(t,n);function u(e){o(i,r,a,u,c,"next",e)}function c(e){o(i,r,a,u,c,"throw",e)}u(void 0)}))}}function u(e,t){var n,r,a,o,i={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return o={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function u(o){return function(u){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(a=2&o[0]?r.return:o[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,o[1])).done)return a;switch(r=0,a&&(o=[2&o[0],a.value]),o[0]){case 0:case 1:a=o;break;case 4:return i.label++,{value:o[1],done:!1};case 5:i.label++,r=o[1],o=[0];continue;case 7:o=i.ops.pop(),i.trys.pop();continue;default:if(!((a=(a=i.trys).length>0&&a[a.length-1])||6!==o[0]&&2!==o[0])){i=0;continue}if(3===o[0]&&(!a||o[1]>a[0]&&o[1]<a[3])){i.label=o[1];break}if(6===o[0]&&i.label<a[1]){i.label=a[1],a=o;break}if(a&&i.label<a[2]){i.label=a[2],i.ops.push(o);break}a[2]&&i.ops.pop(),i.trys.pop();continue}o=t.call(e,i)}catch(e){o=[6,e],r=0}finally{n=a=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,u])}}}var c,s=["survey"],l=(c=i((function(){return u(this,(function(e){switch(e.label){case 0:return[4,(0,a.getSurveyName)()];case 1:return[2,e.sent()]}}))})),function(){return c.apply(this,arguments)}),f=function(e){var t=e.onError,n=(0,r.useQuery)({queryKey:s,queryFn:l,onError:function(){t()},staleTime:36e5,refetchOnMount:!0,retry:!1}).data,o=function(){var e=i((function(e){var t;return u(this,(function(n){switch(n.label){case 0:return n.trys.push([0,2,,3]),[4,(0,a.saveSurveyResult)(e)];case 1:return n.sent(),[3,3];case 2:return t=n.sent(),console.error(t),[3,3];case 3:return[2]}}))}));return function(t){return e.apply(this,arguments)}}();return{survey:n,saveSurvey:o}}},417438:(e,t,n)=>{n.r(t),n.d(t,{BaseStep:()=>u.default,ChoosableOptions:()=>i.default,SURVEY_QUERY_KEY:()=>r.QUERY_KEY,Success:()=>c.default,SurveyManager:()=>o.default,Surveys:()=>s.Surveys,useInvalidateSurveyRequest:()=>a.default});var r=n(876203),a=n(415058),o=n(801461),i=n(271109),u=n(970948),c=n(781053),s=n(792971)},970948:(e,t,n)=>{n.r(t),n.d(t,{default:()=>s});var r=n(827378),a=n.n(r),o=n(292554),i=n.n(o),u=n(618749),c=i().bind(u.default);const s=function(e){var t=e.children,n=e.className,r=e.images;return a().createElement("div",{className:c("wrapper",n)},r&&a().createElement("picture",{className:c("image-wrapper")},a().createElement("img",{className:c("image"),src:r["1x"],srcSet:"".concat(r["2x"]," 2x")})),t)}},271109:(e,t,n)=>{n.r(t),n.d(t,{default:()=>f});var r=n(629133),a=n.n(r),o=n(827378),i=n.n(o),u=n(292554),c=n.n(u),s=n(215015),l=c().bind(s.default);const f=function(e){var t=e.options,n=e.chosenOptions,r=void 0===n?[]:n,o=e.onChoose,u=e.className;return i().createElement("div",{className:l("wrapper",u)},a().map(t,(function(e){var t=e.id,n=e.value;return i().createElement("span",{className:l("option",{chosen:a().contains(r,t)}),key:t,onClick:function(){o(t)}},n)})))}},781053:(e,t,n)=>{n.r(t),n.d(t,{default:()=>p});var r=n(827378),a=n.n(r),o=n(292554),i=n.n(o),u=n(916569),c=n(701106),s=n(491967),l=n(445368),f=n(464587),d=i().bind(f.default);const p=function(){return a().createElement("div",{className:d("wrapper")},a().createElement(s.default,{type:"svg",name:"settings--widgets--check",className:d("icon")}),a().createElement(c.default,{type:"h2",size:"xxl",className:d("title")},(0,l.i18n)("Feedback received!")),a().createElement(u.Text,{theme:u.TextPrimaryTheme,size:"l"},(0,l.i18n)("Thank you for taking the time to help improve Kommo.")))}},387725:(e,t,n)=>{n.r(t),n.d(t,{default:()=>o});var r=n(827378),a=n.n(r);n(795440);const o=function(e){var t=e.dataSrc;return a().createElement("svg",{style:{display:"block"},"data-src":t,fill:"currentColor",width:"0",height:"0","data-unique-ids":"disabled","data-cache":"disabled"})}},19050:(e,t,n)=>{var r;n.r(t),n.d(t,{default:()=>a}),function(e){e[e.contacts=1]="contacts",e[e.leads=2]="leads",e[e.companies=3]="companies",e[e.todo=4]="todo",e[e.notes=5]="notes",e[e.tags=7]="tags",e[e.catalogs=10]="catalogs",e[e.catalog_elements=11]="catalog_elements",e[e.customers=12]="customers",e[e.transactions=13]="transactions",e[e.unsorted=14]="unsorted",e[e.mail=16]="mail",e[e.contacts_and_companies=17]="contacts_and_companies",e[e.amoforms=19]="amoforms",e[e.events=23]="events",e[e.talk=24]="talk",e[e.files=25]="files"}(r||(r={}));const a=r},438089:(e,t,n)=>{n.r(t),n.d(t,{default:()=>u});var r=n(827378),a=n.n(r);function o(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const u=function(e){var t,n,u=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},c=(t=(0,r.useState)(!1),n=2,function(e){if(Array.isArray(e))return e}(t)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,o=[],i=!0,u=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);i=!0);}catch(e){u=!0,a=e}finally{try{i||null==n.return||n.return()}finally{if(u)throw a}}return o}}(t,n)||function(e,t){if(e){if("string"==typeof e)return o(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(n):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?o(e,t):void 0}}(t,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),s=c[0],l=c[1],f=u.onCloseRequest,d=void 0===f?function(){return!0}:f,p=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){i(e,t,n[t])}))}return e}({onCloseRequest:function(){return!!d()&&(l(!1),!0)}},function(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}(u,["onCloseRequest"]));return{showModal:function(){l(!0)},hideModal:function(){l(!1)},modalElement:s?a().createElement(e,p):null}}},203659:(e,t,n)=>{n.r(t),n.d(t,{default:()=>i});var r=n(629133),a=n.n(r),o=n(827378);const i=function(e){var t=(0,o.useMemo)((function(){var e,t=new Promise((function(t){e=a().once((function(){return t(void 0)}))}));return{resolve:e,promise:t}}),[]);return(0,o.useEffect)((function(){return function(){t.resolve()}}),e),t}},635365:(e,t,n)=>{n.r(t),n.d(t,{useModalProvider:()=>r.default});var r=n(617861)},617861:(e,t,n)=>{n.r(t),n.d(t,{default:()=>h});var r=n(629133),a=n.n(r),o=n(292554),i=n.n(o),u=n(331542),c=n(827378),s=n(724329),l=n(304483),f=n(203659),d=n(700056);function p(e,t,n,r,a,o,i){try{var u=e[o](i),c=u.value}catch(e){return void n(e)}u.done?t(c):Promise.resolve(c).then(r,a)}var v=i().bind(d.default);const h=function(){var e=(0,c.useRef)(),t=(0,c.useRef)(null),n=(0,c.useRef)(null),r=(0,c.useRef)(null),o=(0,c.useMemo)((function(){return function(o){var i=o.children,d=o.modalClassName,h=void 0===d?"":d,y=o.bodyClassName,g=void 0===y?"":y,b=o.bodyInnerClassName,S=void 0===b?"":b,m=o.isLoading,w=void 0!==m&&m,E=o.preloadTemplates,_=void 0===E?[]:E,A=o.onCloseRequest,T=void 0===A?a().noop:A,O=o.onTryAgainClick,P=void 0===O?a().noop:O,R=o.onAfterRender,I=void 0===R?a().noop:R,N=o.onBeforeInit,k=void 0===N?function(){return Promise.resolve()}:N,C=o.onModalPosition,x=void 0===C?null:C,L=o.isCloseOnOverlayClickEnabled,D=void 0===L||L,U=o.isCloseOnEscapeKeyDownEnabled,M=void 0===U||U,j=o.isEnterKeyDownEnabled,F=void 0===j||j,G=o.isOverlayEnabled,q=void 0===G||G,B=o.theme,W=void 0===B?"classic":B,V=o.container,Y=o.canDestroy,K=void 0===Y||Y,z=o.isDefaultOverlay,J=void 0!==z&&z,H=o.scrollerId,Q=void 0===H?"":H,X={onCloseRequest:T,onTryAgainClick:P},$=(0,c.useRef)(X);$.current=X;var Z=(0,c.useMemo)((function(){var e=document.createElement("div");if(e.classList.add("modal-body__inner"),S){var t=S.split(" ");a().each(t,(function(t){e.classList.add(t)}))}return e}),[]),ee=(0,f.default)([w]),te=ee.resolve,ne=ee.promise,re=(0,s.useIsComponentMounted)();return e.current=(0,s.useConst)((function(){var e,o,i=new l.default({class_name:"modal-list ".concat(h),preload_templates:_,disable_overlay_click:!D,disable_escape_keydown:!M,disable_enter_keydown:!F,disable_overlay:!q,can_destroy:K,container:V,default_overlay:J,scrollerId:Q,onBeforeInit:k,onModalPosition:x,tryAgain:function(){$.current.onTryAgainClick()},init:(e=function(e){var o;return function(e,t){var n,r,a,o,i={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return o={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function u(o){return function(u){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(a=2&o[0]?r.return:o[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,o[1])).done)return a;switch(r=0,a&&(o=[2&o[0],a.value]),o[0]){case 0:case 1:a=o;break;case 4:return i.label++,{value:o[1],done:!1};case 5:i.label++,r=o[1],o=[0];continue;case 7:o=i.ops.pop(),i.trys.pop();continue;default:if(!((a=(a=i.trys).length>0&&a[a.length-1])||6!==o[0]&&2!==o[0])){i=0;continue}if(3===o[0]&&(!a||o[1]>a[0]&&o[1]<a[3])){i.label=o[1];break}if(6===o[0]&&i.label<a[1]){i.label=a[1],a=o;break}if(a&&i.label<a[2]){i.label=a[2],i.ops.push(o);break}a[2]&&i.ops.pop(),i.trys.pop();continue}o=t.call(e,i)}catch(e){o=[6,e],r=0}finally{n=a=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,u])}}}(this,(function(u){switch(u.label){case 0:return t.current=e,n.current=e[0],r.current=i.getScroller()[0],g&&(o=g.split(" "),a().each(o,(function(t){e.addClass(t)}))),"classic"!==W&&e.addClass(v("modal-body--".concat(W))),e.append(Z),w||te(),[4,ne];case 1:return u.sent(),e.trigger("modal:loaded").trigger("modal:centrify"),I(),[2]}}))},o=function(){var t=this,n=arguments;return new Promise((function(r,a){var o=e.apply(t,n);function i(e){p(o,r,a,i,u,"next",e)}function u(e){p(o,r,a,i,u,"throw",e)}i(void 0)}))},function(e){return o.apply(this,arguments)}),destroy:function(){var e=re();return e&&$.current.onCloseRequest(),!e}});return i})),(0,c.useEffect)((function(){return function(){e.current.destroy(),e.current=null,t.current=null,n.current=null,r.current=null}}),[]),(0,u.createPortal)(i,Z)}}),[]);return{ModalProvider:o,modalBodyElRef:n,modalScrollerElRef:r,centrify:function(){t.current&&t.current.trigger("modal:centrify")},show:function(){e.current&&e.current.show()},hide:function(){e.current&&e.current.hide()},showError:function(t){var n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];e.current&&e.current.showError(t,n)},showSuccess:function(t){e.current&&e.current.showSuccess(t)}}}},321561:(e,t,n)=>{n.r(t),n.d(t,{default:()=>s});var r=n(629133),a=n.n(r),o=n(827378);function i(e,t,n,r,a,o,i){try{var u=e[o](i),c=u.value}catch(e){return void n(e)}u.done?t(c):Promise.resolve(c).then(r,a)}function u(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var o=e.apply(t,n);function u(e){i(o,r,a,u,c,"next",e)}function c(e){i(o,r,a,u,c,"throw",e)}u(void 0)}))}}function c(e,t){var n,r,a,o,i={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return o={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function u(o){return function(u){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(a=2&o[0]?r.return:o[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,o[1])).done)return a;switch(r=0,a&&(o=[2&o[0],a.value]),o[0]){case 0:case 1:a=o;break;case 4:return i.label++,{value:o[1],done:!1};case 5:i.label++,r=o[1],o=[0];continue;case 7:o=i.ops.pop(),i.trys.pop();continue;default:if(!((a=(a=i.trys).length>0&&a[a.length-1])||6!==o[0]&&2!==o[0])){i=0;continue}if(3===o[0]&&(!a||o[1]>a[0]&&o[1]<a[3])){i.label=o[1];break}if(6===o[0]&&i.label<a[1]){i.label=a[1],a=o;break}if(a&&i.label<a[2]){i.label=a[2],i.ops.push(o);break}a[2]&&i.ops.pop(),i.trys.pop();continue}o=t.call(e,i)}catch(e){o=[6,e],r=0}finally{n=a=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,u])}}}const s=function(e){var t=e.acceptText,n=e.declineText,r=e.title,i=e.description,s=e.onAccept,l=e.onDecline,f=void 0===l?a().noop:l,d=e.onConfirmModalClose,p=void 0===d?a().noop:d,v=e.shouldPreventPageChange,h=e.shouldRouteWhenAccept,y=void 0===h||h,g=e.isAcceptButtonGray,b=e.isNoCancel,S=void 0!==b&&b,m=(0,o.useRef)(),w={onAccept:s,onDecline:f,onConfirmModalClose:p},E=(0,o.useRef)(w);E.current=w;var _=(0,o.useMemo)((function(){return{title:r,description:i,accept_text:t,decline_text:n,gray_button:g,no_cancel:S,accept:(e=u((function(e){return c(this,(function(t){switch(t.label){case 0:return t.trys.push([0,2,,3]),[4,E.current.onAccept()];case 1:return t.sent(),!y&&m.current?[2]:(e(m.current),[3,3]);case 2:return t.sent(),[3,3];case 3:return[2]}}))})),function(t){return e.apply(this,arguments)}),decline:function(){var e=u((function(e){return c(this,(function(t){switch(t.label){case 0:return t.trys.push([0,2,,3]),[4,E.current.onDecline()];case 1:return t.sent(),e(m.current),[3,3];case 2:return t.sent(),[3,3];case 3:return[2]}}))}));return function(t){return e.apply(this,arguments)}}(),destroy:function(){E.current.onConfirmModalClose()}};var e}),[r,i,t,n,g]),A=function(){m.current=void 0};return(0,o.useEffect)((function(){var e=m.current;if(v){if(!e){var t=a().uniqueId("page_preventer_");m.current=t,APP.router.registerPreventConfig(_,t),APP.router.preventPageChange(!0,t)}}else e&&(APP.router.removePreventConfig(e),A());return function(){var e=m.current;e&&(APP.router.removePreventConfig(e),A())}}),[_,v]),{openConfirmModal:function(e){APP.router.confirmPageChange(_,(function(){e&&e()}))}}}},69773:(e,t,n)=>{n.r(t),n.d(t,{useSupportChatMessage:()=>p});var r=n(827378),a=n(128508),o=n(629133),i=n.n(o),u=n(998798),c=n(761634),s=n(474564);function l(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function f(e,t,n,r,a,o,i){try{var u=e[o](i),c=u.value}catch(e){return void n(e)}u.done?t(c):Promise.resolve(c).then(r,a)}function d(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,o=[],i=!0,u=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);i=!0);}catch(e){u=!0,a=e}finally{try{i||null==n.return||n.return()}finally{if(u)throw a}}return o}}(e,t)||function(e,t){if(e){if("string"==typeof e)return l(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(n):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?l(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var p=function(){var e,t,n=d((0,r.useState)(""),2),o=n[0],l=n[1],p=d((0,r.useState)(!0),2),v=p[0],h=p[1],y=(e=function(e,t){var n,r,a,c,l,f,d,p,v,h,y,g;return function(e,t){var n,r,a,o,i={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return o={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function u(o){return function(u){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(a=2&o[0]?r.return:o[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,o[1])).done)return a;switch(r=0,a&&(o=[2&o[0],a.value]),o[0]){case 0:case 1:a=o;break;case 4:return i.label++,{value:o[1],done:!1};case 5:i.label++,r=o[1],o=[0];continue;case 7:o=i.ops.pop(),i.trys.pop();continue;default:if(!((a=(a=i.trys).length>0&&a[a.length-1])||6!==o[0]&&2!==o[0])){i=0;continue}if(3===o[0]&&(!a||o[1]>a[0]&&o[1]<a[3])){i.label=o[1];break}if(6===o[0]&&i.label<a[1]){i.label=a[1],a=o;break}if(a&&i.label<a[2]){i.label=a[2],i.ops.push(o);break}a[2]&&i.ops.pop(),i.trys.pop();continue}o=t.call(e,i)}catch(e){o=[6,e],r=0}finally{n=a=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,u])}}}(this,(function(b){switch(b.label){case 0:return r=(n=t||{}).onSuccess,a=void 0===r?i().noop:r,c=n.onError,l=void 0===c?i().noop:c,f=n.isNeedToSendMessage,d=void 0===f||f,p=n.isNeedToSendBaseInfoWithMessage,v=e,void 0!==p&&p&&(h=APP.constant("user").id,y=APP.constant("account").id,g=APP.constant("user").login,v="".concat(e,"\nClient ID: ").concat(y,"\nUser ID: ").concat(h,"\nEmail: ").concat(g)),d?[4,(0,s.sendMessage)({chat_id:o,message:v}).subscribe({next:function(e){a(e)},error:function(e){l(e)}})]:[3,2];case 1:b.sent(),b.label=2;case 2:return(0,u.openSupportChat)(),[2]}}))},t=function(){var t=this,n=arguments;return new Promise((function(r,a){var o=e.apply(t,n);function i(e){f(o,r,a,i,u,"next",e)}function u(e){f(o,r,a,i,u,"throw",e)}i(void 0)}))},function(e,n){return t.apply(this,arguments)});return(0,r.useEffect)((function(){(0,s.connectBot)((0,c.getSupportBotId)()).pipe(a.map((function(e){return e.response.chats.bots}))).subscribe((function(e){l(e.id),h(!1)}))}),[]),{sendMessageAndGoToSupportChat:y,isLoading:v}}}}]);var _global="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};_global.SENTRY_RELEASE={id:"build_2025_11_28_18_50_52"},function(){try{var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},t=(new Error).stack;t&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[t]="4acbb4cd-c13e-40a6-b87a-935860130ba3",e._sentryDebugIdIdentifier="sentry-dbid-4acbb4cd-c13e-40a6-b87a-935860130ba3")}catch(e){}}();
//# sourceMappingURL=37061.32d0ccdc0a7f938dbe3f.js.map