/*! For license information please see 50171.5701794b393a92b729aa.js.LICENSE.txt */
(window.webpackChunk=window.webpackChunk||[]).push([[50171],{403474:(t,e,i)=>{var s,a,n,r=i(661533);a=[i(161320)],s=function(t){var e=function(){return i.moment().startOf("day").yearDay()},i=function(e,i){if("function"==typeof document.addEventListener||a.isIE8()){var r,o,l=!1;try{r=e,l=null!=(o=Element)&&"undefined"!=typeof Symbol&&o[Symbol.hasInstance]?!!o[Symbol.hasInstance](r):r instanceof o}catch(t){l=!!e&&1===l.nodeType}l||"string"==typeof e||(i=e);var d,u,c,h,f,g,m,p,_=this,v=_.classes,y=_.settings=a.merge(_.defaults,{attachTo:e},i||{}),b=_.container=a.make("div",{class:v.container}),w=_.calendars=[],k=t().day(y.weekStart),C=[],S=[],E=0,x=y.months;for(a.isIE8()&&a.addClassName(b,"ie8"),E=7;E--;)C.push(k.format(y.columnHeaderFormat)),k.add(1,"days");if(n(_),"object"==typeof y.subscribe)for(E in y.subscribe)y.subscribe.hasOwnProperty(E)&&_.subscribe(E,y.subscribe[E]);d=y.viewStartDate?t(y.viewStartDate,y.format):t(),_.viewStartDate=d.date(1),_._sel=[],y.selected&&(_.setSelected(y.selected,!1),_.viewStartDate=t(_._sel[0]));var D={past:y.months-1,"today-past":y.months-1,any:y.months>2?Math.floor(y.months/2):0,"today-future":0,future:0}[this.settings.direction];if(D&&t().month()==t(_.viewStartDate).month()&&(_.viewStartDate=t(_.viewStartDate).subtract({M:D}).date(1)),_.defaultView=t(_.viewStartDate),"function"==typeof y.blackout)_.blackout=y.blackout;else if(y.blackout){var P=s(y.blackout,y.parseSplitDelimiter,y.format);_.blackout=function(e){if((e=t(e).startOf("day").yearDay())<1||!_._sel)return!1;for(var i=P.length;i--;)if(P[i].startOf("day").yearDay()===e)return!0;return!1}}else _.blackout=function(){return!1};for(_.direction=_.directions[y.direction]?_.directions[y.direction]:_.directions.any,x=Math.max(y.months,1);x--;){(u=a.make("div",{class:v.calendar},b)).setAttribute("data-cal-index",x),y.months>1&&(x==Math.max(y.months-1,1)?a.addClassName(u,v.monthFirst):0===x?a.addClassName(u,v.monthLast):a.addClassName(u,v.monthMiddle)),c=a.make("div",{class:v.title},u),y.useYearNav||a.addClassName(c,v.disableYearNav),a.make("a",{class:v.previousYear},c),a.make("a",{class:v.previousMonth},c),a.make("a",{class:v.nextYear},c),a.make("a",{class:v.nextMonth},c),h=a.make("span",{class:v.caption},c),f=a.make("div",{class:v.header+" "+(1==y.dayHeaderClickable?v.dayActive:"")},u),E=0;do{p=a.make("span",{"data-day":E},f),1==y.dayHeaderClickable&&"multiple"==y.mode&&(p.addEventListener("mouseover",(function(t){var e=t.target.parentNode.nextSibling;if(daysToHover=e.getElementsByClassName("k-day-week-"+t.target.getAttribute("data-day")),daysToHover.length>0)for(var i=0;i<daysToHover.length;i++)a.hasClassName(daysToHover[i],v.dayActive)&&a.addClassName(daysToHover[i],"k-day-hover-active")})),p.addEventListener("mouseleave",(function(t){var e=t.target.parentNode.nextSibling;if(daysToHover=e.getElementsByClassName("k-day-week-"+t.target.getAttribute("data-day")),daysToHover.length>0)for(var i=0;i<daysToHover.length;i++)a.hasClassName(daysToHover[i],v.dayActive)&&a.removeClassName(daysToHover[i],"k-day-hover-active")}))),p.innerHTML=C[E]}while(++E<7);g=a.make("div",{class:v.days},u),E=0,S=[];do{"week"==y.mode?(E%7==0&&(m=a.make("div",{class:v.week+" clearfix"},g),S.push(m)),a.make("span",{},m)):S.push(a.make("span",{},g))}while(++E<42);w.push({header:f,caption:h,days:S}),x&&a.make("div",{class:v.monthSeparator},b)}_.draw(),a.addEvent(b,APP.is_touch_device?"touchstart":"mousedown",(function(e,i){var s;if(a.hasClassName(i,v.nextMonth))return e.stopPropagation(),_.disableNext||!1===_.publish("view-changed",_,["next-month"])||(_.viewStartDate.add(1,"months"),_.draw()),!1;if(a.hasClassName(i,v.previousMonth))return e.stopPropagation(),_.disablePreviousMonth||!1===_.publish("view-changed",_,["previous-month"])||(_.viewStartDate.subtract(1,"months"),_.draw()),!1;if(a.hasClassName(i,v.nextYear))return e.stopPropagation(),_.disableNext||!1===_.publish("view-changed",_,["next-year"])||(_.viewStartDate.add(1,"years"),_.draw()),!1;if(a.hasClassName(i,v.previousYear))return e.stopPropagation(),_.disablePreviousMonth||!1===_.publish("view-changed",_,["previous-year"])||(_.viewStartDate.subtract(1,"years"),_.draw()),!1;if((a.hasClassName(i.parentNode,v.days)||a.hasClassName(i.parentNode,v.week))&&a.hasClassName(i,v.dayActive)&&(s=i.getAttribute("data-date"))){if(e.stopPropagation(),s=t(s,y.dayAttributeFormat).hours(12),!1!==_.publish("date-clicked",_,[s]))switch(y.mode){case"multiple":_.addSelected(s)||_.removeSelected(s);break;case"range":case"single":default:_.addSelected(s);break;case"week":_.weekSelected(s)}return!1}if(a.hasClassName(i.parentNode,v.week)&&(s=i.getAttribute("data-date")))return e.stopPropagation(),s=t(s,y.dayAttributeFormat).hours(12),!1!==_.publish("date-clicked",_,[s])&&"week"==y.mode&&_.weekSelected(s),!1;if(a.hasClassName(i.parentNode,v.header)){if(e.stopPropagation(),"multiple"==y.mode&&1==y.dayHeaderClickable){var n=a.hasClassName(i,v.daySelected),r=i.parentNode.parentNode.getAttribute("data-datestart"),o=i.getAttribute("data-day");1==n?_.monthDaySelected(r,o,!0):_.monthDaySelected(r,o,!1)}return!1}return!1})),(y.attachTo=a.$(y.attachTo))&&y.attachTo.appendChild(b)}};i.prototype={defaults:{attachTo:null,months:1,weekStart:0,direction:"any",directionScrolling:!0,viewStartDate:null,blackout:null,selected:null,mode:"single",dayOutOfMonthClickable:!1,dayHeaderClickable:!1,format:null,subscribe:null,columnHeaderFormat:"dd",titleFormat:"MMMM, YYYY",dayNumberFormat:"D",dayAttributeFormat:"YYYY-MM-DD",parseSplitDelimiter:/,\s*|\s+-\s+/,rangeDelimiter:" - ",multipleDelimiter:", ",useYearNav:!0,hide_disabled:!1,dateClassMap:{}},classes:{container:"kalendae",calendar:"k-calendar",monthFirst:"k-first-month",monthMiddle:"k-middle-month",monthLast:"k-last-month",title:"k-title",previousMonth:"k-btn-previous-month",nextMonth:"k-btn-next-month",previousYear:"k-btn-previous-year",nextYear:"k-btn-next-year",caption:"k-caption",header:"k-header",days:"k-days",week:"k-week",dayOutOfMonth:"k-out-of-month",dayInMonth:"k-in-month",dayActive:"k-active",dayDisabled:"k-disabled",daySelected:"k-selected",dayInRange:"k-range",dayInRangeStart:"k-range-start",dayInRangeEnd:"k-range-end",dayToday:"k-today",monthSeparator:"k-separator",disablePreviousMonth:"k-disable-previous-month-btn",disableNextMonth:"k-disable-next-month-btn",disablePreviousYear:"k-disable-previous-year-btn",disableNextYear:"k-disable-next-year-btn",disableYearNav:"k-disable-year-nav"},disablePreviousMonth:!1,disableNextMonth:!1,disablePreviousYear:!1,disableNextYear:!1,directions:{past:function(i){return t(i).startOf("day").yearDay()>=e()},"today-past":function(i){return t(i).startOf("day").yearDay()>e()},any:function(t){return!1},"today-future":function(i){return t(i).startOf("day").yearDay()<e()},future:function(i){return t(i).startOf("day").yearDay()<=e()}},getSelectedAsDates:function(){for(var t=[],e=0,i=this._sel.length;e<i;e++)t.push(this._sel[e].toDate());return t},getSelectedAsText:function(t){for(var e=[],i=0,s=this._sel.length;i<s;i++)e.push(this._sel[i].format(t||this.settings.format||"YYYY-MM-DD"));return e},getSelectedRaw:function(){for(var e=[],i=0,s=this._sel.length;i<s;i++)e.push(t(this._sel[i]));return"range"===this.settings.mode&&1===s&&t(this._sel[0]).isBefore(t())&&e.push(t(t().format(APP.system.format.date.date),APP.system.format.date.date)),e},getSelected:function(e){var i=this.getSelectedAsText(e);switch(this.settings.mode){case"week":case"range":return i.splice(2),1===i.length&&t(i[0],APP.system.format.date.date).isBefore(t())?i+this.settings.rangeDelimiter+APP.lang.Today:i.join(this.settings.rangeDelimiter);case"multiple":return i.join(this.settings.multipleDelimiter);default:return i[0]||null}},isSelected:function(e){if((e=t(e).startOf("day").yearDay())<1||!this._sel||this._sel.length<1)return!1;switch(this.settings.mode){case"week":case"range":var i=this._sel[0]?this._sel[0].startOf("day").yearDay():0,s=this._sel[1]?this._sel[1].startOf("day").yearDay():0;return i===e||s===e?1:i&&s?(e>i&&e<s||i<s&&e<i&&e>s)&&-1:0;case"multiple":for(var a=this._sel.length;a--;)if(this._sel[a].startOf("day").yearDay()===e)return!0;return!1;default:return this._sel[0]&&this._sel[0].startOf("day").yearDay()===e}return!1},setSelected:function(e,i){var a,n=s(e,this.settings.parseSplitDelimiter,this.settings.format),r=s(this.getSelected(),this.settings.parseSplitDelimiter,this.settings.format);for(a=r.length;a--;)this.removeSelected(r[a],!1);for(a=n.length;a--;)this.addSelected(n[a],!1);!1!==i&&(n[0]&&(this.viewStartDate=t(n[0],this.settings.format)),this.draw())},addSelected:function(e,i){switch(e=t(e,this.settings.format).hours(12),this.settings.dayOutOfMonthClickable&&"range"!==this.settings.mode&&this.makeSelectedDateVisible(e),this.settings.mode){case"multiple":if(this.isSelected(e))return!1;this._sel.push(e);break;case"range":1!==this._sel.length?this._sel=[e]:e.startOf("day").yearDay()>this._sel[0].startOf("day").yearDay()?this._sel[1]=e:this._sel=[e,this._sel[0]];break;default:this._sel=[e]}return this._sel.sort((function(t,e){return t.startOf("day").yearDay()-e.startOf("day").yearDay()})),this.publish("change",this,[e]),!1!==i&&this.draw(),!0},weekSelected:function(e){var i=e.toDate(),s=t(i).startOf("week"),a=t(i).endOf("week").subtract(1,"day");this._sel=[s,a],this.publish("change",this,[e.day()]),this.draw()},monthDaySelected:function(e,i,s){var a=t(e).startOf("month").weekday(i),n=t(e).endOf("month");for(selected=[];a<=n;)a>=t(e).startOf("month")&&!this.direction(a)&&(s?this.removeSelected(t(a).hours(12)):this.addSelected(t(a).hours(12))),a.add(7,"d")},makeSelectedDateVisible:function(e){outOfViewMonth=t(e).date("1").diff(this.viewStartDate,"months"),outOfViewMonth<0?this.viewStartDate.subtract(1,"months"):outOfViewMonth>0&&outOfViewMonth>=this.settings.months&&this.viewStartDate.add(1,"months")},removeSelected:function(e,i){e=t(e,this.settings.format).hours(12);for(var s=this._sel.length;s--;)if(this._sel[s].startOf("day").yearDay()===e.startOf("day").yearDay())return this._sel.splice(s,1),this.publish("change",this,[e]),!1!==i&&this.draw(),!0;return!1},draw:function(){var s,n,r,o,l,d,u,c,h,f,g=t(this.viewStartDate).startOf("month").add(12,"hours"),m=this.classes,p=0,_=0,v=0,y=this.settings;l=this.calendars.length;do{(s=t(g).date(1)).day(s.day()<this.settings.weekStart?this.settings.weekStart-7:this.settings.weekStart),(n=this.calendars[p]).header.parentNode.setAttribute("data-datestart",g.format(this.settings.dayAttributeFormat)),n.caption.innerHTML=g.format(this.settings.titleFormat),_=0,d=0,v=0,c=[];for(var b=0;b<7;b++)a.removeClassName(n.header.children[b],m.daySelected),c[b]=0;do{"week"==y.mode?(_%7==0&&0!==_&&d++,r=n.days[d].childNodes[_%7]):r=n.days[_],o=[],(u=this.isSelected(s))&&o.push({"-1":m.dayInRange,1:m.daySelected,true:m.daySelected}[u]),"range"===y.mode&&(this._sel[0]&&this._sel[0].startOf("day").yearDay()===s.clone().startOf("day").yearDay()&&o.push(m.dayInRangeStart),this._sel[1]&&this._sel[1].startOf("day").yearDay()===s.clone().startOf("day").yearDay()&&o.push(m.dayInRangeEnd)),y.dayHeaderClickable&&"multiple"===y.mode&&(o.push("k-day-week-"+s.weekday()),1!=u&&1!=u||this.direction(s)||g.format("M")!=s.format("M")||(c[s.weekday()]=c[s.weekday()]+1)),s.month()!=g.month()?o.push(m.dayOutOfMonth):o.push(m.dayInMonth),!(this.blackout(s)||this.direction(s)||s.month()!=g.month()&&!1===y.dayOutOfMonthClickable)||u>0?o.push(m.dayActive):y.hide_disabled&&o.push(m.dayDisabled),s.clone().startOf("day").yearDay()===e()&&o.push(m.dayToday),h=s.format(this.settings.dayAttributeFormat),y.dateClassMap[h]&&o.push(y.dateClassMap[h]),r.innerHTML=s.format(y.dayNumberFormat),r.className=o.join(" "),r.setAttribute("data-date",h),s.add(1,"days")}while(++_<42);if(b=0,c.length>0)do{if(c[b]>0){var w=i.moment(g).startOf("month").weekday(b),k=i.moment(g).startOf("month");endMonth=i.moment(g).endOf("month"),v=0;do{w>=k&&!this.direction(w)&&v++,w.add(7,"d")}while(w<=endMonth);v==c[b]?a.addClassName(n.header.children[b],m.daySelected):a.removeClassName(n.header.children[b],m.daySelected)}}while(++b<c.length);g.add(1,"months")}while(++p<l);if(y.directionScrolling){var C=t().startOf("day").hours(12);f=g.diff(C,"months",!0),"today-past"===y.direction||"past"===y.direction?f<=0?(this.disableNextMonth=!1,a.removeClassName(this.container,m.disableNextMonth)):(this.disableNextMonth=!0,a.addClassName(this.container,m.disableNextMonth)):"today-future"!==y.direction&&"future"!==y.direction||(f>y.months?(this.disablePreviousMonth=!1,a.removeClassName(this.container,m.disablePreviousMonth)):(this.disablePreviousMonth=!0,a.addClassName(this.container,m.disablePreviousMonth))),"today-past"===y.direction||"past"===y.direction?f<=-11?(this.disableNextYear=!1,a.removeClassName(this.container,m.disableNextYear)):(this.disableNextYear=!0,a.addClassName(this.container,m.disableNextYear)):"today-future"!==y.direction&&"future"!==y.direction||(f>11+y.months?(this.disablePreviousYear=!1,a.removeClassName(this.container,m.disablePreviousYear)):(this.disablePreviousYear=!0,a.addClassName(this.container,m.disablePreviousYear)))}}};var s=function(e,i,s){var n=[];"string"==typeof e?e=e.split(i):a.isArray(e)||(e=[e]);var r,o=e.length,l=0;do{e[l]&&(r=t(e[l],[s.replace("YYYY","YY")].concat([s])).hours(12)).isValid()&&n.push(r)}while(++l<o);return n};window.Kalendae=i;var a=i.util={isIE8:function(){return!(!/msie 8./i.test(navigator.appVersion)||/opera/i.test(navigator.userAgent)||!window.ActiveXObject||!XDomainRequest||window.msPerformance)},$:function(t){return"string"==typeof t?document.getElementById(t):t},$$:function(t){return document.querySelectorAll(t)},make:function(t,e,i){var s,a=document.createElement(t);if(e)for(s in e)e.hasOwnProperty(s)&&a.setAttribute(s,e[s]);return i&&i.appendChild(a),a},isVisible:function(t){return t.offsetWidth>0||t.offsetHeight>0},getStyle:function(t,e){var i,s;return t.currentStyle?i=t.currentStyle[e]:window.getComputedStyle&&(i=(s=window.getComputedStyle(t,null))?s[e]:""),i},domReady:function(t){var e=document.readyState;"complete"===e||"interactive"===e?t():setTimeout((function(){a.domReady(t)}),9)},addEvent:function(t,e,i){var s=function(e){var s=(e=e||window.event).target||e.srcElement,a=i.apply(t,[e,s]);return!1===a&&(e.preventDefault?e.preventDefault():(e.returnValue=!1,e.cancelBubble=!0)),a};return t.attachEvent?t.attachEvent("on"+e,s):t.addEventListener(e,s,!1),s},removeEvent:function(t,e,i){t.detachEvent?t.detachEvent("on"+e,i):t.removeEventListener(e,i,!1)},fireEvent:function(t,e){if(document.createEvent){var i=document.createEvent("HTMLEvents");i.initEvent(e,!0,!0),t.dispatchEvent(i)}else document.createEventObject?t.fireEvent("on"+e):"function"==typeof t["on"+e]&&t["on"+e]()},hasClassName:function(t,e){if(!(t=a.$(t)))return!1;var i=t.className;return i.length>0&&(i==e||new RegExp("(^|\\s)"+e+"(\\s|$)").test(i))},addClassName:function(t,e){(t=a.$(t))&&(a.hasClassName(t,e)||(t.className+=(t.className?" ":"")+e))},removeClassName:function(t,e){(t=a.$(t))&&(t.className=a.trimString(t.className.replace(new RegExp("(^|\\s+)"+e+"(\\s+|$)")," ")))},isFixed:function(t){do{if("fixed"===a.getStyle(t,"position"))return!0}while(t=t.offsetParent);return!1},scrollContainer:function(t){do{var e=a.getStyle(t,"overflow");if("auto"===e||"scroll"===e)return t}while((t=t.parentNode)&&t!=window.document.body);return null},getPosition:function(t,e){var i=t.getBoundingClientRect(),s=e?t.offsetLeft:i.left,a=e?t.offsetTop:i.top,n={};return n[0]=n.left=s,n[1]=n.top=a,n},getHeight:function(t){return t.offsetHeight||t.scrollHeight},getWidth:function(t){return t.offsetWidth||t.scrollWidth},trimString:function(t){return t.replace(/^\s+/,"").replace(/\s+$/,"")},merge:function(){for(var t=!0===arguments[0],e={},i=t?1:0,s=function(e,i){if("object"==typeof i){for(var s in i)i.hasOwnProperty(s)&&(t&&"object"==typeof e[s]&&"object"==typeof i[s]?_update(e[s],i[s]):e[s]=i[s]);return e}};i<arguments.length;i++)s(e,arguments[i]);return e},isArray:function(t){return"[object Array]"==Object.prototype.toString.call(t)}};"function"==typeof document.addEventListener&&i.util.domReady((function(){for(var t,e,s,n=a.$$(".auto-kal"),r=n.length;r--;)e=null==(s=(t=n[r]).getAttribute("data-kal"))||""==s?{}:new Function("return {"+s+"};")(),"INPUT"===t.tagName?new i.Input(t,e):new i(a.merge(e,{attachTo:t}))})),i.Input=function(e,n){if("function"==typeof document.addEventListener||a.isIE8()){var r,o,l=this.input=a.$(e),d=!1;if(!l||"INPUT"!==l.tagName)throw"First argument for Kalendae.Input must be an <input> element or a valid element id.";var u=this,c=u.classes,h=u.settings=a.merge(u.defaults,n);this._events={},h.attachTo=window.document.body,h.selected?r=!0:h.selected=l.value,i.call(u,h),h.closeButton&&(o=a.make("a",{class:c.closeButton},u.container),a.addEvent(o,"click",(function(){l.blur()}))),r&&(l.value=u.getSelected());var f=u.container,g=!1;f.style.display="none",a.addClassName(f,c.positioned),this._events.containerMouseDown=a.addEvent(f,"mousedown",(function(t,e){g=!0})),this._events.documentMousedown=a.addEvent(window.document,"mousedown",(function(t,e){g=!1})),this._events.inputFocus=a.addEvent(l,"focus",(function(){d=!0,u.setSelected(this.value),d=!1,u.show()})),this._events.inputBlur=a.addEvent(l,"blur",(function(){g&&a.isIE8()?(g=!1,l.focus()):u.hide()})),this._events.inputKeyup=a.addEvent(l,"keyup",(function(e){d=!0;var i=s(this.value,u.settings.parseSplitDelimiter,u.settings.format);i&&i.length&&i[0]&&i[0].year()>1e3?u.setSelected(this.value):(u.setSelected("",null),u.viewStartDate=t(u.defaultView),u.draw()),d=!1}));var m=a.scrollContainer(l);m&&a.addEvent(m,"scroll",(function(t){l.blur()})),u.subscribe("change",(function(){d||(l.value=u.getSelected(),a.fireEvent(l,"change"))}))}},i.Input.prototype=a.merge(i.prototype,{defaults:a.merge(i.prototype.defaults,{format:"MM/DD/YYYY",side:"bottom",closeButton:!0,offsetLeft:0,offsetTop:0}),classes:a.merge(i.prototype.classes,{positioned:"k-floating",closeButton:"k-btn-close"}),show:function(){var t=this.container,e=t.style,i=this.input,s=a.getPosition(i),n=a.scrollContainer(i),r=n?n.scrollTop:0,o=n?n.scrollLeft:0,l=this.settings;switch(e.display="",l.side){case"left":e.left=s.left-a.getWidth(t)+l.offsetLeft-o+"px",e.top=s.top+l.offsetTop-r+"px";break;case"right":e.left=s.left+a.getWidth(i)-o+"px",e.top=s.top+l.offsetTop-r+"px";break;case"top":e.left=s.left+l.offsetLeft-o+"px",e.top=s.top-a.getHeight(t)+l.offsetTop-r+"px";break;case"bottom right":e.left=s.left-a.getWidth(t)+a.getWidth(i)+l.offsetLeft+"px",e.top=s.top+a.getHeight(i)+l.offsetTop-r+"px";break;default:e.left=s.left+l.offsetLeft-o+"px",e.top=s.top+a.getHeight(i)+l.offsetTop-r+"px"}e.position=a.isFixed(i)?"fixed":"absolute",this.publish("show",this)},hide:function(){this.container.style.display="none",this.publish("hide",this)},destroy:function(){var t=this.container,e=this.input;a.removeEvent(t,"mousedown",this._events.containerMousedown),a.removeEvent(window.document,"mousedown",this._events.documentMousedown),a.removeEvent(e,"focus",this._events.inputFocus),a.removeEvent(e,"blur",this._events.inputBlur),a.removeEvent(e,"keyup",this._events.inputKeyup),t.parentNode&&t.parentNode.removeChild(t)}});var n=function(t){t||(t=this);var e=t.c_||{};t.publish=function(t,i,s){for(var a,n=e[t],r=n?n.length:0;r--;)if("boolean"==typeof(a=n[r].apply(i,s||[])))return a},t.subscribe=function(t,i,s){return e[t]||(e[t]=[]),s?e[t].push(i):e[t].unshift(i),[t,i]},t.unsubscribe=function(t){for(var i=e[t[0]],s=t[1],a=i?i.length:0;a--;)i[a]===s&&i.splice(a,1)}};if(void 0!==t&&(i.moment=t),!i.moment){if(!window.moment)throw"Kalendae requires moment.js. You must use kalendae.standalone.js if moment is not available on the page.";i.moment=window.moment}return(t=i.moment).fn.yearDay=function(t){var e=Math.floor(this._d/864e5);return void 0===t?e:this.add({d:t-e})},void 0===r||"function"!=typeof document.addEventListener&&!a.isIE8()||(r.fn.kalendae=function(t){return this.each((function(e,s){"INPUT"===s.tagName?r(s).data("kalendae",new i.Input(s,t)):r(s).data("kalendae",new i(r.extend({},{attachTo:s},t)))})),this}),i},void 0===(n=s.apply(e,a))||(t.exports=n);var o="vendor/kalendae/kalendae";window.define(o,(function(){var e="undefined",i=typeof __webpack_exports__===e?typeof n===e?typeof t===e?void 0:t.exports:n:__webpack_exports__;return i&&i.default||i})),window.require([o])},147562:(t,e,i)=>{"use strict";i.r(e),i.d(e,{default:()=>u});var s=i(661533),a=i.n(s),n=i(629133),r=i.n(n),o=i(313981),l=i(564638),d=i(982862);const u=o.default.extend({events:{scroll:"onScrollChange"},initialize:function(t){var e=this;o.default.prototype.initialize.apply(this),this._paused=0,this._clean=!0,this.options=r().extend({max_sticky_count:1/0,exclude_scrollbar:!1,disable_click:!1,top_offset:0,no_stack_items:!1,no_viewport_change:!1,stop_propagation_for_header_click:!1,onInside:r().noop,onOutside:r().noop,onUpdate:r().noop,getCompareBoundary:r().noop},t||{}),this.options.disable_click||this.$el.on("click".concat(this.ns),this.options.selector,r().bind(this.onHeaderClick,this)),this._$window.on("resize".concat(this.ns),r().throttle((function(){e.cleanup(),e.refresh()}),l.WINDOW_RESIZE_THROTTLE_DELAY)),this._$window.on("resize".concat(this.ns),r().debounce((function(){e.cleanup(),e.refresh()}),200))},destroy:function(){this._destroyed=!0,this._$window.off(this.ns),o.default.prototype.destroy.apply(this)},onScrollChange:function(){this._setScrollTop(),this._isPaused()||this.update()},cleanup:function(t){return this._clean||((t=t||this.headers)&&t.length&&!this._destroyed&&r().each(t,(function(t){t.parentNode&&t.parentNode!==this.el&&(t.parentNode.style.height=""),t.style.top="",t.style.bottom="",t.style.width="",t.classList.remove("outside"),t.classList.remove("outside-top"),t.classList.remove("outside-bottom")}),this),this._clean=!0),this._clean},refresh:function(t){var e,i,s,a=this.options.exclude_scrollbar?(0,d.getScrollBarWidth)("custom-scroll"):0,n=this.options.top_offset;this._destroyed||(r().isUndefined(this._scroll_top)&&this._setScrollTop(),s=Array.prototype.slice.call(this.el.querySelectorAll(this.options.selector)),r().isFunction(this.options.filterElements)&&(s=this.options.filterElements(s)),r().isEqual(s,this.headers)||this.cleanup(r().difference(s,this.headers)),this.headers=r().filter(s,(function(t){return!!(t.offsetWidth||t.offsetHeight||t.getClientRects().length)})),this.top_fix_heights=[],this.top_real_heights=[],this.header_tops=[],this.fixed_heights=[],this.top_offsets=[],this.headers.length&&this.headers.length<this.options.max_sticky_count&&(this.el.style.maxHeight="",i=this.$el.css("max-height"),e=/%$/.test(i),i=parseInt(i),(r().isNaN(i)||e)&&(i=parseInt(this.$el[0].offsetHeight)),this.viewport_size=i,r().isFunction(this.options.getViewportHeight)&&(this.viewport_size=this.options.getViewportHeight()),this.el.style.maxHeight="".concat(this.viewport_size,"px"),this.headers=r().filter(this.headers,(function(t,e){var i=this.options.getCompareBoundary(t,e)||"top";t.parentNode!==this.el&&(t.parentNode.style.height="".concat(t.offsetHeight,"px"));var o=t.parentNode.clientWidth-a;return!!o&&(t.style.width="".concat(o,"px"),this.options.no_stack_items||this.options.no_viewport_change||(this.viewport_size-=t.offsetHeight),r().isFunction(this.options.top_offset)&&(n=this.options.top_offset(t,s)),this.top_offsets[e]=n,this.header_tops[e]=t.parentNode.offsetTop-(e>0?n:0),this.header_tops[e]+="top"===i?0:t.offsetHeight,this.top_fix_heights[e]=this.top_fix_heights[e-1]||0,this.top_real_heights[e]=this.top_real_heights[e-1]||Math.min(this.header_tops[e],0),this.headers[e-1]&&!this.options.no_stack_items&&(this.top_fix_heights[e]+=this.headers[e-1].offsetHeight,this.top_real_heights[e]+=this.headers[e-1].offsetHeight),"bottom"===i&&(this.top_real_heights[e]=0),!0)}),this)),this.fix_flag=[],this._clean=!1,r().isFunction(t)&&t(),this.update())},update:function(){var t,e,i=this._scroll_top;this._clean||(this.headers&&this.headers.length&&this.headers.length<this.options.max_sticky_count&&!this._destroyed&&(r().each(this.headers,(function(s,a){t=0,this.header_tops[a]-i<this.top_real_heights[a]?(t=1,e=this.fixed_heights[a-1]||this.top_fix_heights[a]):this.header_tops[a]-i>this.top_real_heights[a]+this.viewport_size?(t=2,e=this.el.clientHeight-s.offsetHeight-this.top_fix_heights[a]-this.viewport_size):(t=3,e=null),null!==e&&(e+=this.top_offsets[a]||0),t!==this.fix_flag[a]&&(s.style.top="",s.style.bottom="",s.classList.remove("outside"),s.classList.remove("outside-top"),s.classList.remove("outside-bottom"),null===e?this.options.onInside(s,this.headers):(1===t?(s.style.top="".concat(e,"px"),s.classList.add("outside-top")):(s.style.bottom="".concat(e,"px"),s.classList.add("outside-bottom")),s.classList.add("outside"),this.fixed_heights[a]=(this.fixed_heights[a-1]||0)+s.offsetHeight,this.options.onOutside(s,this.headers,1===t?"top":"bottom")),this.fix_flag[a]=t)}),this),this._setLastTopHeader()),this.options.onUpdate(this.headers,{scroll_top:i}))},pause:function(){this._paused++},resume:function(){this._paused--},_isPaused:function(){return 0!==this._paused},_setScrollTop:function(){this._scroll_top=Math.ceil(this.$el.scrollTop())},_setLastTopHeader:function(){var t=r().findIndex(this.headers,(function(t){return t.classList.contains("outside-top_last")})),e=r().findLastIndex(this.headers,(function(t){return t.classList.contains("outside-top")}));(-1===e||e!==t)&&t>-1&&this.headers[t].classList.remove("outside-top_last"),e>-1&&e!==t&&this.headers[e].classList.add("outside-top_last")},onHeaderClick:function(t){var e=t.currentTarget,i=a()(e).parent(),s=this.$el.find(this.options.selector).get(),n=0,r=s[n],o=0;for(this.options.stop_propagation_for_header_click&&t.stopPropagation();r&&r!==e;)o+=a()(r).parent().height(),r=s[++n];this.$el.scrollTop(i[0].offsetTop-o)}});var c="../build/transpiled/components/base/sticky_headers";window.define(c,(function(){var t="undefined",i=typeof e===t?typeof __WEBPACK_AMD_DEFINE_RESULT__===t?typeof module===t?void 0:module.exports:__WEBPACK_AMD_DEFINE_RESULT__:e;return i&&i.default||i})),window.require([c])},242284:(t,e,i)=>{"use strict";i.r(e);var s=i(661533),a=i.n(s),n=i(629133),r=i.n(n),o=i(564638);function l(){switch(APP.data.current_entity){case"events":return"#sidebar_events";case"settings-users":return"#user_right_aside";default:return"#sidebar"}}a()(document).off("click",".aside-toggleable #sidebar_toggler, .js-aside_toggler").on("page:changed.filter",(function(){a()(l()).toggleClass("sidebar-expanded",!1),a()("#sidebar__right").toggleClass("sidebar-expanded",!1),a()("#sidebar_overlay, #filter_overlay").trigger("overlay:hide")})).on("click",".filter-sidebar",(function(){a()("#sidebar__right").toggleClass("sidebar-expanded"),a()(".sidebar__button__close").css({"background-image":"none"}),a()(document.body).append(a()('<div class="default-overlay" id="filter_overlay"></div>')),a()("#filter_overlay").trigger("overlay:show")})).on("click",".aside-toggleable #sidebar_toggler, .js-aside_toggler",(function(){var t=a()(l());if(t.toggleClass("sidebar-expanded"),t.hasClass("sidebar-expanded")){var e=a()('<div class="default-overlay" id="sidebar_overlay"></div>');a()(document.body).append(e),e.trigger("overlay:show")}else a()("#sidebar_overlay").trigger("overlay:hide")})).on("click",".sidebar__button__close, #filter_overlay",(function(){a()("#filter_overlay").trigger("overlay:hide"),a()("#sidebar__right").toggleClass("sidebar-expanded",!1)})).on("click","#sidebar_overlay",(function(){a()("#sidebar_overlay").trigger("overlay:hide"),a()(l()).toggleClass("sidebar-expanded",!1)})),a()(window).on("resize",r().throttle((function(){var t,e=null!==(t=a()(window).width())&&void 0!==t?t:0,i=a()(l());e>1279&&i.hasClass("sidebar-expanded")&&(a()("#sidebar_overlay").trigger("overlay:hide"),a()(l()).toggleClass("sidebar-expanded",!1))}),o.WINDOW_RESIZE_THROTTLE_DELAY));var d="../build/transpiled/components/filter/common";window.define(d,(function(){var t="undefined",i=typeof e===t?typeof __WEBPACK_AMD_DEFINE_RESULT__===t?typeof module===t?void 0:module.exports:__WEBPACK_AMD_DEFINE_RESULT__:e;return i&&i.default||i})),window.require([d])},526471:(t,e,i)=>{"use strict";i.r(e),i.d(e,{default:()=>g});var s,a=i(661533),n=i.n(a),r=i(629133),o=i.n(r),l=i(345839),d=i.n(l),u=i(729115),c=function(t){return t&&"object"==typeof t?o().isString(t)?String.prototype.slice.call(t):o().isDate(t)?new Date(t.valueOf()):o().isFunction(t.clone)?t.clone():o().isArray(t)?o().map(t,(function(t){return c(t)})):o().mapObject(t,(function(t){return c(t)})):t},h=(s=o().allKeys,!0,function(t){var e,i,a,n,r,o,l=arguments.length;if(l<2||null===t)return t;for(e=1;e<l;e++)for(o=(a=s(i=arguments[e])).length,r=0;r<o;r++)void 0!==t[n=a[r]]||(t[n]=c(i[n]));return t}),f=u.default.Model.extend({initialize:function(){this.defaults=c(this.attributes)},setDefaults:function(){this.defaults=h(this.defaults,this.attributes)},updateDefaults:function(){this.defaults=n().extend(!0,{},this.defaults,this.attributes)},set:function(t,e,i){if("statistic_select"!==t)return o().isObject(t)?o().each(t,(function(e,i){t[i]=s(e)})):e=s(e),u.default.Model.prototype.set.call(this,t,e,i);function s(t){return o().isArray(t)?o()(t).sort():t}},toJSON:function(t){var e=d().Model.prototype.toJSON.call(this),i={};return t=t||!1,o().isObject(t)?(o().mapObject(t,(function(t,e){var s=o().findKey(this.attributes,(function(t,i){return-1!==i.indexOf(e)}));i[s]=this.get(s),-1!==e.indexOf("from")&&(e=e.replace("from","to"),i[e]=this.get(e))}),this),i):e}});const g={View:u.default.View.extend({_cached_form_html:null,destroy:function(){this.$(".pipeline-select-wrapper").off("filter:statuses:update"),this.remove(!1)},updateCache:function(){this._cached_form_html=this.$el.html()},revert:function(){this._cached_form_html&&this.$el.html(this._cached_form_html),this.initModelFromForm(),this.model.trigger("filter:reinit"),this.model.trigger("has_reverted",{type:"has_reverted"})},initModelFromForm:function(){var t=this;this._cached_form_html=this.$el.html(),o().each(this.$(":input"),(function(t){this.setModelValue(n()(t))}),this),this.model.deepCloneDefaults(),this.model.url||(this.model.url=this.$el.attr("action")),this.$(".pipeline-select-wrapper").on("filter:statuses:update",(function(e,i){t.showLossReasonsInput(i.statuses),t.showUnsortedCategoriesInput(i.statuses)}))},setInputValue:function(t,e,i,s){var a=t.attr("type");switch(s=s||{},i=i||t.attr("name"),a){case"checkbox":case"radio":t.prop("checked",e);break;default:t.val(e)}s.silent||t.trigger("change").trigger("controls:change"),this.setModelValue(t)},checkDeleted:function(){o().each(this.model.attributes,(function(t,e){var i=this.$el.find(':input[name="'.concat(e,'"]:not(.js-form-changes-skip)')),s=[];i.length?i.is(":checkbox")&&o().isArray(t)&&(s=i.map((function(t,e){return e.value})).toArray(),this.model.attributes[e]=o().filter(t,(function(t){return o().contains(s,t)}))):delete this.model.attributes[e]}),this),this.checkChanges()},changeInModel:function(t,e){this.setModelValue(n()(t.currentTarget),e),this.checkChanges()},setModelValue:function(t,e){var i,s,a=t.attr("name"),n=this.model.get(a);if(e=e||{},t.length&&a&&!t.hasClass("js-form-changes-skip")&&!t.closest(".filter__custom_settings__item").is([".filter__custom_settings__item_unsorted-categories.hidden",".filter__custom_settings__item_loss-reasons.hidden"].join(","))&&!t.attr("disabled")){if("checkbox"===t[0].type){if(i=this.getInputValue(t),n)switch(o().isArray(n)||(n=[n]),i?n.push(i):(s=o().contains(n,t.val())?t.val():!!o().contains(n,!0)||"on",n=o().without(n,s)),(i=o().sortBy(o().uniq(n),(function(t){return(t||"").toString()}))).length){case 1:i=i[0];break;case 0:i=""}}else i=this.getInputValue(t);"status"===t.attr("data-field_type")&&(this.showLossReasonsInput(i),this.showUnsortedCategoriesInput(i)),this.model.set(a,i,{silent:e.base_form_silent||!1})}},setFormChanges:function(t,e){e&&e.is_called_inside_on_change&&(this.model._changing=!1),this.model.set(t),e&&!1!==e.is_input_update_needed&&o().each(t,(function(t,e){this.setInputValue(this.$el.find('[name="'.concat(e,'"]')),t,e)}),this)},showUnsortedCategoriesInput:function(t){var e=this.$el.find(".filter__custom_settings__item_unsorted-categories");t=(t=o().isArray(t)?t:[t]).map((function(t){return parseInt(t)})),t=o().intersection(t,Object.keys(APP.constant("unsorted_statuses")).map((function(t){return parseInt(t)}))),o().isEmpty(t)?e.hasClass("hidden")||(e.hasClass("glow")&&this.model.unset("filter[unsorted_category][]"),e.addClass("hidden")):e.removeClass("hidden")},showLossReasonsInput:function(t){var e=this.$el.find(".filter__custom_settings__item_loss-reasons");t=o().isArray(t)?t:[t],o().contains(t,"143")?e.removeClass("hidden"):e.hasClass("hidden")||(e.hasClass("glow")&&this.model.unset("filter[loss_reason_id][]"),e.addClass("hidden"))}}),Model:f};var m="../build/transpiled/components/filter/form";window.define(m,(function(){var t="undefined",i=typeof e===t?typeof __WEBPACK_AMD_DEFINE_RESULT__===t?typeof module===t?void 0:module.exports:__WEBPACK_AMD_DEFINE_RESULT__:e;return i&&i.default||i})),window.require([m])},89758:(t,e,i)=>{"use strict";i.r(e),i.d(e,{default:()=>b});var s,a,n=i(661533),r=i.n(n),o=i(629133),l=i.n(o),d=i(161320),u=i.n(d),c=i(323344),h=i(926168),f=i(214558),g=(0,h.getLeadsWinlostStatuses)(),m=["filter_date_from","filter_date_to","filter[date][from]","filter[date][to]"],p=/^(filter\[(cf|custom_fields)\]\[\d+\]\[)(from|to)(])$/g,_={leads:function(){var t="",e=!(0,c.getQueryParam)("term")||this._searching,i=this.getFilterStatuses(e);return i.length&&(t=this.sortFilter(i)),this.getDefaultFilterTagsLogic(t)},"leads-pipeline":function(){return _.leads.call(this)},customers:function(){return this.sortFilter([{name:"filter[segments_logic]",value:"and"}])},events:function(){return this.sortFilter([{name:"filter_date_switch",value:"created"},{name:"filter[main_user][]",value:""}])},dashboard:function(){return this.sortFilter([{name:"filter_date_switch",value:"created"},{name:"filter[main_user][]",value:""}])},todo:function(){var t=l().map(APP.constant("task_types"),(function(t){return{name:"filter[task_type][]",value:t.id}}));return this.sortFilter(l().union([{name:"filter[task_type][]",value:"1"},{name:"filter[task_type][]",value:"2"},{name:"filter[status][]",value:"uncompl"},{name:"filter[main_user][]",value:((0,f.current)("id")||"").toString()}],t))},"todo-calendar":function(){return _.todo.call(this)},"todo-line":function(){return _.todo.call(this)},stats:function(){var t=[];switch(this.params._report_type){case"winlost":t=APP.constant("default_filter")||[];break;case"consolidated":t=this.getFilterStatuses();break;case"goals":t=(t=t.concat(r().makeArray(this.$('[name="filter[group][]"]').map((function(){return{name:this.name,value:this.value}}))))).concat([{name:"filter[month]",value:(u()().month()+1).toString()},{name:"filter[year]",value:u()().year().toString()}])}return this.sortFilter(t)},"settings-users":function(){var t=[{name:"active[]",value:"Y"}];return this.params.is_all_preset_first&&t.push({name:"active[]",value:"N"}),this.sortFilter(t)},statsCalls:function(){var t=[];return t=(t=(t=(t=t.concat(r().makeArray(this.$('[name="entity[]"]').map((function(){return{name:this.name,value:this.value}}))))).concat(r().makeArray(this.$('[name="filter[group_id][]"]').map((function(){return{name:this.name,value:this.value}}))))).concat(r().makeArray(this.$('[name="call_status[]"]').map((function(){return{name:this.name,value:this.value}}))))).concat(r().makeArray(this.$('[name="call_type[]"]').map((function(){return{name:this.name,value:this.value}})))),this.sortFilter(t)},files:function(){return this.sortFilter([{name:"filter[size][unit]",value:"1000000"}])},"files-trash":function(){return this.sortFilter([{name:"filter[size][unit]",value:"1000000"}])}},v=(s={filter_date_switch:["","created","on"],"filter[date_preset]":[""],"filter[main_contact][date_preset]":[""],"filter[company][date_preset]":[""],"filter[next_date][date_preset]":[""],fake:["","fake"],"filter[segments_logic]":"and","filter[size][unit]":["1","1000","1000000","1000000000"]},a=["company","main_contact"],l().each(s,(function(t,e){l().each(a,(function(i){s["filter[%s][%d]".replace("%s",i).replace("%d",e)]=t}))})),s["filter[date][type]"]=["","create","on"],s["filter[tags_logic]"]=["or"],s),y={};const b={getDefaultFilter:function(){var t=APP.data.current_entity,e=_[t],i=l().isFunction(e)?e.call(this):e;return y[t]=l().extend({},v,(0,c.QStoJSON)(i)),i},filterDefaultValues:function(t,e,i){var s=y[APP.data.current_entity],a=(i&&s||v)[t];return!!a&&(l().isArray(a)?l().isArray(e)?l().isEqual(a,e):l().contains(a,e):a===e)},filterDefaultsDatePresetCheck:function(t){var e,i,s=!1;return l().contains(m,t)&&(e=["filter[date_preset]","filter[date][date_preset]"],s=!0),t.match(p)&&(e=[t.replace(p,"$1date_preset$4")],s=!0),!!s&&(i=l().reduce(e,(function(t,e){return t||(t=this.form.model.get(e)),t}),"",this),!l().isEmpty(i)&&!this.filterDefaultValues(e,i))},getFilterStatuses:function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return r().makeArray(this.$('[name="filter[status_id][]"], [name^="filter[pipe]"]').filter((function(){return!t||!l().contains(g,parseInt(this.value))})).map((function(){return{name:this.name,value:this.value}})))},sortFilter:function(t){return l().chain(t).map((function(t){return"".concat(t.name,"=").concat(t.value)})).sortBy((function(t){return t})).value().join("&")},getDefaultFilterTagsLogic:function(t){var e=this.form.model.get("filter[tags_logic]")?"filter[tags_logic]=or":"";return t&&e&&(e="&".concat(e)),(t||"")+e}};var w="../build/transpiled/components/filter/mixins/defaults";window.define(w,(function(){var t="undefined",i=typeof e===t?typeof __WEBPACK_AMD_DEFINE_RESULT__===t?typeof module===t?void 0:module.exports:__WEBPACK_AMD_DEFINE_RESULT__:e;return i&&i.default||i})),window.require([w])},727526:(t,e,i)=>{"use strict";i.r(e),i.d(e,{default:()=>v});var s=i(661533),a=i.n(s),n=i(629133),r=i.n(n),o=i(161320),l=i.n(o),d=i(313981),u=i(445368),c=i(49987),h=i(210734),f=i(403474);i(403474),i(368439);var g=f.prototype.draw,m=function(){for(var t=arguments.length,e=new Array(t),i=0;i<t;i++)e[i]=arguments[i];0===this.viewStartDate.year()&&this.viewStartDate.add((new Date).getFullYear(),"y"),g.apply(this,e)},p=r().debounce((function(t){a()(t.input).trigger("controls:change",[t.getSelected()])}),200),_=APP.system.format.date.date;f.prototype.draw=m,f.Input.prototype.draw=m;const v=h.default.extend({controlClassName:"js-control-date",_getDefaults:function(){return this._format=this._elem("date_field").attr("data-format")||_,this._direction=this._direction||"any",{format:this._format,direction:this._direction,hide_disabled:this._hide_disabled,blackout:this._blackout,parseSplitDelimiter:/,\s*|\s*-\s*/,weekStart:"en"===APP.lang_id?0:1,months:1,dayOutOfMonthClickable:!0,titleFormat:this._elem("date_field").attr("data-title-format")||"MMMM YYYY",attachTo:this.el}},_getKalendaeHandler:function(){return f.Input},_classes:function(){return{date_field:"date_field",first_calendar_box:"date_field_with-time_range-box_first",second_calendar_box:"date_field_with-time_range-box_second"}},_selectors:function(){return{range_inputs:".date_field__range_0, .date_field__range_1"}},_hideButton:r().template('<div class="date_filter__done-btn__wrapper clearfix"><button type="button" class="button-input date_filter__done-btn js-date-done" tabindex="-1"><span class="button-input-inner "><span class="button-input-inner__text">'.concat(APP.lang.filter_done,"</span></span></button></div>")),events:function(){var t={"touchstart .date_field_wrapper--calendar":"clickToClearOnIpad","click .date_field_wrapper--calendar":"clickToFocus","click .date_field-js":"clickToFocus"};return t["click ".concat(this._selector("date_field"))]="clickToFocusOnIpad",t["focus ".concat(this._selector("date_field"))]="container",t["controls:date ".concat(this._selector("date_field"))]="container",t["input ".concat(this._selector("date_field"))]="inputInDate",t["keypress ".concat(this._selector("date_field"))]="onDateKeyPress",t["blur ".concat(this._selector("date_field"))]="reformatOnBlur",t["controls:date:check-empty ".concat(this._selector("date_field"))]="inputInDate",t["controls:date:change ".concat(this._selector("date_field"))]="inputInDate",t["controls:change ".concat(this._selector("range_inputs"))]="onRangeChange",t},initialize:function(){for(var t=arguments.length,e=new Array(t),i=0;i<t;i++)e[i]=arguments[i];h.default.prototype.initialize.apply(this,e),this.updatePeriodDate(),this._is_range=this._elem("date_field").hasClass("range"),this._direction=this._elem("date_field").attr("data-direction")||"",this._hide_disabled=!r().isUndefined(this._elem("date_field").attr("data-hide-disabled")),this._blackout=this.getBlackoutCallback(this._elem("date_field").data("blackout")),this.inputInDate({currentTarget:this._elem("date_field").get(0)})},delegateEvents:function(){for(var t=arguments.length,e=new Array(t),i=0;i<t;i++)e[i]=arguments[i];var s=d.default.prototype.delegateEvents.apply(this,e);return this.refocusDateField(),s},getBlackoutCallback:function(t){switch(t){case"today":return function(t){return l()().yearDay()!==l()(t).yearDay()};case"today-tomorrow":return function(t){return!r().contains([l()().add(1,"days").yearDay(),l()().yearDay()],l()(t).yearDay())};case"5year":return function(t){return l()().add(5,"Y").yearDay()<l()(t).yearDay()};default:return null}},destroy:function(){for(var t=arguments.length,e=new Array(t),i=0;i<t;i++)e[i]=arguments[i];this.$container&&(this.$container.off(),this.$input.off()),h.default.prototype.destroy.apply(this,e)},onDateKeyPress:function(t){var e=this._getCharFromKeyPress(t);if(13===t.keyCode&&(this.reformatOnBlur(t),""!==t.target.value.trim()&&this.clickToDone()),!/[\d\s/.-]/.test(e)&&!t.metaKey)return!1},updatePeriodDate:function(t){r().isUndefined(t)&&(t=_),this.date_today=l()().format(t),this.date_from=l()(this.$el.find(".date_field__range_0").attr("value"),_).format(t),this.date_to=l()(this.$el.find(".date_field__range_1").attr("value"),_).format(t)},refocusDateField:function(){this._elem("date_field").is(":focus")&&this._elem("date_field").trigger("blur").trigger("focus")},reformatOnBlur:function(){var t,e,i,s="",a=this.$input&&this.$input.val().trim()||"";r().isUndefined(this.$input)||(a&&(this._is_range?(this.updatePeriodDate(this._format),s=this.date_from===this.date_to?this.date_from===this.date_today?(0,u.i18n)("Today"):this.date_from:"".concat(this.date_from," - ").concat(this.date_to===this.date_today?(0,u.i18n)("Today"):this.date_to)):(t=2===a.split(" ").length,e=a.split(" ")[1]||null,s="Invalid date"===(i=l()(a,(0,c.format)("parse"))).format(this._format)||i.year()<1e3?this.$input.attr("value"):i.format(this._format),t&&(s="".concat(s," ").concat(e)))),this.$input.val(s.trim()).trigger("controls:change",[s]))},_stopPropagationOnCalendarClick:function(t){t.stopPropagation()},clickToFocus:function(t){return a()(t.currentTarget).parent().children(":input").focus(),!1},clickToFocusOnIpad:function(t){APP.is_touch_device&&this.clickToFocus(t)},clickToClearOnIpad:function(t){if(APP.is_touch_device&&this._elem("date_field").is(":not(.empty):focus"))return t.stopPropagation(),this._elem("date_field").val("").trigger("controls:change").trigger("input").blur(),!1},inputInDate:function(t,e){var i=t.currentTarget;(e=e||i.value)?i.classList.remove("empty"):i.classList.add("empty")},onRangeChange:function(){var t=this._elem("range_inputs"),e=["DD.MM.YYYY","DD/MM/YYYY","MM/DD/YYYY"];t.length&&l()(t[0].value,e,!0).isValid()&&l()(t[1].value,e,!0).isValid()&&this._elem("date_field").val("".concat(t[0].value," - ").concat(t[1].value))},clickToDone:function(){this._elem("date_field").trigger("controls:date:done").blur(),this._$document.trigger({type:"controls:hide",target:this.el})},onShowRange:function(){var t=this.container(),e=this.kalendae.getSelectedRaw(),i=this.$input.get(0).getBoundingClientRect();e[1]&&e[1].format(_)===l()().format(_)&&this.kalendae.addSelected(e[1].format(_)),this.setSelection(t);var s=t[0].offsetHeight,a=i.top+window.pageYOffset,n=document.documentElement.scrollHeight;this._elem("date_field").hasClass("date-filter-in-search")?(t.css({top:a}),n<a+s&&(t.addClass("kalendae-at-right").css({top:a-s/2,left:i.left-t[0].offsetWidth-15}),t.offset().left-65<0&&t.css({left:i.left+this.$input.outerWidth()+15}))):(t.css({top:a,left:i.left}),n<a+s?(t.addClass("kalendae-at-top").css("left","+=".concat(this.$el.width()+20)).css("top",a-(s-46)).css("height",270),t.find(".date_filter__done-btn__wrapper").css({position:"absolute",bottom:10})):t.removeClass("kalendae-at-top"),t.visible()||t.removeClass("kalendae-at-top").addClass("kalendae-at-bottom-ragne").css("top",a-40)),this._$document.trigger({type:"controls:hide",target:this.el})},onHideRange:function(){},onDateClickedRange:function(){this.$input.removeClass("empty"),1===this.kalendae.getSelectedRaw().length?(this.container().addClass("range"),(this.$input.closest(".date_filter").length?this.$input.closest(".date_filter"):this.$input.closest(".date_filter__save-overflow")).length&&this.$el.trigger("date-filter:date-change",this.kalendae.getSelected())):(this.container().removeClass("range"),this.$el.find(".date_field__range_1").val("").trigger("change")),this.date_clicked=!0,this.setSelection(this.container())},onChangeRange:function(){if(this.kalendae){var t=this.kalendae,e=a()(t.input),i=this.$input.closest(".date_filter").length?this.$input.closest(".date_filter"):this.$input.closest(".date_filter__save-overflow"),s=t.getSelectedRaw(),n=t.getSelected(),o=a().trim(i.find(".control-toggler__item-selected").text()),d=e.parent().find(".date_field__range_1"),c="";o&&(o+=": "),r().each(s,(function(t,i){e.parent().find(".date_field__range_".concat(i)).val(l()(t._i,t._f||_).format(_)).trigger("change")}),t),s.length&&(e.parent().find(".date_field--clear").show(),s[0]&&!s[1]&&(c=s[0].isBefore(l()().tz(APP.system.timezone))?l()().format(_):l()(s[0]._i,s[0]._f||_).format(_),d.val(c).trigger("change")),this.updatePeriodDate(this._format),n=this.date_from===this.date_today?(0,u.i18n)("Today"):this.date_from,this.date_from!==this.date_to&&(n+=" - ".concat(this.date_to===this.date_today?(0,u.i18n)("Today"):this.date_to)),t.date_clicked&&e.val(n),this.$el.trigger("date-filter:date-change",o+n)),e.one("kalendae:draw",r().bind((function(){t.date_clicked&&(t.date_clicked=!1,e.val(n))}),t)).trigger("controls:change controls:date:change",[t.getSelected()])}},onShowSingle:function(){var t=this.container(),e=this.$input.get(0).getBoundingClientRect(),i=this.$input.outerWidth(),s=e.left;i<18&&(s=e.left-18+i/2),t.removeClass("kalendae-at-top").css({top:e.top,left:s}),t.visible()||t.addClass("kalendae-at-top"),this._$document.trigger({type:"controls:hide:private",target:this.el})},onHideSingle:function(){},onChangeSingle:function(){this.kalendae&&(a()(this.kalendae.input).trigger("controls:date:change",[this.kalendae.getSelected()]),p(this.kalendae))},onDateClickedSingle:function(t){this.$input.attr("from","calendar").val(t.format(APP.system.format.date.date)),this.container().one("mouseup".concat(this.ns),r().bind((function(){this.$input.blur()}),this))},setSelection:function(t){var e;t&&(t.find(".k-selected").length>1&&t.find(".k-selected:first").addClass("k-range"),t.find(".k-days").find(".k-range.k-in-month.k-active:last").each((function(){(e=a()(this).next()).hasClass("k-selected")?e.addClass("k-last-active"):a()(this).addClass("k-last-active")})))},_getCharFromKeyPress:function(t){return null===t.which?t.keyCode<32?null:String.fromCharCode(t.keyCode):0!==t.which&&0!==t.charCode?t.which<32?null:String.fromCharCode(t.which):null},container:function(){return this.$container||(this.kalendae=this._addComponent(this._getKalendaeHandler(),this._elem("date_field").get(0),r().extend(this._getDefaults(),{mode:this._is_range?"range":"single",subscribe:{show:this._is_range?r().bind(this.onShowRange,this,{}):r().bind(this.onShowSingle,this),hide:this._is_range?r().bind(this.onHideRange,this):r().bind(this.onHideSingle,this),change:this._is_range?r().bind(this.onChangeRange,this):r().bind(this.onChangeSingle,this),"date-clicked":this._is_range?r().bind(this.onDateClickedRange,this):r().bind(this.onDateClickedSingle,this)}})),APP.is_touch_device&&this._elem("date_field").prop("readonly",!0),this._elem("date_field").data("kalendae",this.kalendae),this.$container=a()(this.kalendae.container),this.$input=this._elem("date_field"),(this.$el.hasClass(this._class("second_calendar_box"))||this.$el.hasClass(this._class("first_calendar_box"))||this._is_range)&&this.$container.append(this._hideButton()),this.$container.addClass(this.$el.attr("data-kalendae-classname")).on("click",".js-date-done",r().bind(this.clickToDone,this)).on("click",r().bind(this._stopPropagationOnCalendarClick,this))),this.$container}});var y="../build/transpiled/interface/controls/date/index";window.define(y,(function(){var t="undefined",i=typeof e===t?typeof __WEBPACK_AMD_DEFINE_RESULT__===t?typeof module===t?void 0:module.exports:__WEBPACK_AMD_DEFINE_RESULT__:e;return i&&i.default||i})),window.require([y])},792105:(t,e,i)=>{"use strict";i.r(e),i.d(e,{default:()=>p});var s=i(629133),a=i.n(s),n=i(161320),r=i.n(n),o=i(727526),l=i(661533);function d(t,e){for(var i=0;i<e.length;i++){var s=e[i];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(t,s.key,s)}}function u(t,e,i){return u="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,i){var s=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=c(t)););return t}(t,e);if(s){var a=Object.getOwnPropertyDescriptor(s,e);return a.get?a.get.call(i||t):a.value}},u(t,e,i||t)}function c(t){return c=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},c(t)}function h(t,e){return h=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},h(t,e)}function f(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var i,s=c(t);if(e){var a=c(this).constructor;i=Reflect.construct(s,arguments,a)}else i=s.apply(this,arguments);return function(t,e){return!e||"object"!=((i=e)&&"undefined"!=typeof Symbol&&i.constructor===Symbol?"symbol":typeof i)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e;var i}(this,i)}}var g=60,m=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&h(t,e)}(o,t);var e,i,s,n=f(o);function o(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,o),n.apply(this,arguments)}return e=o,i=[{key:"time",get:function(){return this._time},set:function(t){this._time=t}},{key:"_classes",value:function(){return a().extend({selected_time:"js-selected-time",timeplanner:"js-date-time-timeplanner",fifteen:"js-date-time-fifteen"},u(c(o.prototype),"_classes",this).apply(this,arguments))}},{key:"events",value:function(){var t=u(c(o.prototype),"events",this).apply(this,arguments);return t["click.with-time ".concat(this._selector("date_field"))]="_onInputClickToShow",t["input.with-time ".concat(this._selector("date_field"))]="_onInputHandle",t["change.with-time ".concat(this._selector("date_field"))]="_onChangeWithoutTimeHandle",t}},{key:"initialize",value:function(){u(c(o.prototype),"initialize",this).apply(this,arguments),this._elem("date_field").is(":focus")&&(this.container(),this.$input.trigger("focus"))}},{key:"container",value:function(){var t=this.$container,e=u(c(o.prototype),"container",this).apply(this,arguments);return t||this._initTimeplanner(),e}},{key:"onShowSingle",value:function(){u(c(o.prototype),"onShowSingle",this).apply(this,arguments),this._updateCurrentTime()}},{key:"onHideSingle",value:function(){this.$input.trigger("controls:date:hide")}},{key:"onDateKeyPress",value:function(t){var e=this._getCharFromKeyPress(t)||"";return!!a().contains([":","a","p","m"],e.toLowerCase())||u(c(o.prototype),"onDateKeyPress",this).apply(this,arguments)}},{key:"onDateClickedSingle",value:function(t){this.$input.attr("from","calendar").val(t.format(APP.system.format.date.date))}},{key:"_onInputClickToShow",value:function(){var t=this._elem("date_field").data("kalendae");this.$container&&this.$container.is(":hidden")&&t.show()}},{key:"_onChangeWithoutTimeHandle",value:function(t){var e=l(t.currentTarget);e.val()&&(e.val().split(" ").length<2?(this.time||(this.time=r()().hour()*g+r()().minutes()),this._setSelectedTime(this.time)):this._onInputHandle())}},{key:"_onInputHandle",value:function(){if(this.$input){var t=r()(this.$input.val(),APP.system.format.date.full);(t.hour()||t.minutes())&&(this.time=t.hour()*g+t.minutes())}}},{key:"_onTimeplanerFifteenClick",value:function(t){var e=l(t.currentTarget),i=this._elem("date_field").data("kalendae"),s=r()(e.text().trim(),APP.system.format.date.time);this._setSelectedTime(s.hour()*g+s.minutes()),i&&i.hide()}},{key:"_initTimeplanner",value:function(){var t=this,e=r()(),i=l('\n            <div\n              class="date_field__timeplanner '.concat(24===APP.system.format.time?"date_field__timeplanner_military":""," ").concat(this._class("timeplanner"),' custom-scroll"\n            >\n              ').concat(a().map(a().range(24),(function(i){return a().map(a().range(4),(function(s){return'\n                    <div class="date_field__timeplanner-fifteen '.concat(t._class("fifteen"),'">\n                      <span class="date_field__timeplanner-fifteen-value">\n                        ').concat(e.hour(i).minutes(15*s).format(APP.system.format.date.time),"\n                      </span>\n                    </div>\n                  ")})).join("")})).join(""),"\n            </div>\n          ")),s=r()(this.$input.val(),APP.system.format.date.full);(s.hour()||s.minutes())&&(this.time=s.hour()*g+s.minutes()),this.$container.on("click",this._selector("fifteen"),a().bind(this._onTimeplanerFifteenClick,this)).append(i)}},{key:"_convertTo",value:function(t){return"top"===(arguments.length>1&&void 0!==arguments[1]?arguments[1]:"top")?2880*t/1440:1440*t/2880}},{key:"_getTimeplannerMouseTop",value:function(t){var e=this.container().find(this._selector("timeplanner")),i=e.scrollTop()+(t-e.offset().top),s=i/30;return s-Math.floor(s)<=.09&&(i=30*Math.floor(s)),Math.ceil(s)-s<=.09&&(i=30*Math.ceil(s)),i}},{key:"_updateCurrentTime",value:function(){var t=this.container().find(this._selector("timeplanner")),e=this._convertTo(r()().hour()*g+r()().minutes(),"top");t.scrollTop(parseInt(e)-t.height()/2)}},{key:"_updateInputValueWithTime",value:function(t){var e=this._elem("date_field").data("kalendae").getSelected();e?a().isString(e)&&(e=r()(e,APP.system.format.date.date)):e=r()(),e.hour(Math.floor(t/g)),e.minutes(Math.floor(t%g)),this.$input.val(e.format(APP.system.format.date.full)).trigger("controls:date:check-empty")}},{key:"_setSelectedTime",value:function(t){a().isFinite(t)&&t>=0?(this.time=t,this._updateInputValueWithTime(t)):this.$input.val("").trigger("controls:date:check-empty"),this.$input.trigger("change")}}],s=[{key:"controlClassName",get:function(){return"js-control-date-time"}}],i&&d(e.prototype,i),s&&d(e,s),o}(o.default);const p=m.extend(m);var _="../build/transpiled/interface/controls/date/with_time/index";window.define(_,(function(){var t="undefined",i=typeof e===t?typeof __WEBPACK_AMD_DEFINE_RESULT__===t?typeof module===t?void 0:module.exports:__WEBPACK_AMD_DEFINE_RESULT__:e;return i&&i.default||i})),window.require([_])},857185:(t,e,i)=>{"use strict";i.r(e),i.d(e,{default:()=>v});var s=i(661533),a=i.n(s),n=i(629133),r=i.n(n),o=i(460159),l=i.n(o),d=i(445368),u=i(577486),c=a()(document),h="ONLY_SELECT",f={},g={},m={},p="multisuggest__suggest-item",_=!1;m[h]=0,m[40]=1,m[38]=-1,m[39]=1,m[37]=-1,f.getTitle=function(t){var e=t.attr("data-title");return e||(e=t.text()),e},f.scroll=function(t){var e,i,s=t.$list.find(".js-multisuggest-suggest"),n=t.$list.find(".".concat(t.item_class,":visible")),r=n.index(t.$selected);return n.eq(r).removeClass("".concat(t.item_class,"_selected")),n[e=n[r+m[t.keyCode]]?r+m[t.keyCode]:40===t.keyCode?n.length-1:0]&&(n.eq(e).addClass("".concat(t.item_class,"_selected")),i=s.scrollTop()+n.eq(e).position().top,s.scrollTop(i-150),_=!0),a()(this).trigger("multisuggest:set_hint",[t.value,n[e]&&"new"!==n[e].getAttribute("data-id")?f.getTitle(n.eq(e)):""]),!1},f.select=function(t){return t.$selected.length&&t.$list.is(":visible")&&"new"!==t.$selected.attr("data-id")?t.$selected.trigger("suggest:suggest:click",t):t.value&&t.can_add&&a()(this).trigger("multisuggest:item:choose",{is_new:!0,value:t.value,title:t.value,color:t.$selected.data("color"),suggest_params:t.template?{template:t.template}:{}}),!1},f.makeActive=function(t){var e=t.$wrapper.find(".js-multisuggest-list").find(".js-multisuggest-item:not(.multisuggest__list-item_input):not(.js-multisuggest-fake)"),i=e.filter((function(){return a()(this).hasClass("js-active")}));if(!i.length)return 37!==t.keyCode||!!t.value||e.length&&e[e.length-1].classList.add("js-active");var s=e.index(i)+m[t.keyCode];return!(s<0||(i.removeClass("js-active"),s>e.length-1||e[s].classList.add("js-active"),1))},f.removeItem=function(t){var e;return t.hasClass("js-active")?t.trigger("multisuggest:item:remove"):((e=t.closest(".js-multisuggest-list")).find(".js-multisuggest-item.js-active").removeClass("js-active"),t.addClass("js-active"),APP.is_touch_device||e.find(".js-multisuggest-input").focus()),!1},f.clickItem=function(t,e){var i=f.getSuggest(t),s=t.attr("data-id"),a=t.text();"new"===s&&(a=i.find(".js-multisuggest-input").val()),i.trigger("multisuggest:item:choose",[r().extend({title:(0,d.trim)(a),title_origin:t.data("title-origin")},t.data(),{id:"new"===s?"":s,suggest_params:e,is_new:"new"===s})]),i.trigger("multisuggest:select-first")},g[27]=function(){return a()(this).closest(".js-multisuggest").removeClass("multisuggest_show-suggest"),!1},g[8]=function(t){var e;return t.value||((e=a()(this).closest(".js-multisuggest-list").find(".js-multisuggest-item.js-active")).length?e.trigger("multisuggest:item:remove"):f.makeActive(r().extend(t,{keyCode:37}))),!0},g[40]=f.scroll,g[38]=f.scroll,g[h]=f.scroll,g[13]=f.select,g[9]=f.select,g[32]=function(t){return!!t.value||(f.select(t),!1)},g[39]=f.makeActive,g[37]=f.makeActive,f.getSuggest=function(t){var e=t.closest("[data-multisuggest-id]");return"y"===e.attr("data-is-suggest")?a()('.js-multisuggest[data-multisuggest-id="'.concat(e.attr("data-multisuggest-id"),'"]')):e},c.on("multisuggest:set_suggest",".js-multisuggest",(function(t,e){var i,s,n=a()(this),o=n.find(".js-multisuggest-list").find(".js-multisuggest-item:not(.multisuggest__list-input)"),u=n.data("values-hash")||[],c=n.data("inner-items-tmpl")||n.data("items-tmpl")||"/tmpl/controls/multisuggest/item.twig",h=a()('[data-multisuggest-id="'.concat(n.attr("data-multisuggest-id"),'"]:not(.js-multisuggest)')),f=h.hasClass("js-multisuggest-suggest")?h:h.find(".js-multisuggest-suggest"),g="";!1===e&&(e=""),r().isUndefined(e)||(e=(0,d.trim)(e),i=r().filter(u,(function(t){var i=(t.title||t.label||t.name||"").toString().toLowerCase(),n=(t.title_origin||t.title||t.label||t.name||"").toString(),l=(0,d.transliterate)(i),u=(0,d.transliterate)(i,"punto"),c=r().reduce(t,(function(t,e,i){return"id"===i||"name"===i||"label"===i||"title"===i?t:"".concat(t," ").concat((e||"").toString().toLowerCase())}),"");return i&&(i.indexOf(e.toLowerCase())>=0||l.indexOf(e.toLowerCase())>=0||u.indexOf(e.toLowerCase())>=0||c.indexOf(e.toLowerCase())>=0)&&!o.filter((function(e,i){return s=a().trim(a()(i).text()||""),parseInt(a()(i).attr("data-id"))===parseInt(t.id)||!t.is_filter_by_id&&s===n})).length})),r().each(r().first(i,100),(function(t){g+=l()({ref:c}).render({item:t,is_suggest_item:!0,class_name:"multisuggest__suggest-item"})})),e&&n.hasClass("js-can-add")&&(g+=l()({ref:c}).render({item:{id:"new",name:e,title:['<svg class="svg-icon svg-common--arrow-left-cornered-dims"><use xlink:href="#common--arrow-left-cornered"></use></svg> '.concat(n.attr("data-new-item-msg")||APP.lang.fast_tags_empty),'<span class="new-tag">'.concat(r().escape(e),"</span>")].join(" ")},class_name:"multisuggest__suggest-item multisuggest__suggest-item_add"}))),f.html(g),g.length?(h.show(),n.find(".js-multisuggest-input").on("keyup.escape",(function(t){27===t.keyCode&&(a()(this).off("keyup.escape"),t.stopPropagation())})),n.addClass("multisuggest_show-suggest").trigger("multisuggest:has_value")):(h.hide(),n.removeClass("multisuggest_show-suggest").trigger("multisuggest:no_value")),n.find(".js-multisuggest-input").trigger("multisuggest:select-first")})).on("multisuggest:item:remove",".js-multisuggest-item",(function(t,e){var i,s=a()(this),n=f.getSuggest(s);s.hasClass("js-multisuggest-input")&&!e||(i={title:a().trim(s.text()),id:s.attr("data-id")},s.remove(),n.trigger("multisuggest:set_suggest",[!1]).trigger("multisuggest:item:removed",[i]))})).on("multisuggest:item:choose",".js-multisuggest",(function(t,e){var i=a()(this),s=i.find(".js-multisuggest-list .js-multisuggest-item").filter((function(){return a()(this).attr("data-id")===parseInt(e.id)||"id"!==e.filter&&a()(this).text()===(e.title_origin||e.title.toString())})),n=e.suggest_params&&e.suggest_params.template?e.suggest_params.template:"/tmpl/controls/multisuggest/item.twig";s.length||!a().trim(e.title)?i.find(".js-multisuggest-input input").val(""):i.addClass("multisuggest_show-list").find(".js-multisuggest-input").val("").parent().before(l()({ref:n}).render({item:e,is_list_item:!0,is_suggest_item:!0})),APP.is_touch_device||i.find(".js-multisuggest-input").blur().focus(),i.trigger("multisuggest:set_suggest",[!1]).trigger("multisuggest:item:choosed",e)})).on("multisuggest:set_hint",".js-multisuggest-input",(function(t,e,i){var s=a()(this),n=s.parent().find(".js-multisuggest-hint");if(s.removeClass("h-suggest-failed"),e||i)if(e||!i){var r=new u.UnsafeRegExp("(^|\\s)(".concat(e.replace(/(\/|\[)/gi,"\\$1"),"(.+)?)($|\\s)"),"i"),o=i.match(r);o?n.text("".concat(a().trim(o[0].replace(new u.UnsafeRegExp(e,"i"),e))," ").concat(i.replace(r,""))):(i||s.addClass("h-suggest-failed"),n.text(""))}else n.text(i);else n.text("")})).on("multisuggest:select-first",".js-multisuggest-input",(function(t,e){var i,s,n=a()(this);r().isEmpty(e)||(i=n.closest(".js-multisuggest"),(s=a()('[data-multisuggest-id="'.concat(i.attr("data-multisuggest-id"),'"]:not(.js-multisuggest)'))).find(".".concat(p,"_selected")).removeClass("".concat(p,"_selected")),s.find('.js-multisuggest-item[data-id="'.concat(e.id,'"]')).addClass("".concat(p,"_selected"))),n.trigger({type:"keydown",keyCode:h})})),a()(window).on("mousemove",(function(){_&&(_=!1)})),c.on("keydown",".js-multisuggest-input",(function(t){var e=a()(this),i=e.closest(".js-multisuggest"),s=a()('[data-multisuggest-id="'.concat(i.attr("data-multisuggest-id"),'"]:not(.js-multisuggest)'));if(a().isFunction(g[t.keyCode]))return g[t.keyCode].call(this,{$wrapper:i,$list:s,$selected:s.find(".".concat(p,"_selected")),keyCode:t.keyCode,can_add:"N"!==e.attr("data-can-add"),item_class:p,value:t.inputValue||e.val(),template:i.data("inner-items-tmpl")||"/tmpl/controls/multisuggest/item.twig"})})).on("mouseover",".js-multisuggest-item",(function(){var t=a()(this),e=f.getSuggest(t);if(!(_||t.hasClass("multisuggest__list-item")||t.hasClass("suggest-segments__list-item")||t.hasClass("multisuggest__suggest-item_selected"))){t.closest(".js-multisuggest-suggest").find(".multisuggest__suggest-item_selected").removeClass("multisuggest__suggest-item_selected"),t.addClass("multisuggest__suggest-item_selected");var i=e.find(".js-multisuggest-input");i.trigger("multisuggest:set_hint",[i.val(),f.getTitle(t)])}})).on("input",".js-multisuggest-input",(function(){f.getSuggest(a()(this)).trigger("multisuggest:set_suggest",this.value.toString())})).on("click suggest:suggest:click",".js-multisuggest-item",(function(t,e){t.stopPropagation(),f.clickItem(a()(this),e)})).on("click suggest:list:click",".js-multisuggest-item",(function(){return f.removeItem(a()(this))}));const v=f;var y="../build/transpiled/interface/controls/multisuggest";window.define(y,(function(){var t="undefined",i=typeof e===t?typeof __WEBPACK_AMD_DEFINE_RESULT__===t?typeof module===t?void 0:module.exports:__WEBPACK_AMD_DEFINE_RESULT__:e;return i&&i.default||i})),window.require([y])},834834:(t,e,i)=>{"use strict";i.r(e),i.d(e,{default:()=>o});var s=i(629133),a=i.n(s),n=i(661533),r=function(){};a().extend(r.prototype,{getElements:function(t){var e={filter:{catalog_id:t}};return this._getElementsList(e)},getElementsByIds:function(t,e){var i={filter:{catalog_id:t,id:e}};return this._getElementsList(i)},searchElements:function(t,e){var i={filter:{catalog_id:t,term:e,filter:arguments.length>2&&void 0!==arguments[2]?arguments[2]:{}}};return this._getElementsList(i)},getListUrl:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return"/ajax/v1/catalog_elements/list"+(a().isEmpty(t.qs_params)?"":"/?".concat(n.param(t.qs_params)))},_getElementsList:function(t){var e=n.Deferred(),i=t.filter||{};return this._doGetRequest(i).then((function(t,i,s){e.resolve(200===s.status?a().values(t.response.catalog_elements):[])})),e.promise()},_doGetRequest:function(t){return n.ajax({url:"/ajax/v1/catalog_elements/list",method:"GET",dataType:"JSON",data:t})}});const o=new r;var l="../build/transpiled/network/catalogs/elements";window.define(l,(function(){var t="undefined",i=typeof e===t?typeof __WEBPACK_AMD_DEFINE_RESULT__===t?typeof module===t?void 0:module.exports:__WEBPACK_AMD_DEFINE_RESULT__:e;return i&&i.default||i})),window.require([l])},656580:(t,e,i)=>{"use strict";i.r(e),i.d(e,{default:()=>u});var s=i(629133),a=i.n(s),n=i(323344),r=i(661533),o={},l={};r(document).on("page:changed",(function(){o={},l={}}));var d=function(){};a().extend(d.prototype,{getPipelines:function(t){return!0===t||a().isEmpty(o)?(this._pipelines_xhr||(this._pipelines_xhr=r.ajax({url:"/ajax/v1/pipelines/list",type:"GET",dataType:"json"}).always(a().bind((function(){this._pipelines_xhr=null}),this)).then((function(t){var e=t.response;return a().each(e.pipelines,(function(t){t.statuses=a().sortBy(t.statuses,"sort")})),o=e,e}))),this._pipelines_xhr):r.Deferred().resolve(o)},getPipelinesWithUnsorted:function(t){return!0===t||a().isEmpty(l)?(this._pipelines_w_unsorted_xhr||(this._pipelines_w_unsorted_xhr=r.ajax({url:"/ajax/v1/pipelines/list?with_unsorted=true",type:"GET",dataType:"json"}).always(a().bind((function(){this._pipelines_w_unsorted_xhr=null}),this)).then((function(t){var e=t.response;return a().each(e.pipelines,(function(t){t.statuses=a().sortBy(t.statuses,"sort")})),l=e,e}))),this._pipelines_w_unsorted_xhr):r.Deferred().resolve(l)},getLeadsByStatus:function(t,e){var i=this;return t=t?t+"/":"",this._lbs_fetching=this._lbs_fetching||{},e=e||(0,n.getQueryString)(),this._lbs_fetching[e]&&4!==this._lbs_fetching[e].readyState||(this._lbs_fetching[e]=r.ajax({url:"/ajax/leads/sum/".concat(t),data:"leads_by_status=Y".concat((e.length?"&":"")+e),type:"POST"}).always((function(){delete i._lbs_fetching[e]}))),this._lbs_fetching[e]},getLossReasons:function(){return r.ajax({url:"/ajax/v3/loss_reasons"})},getLeadsCount:function(t){return r.ajax({url:"/ajax/leads/sum/?pipeline_id=".concat(t),data:{leads_count:"Y"},type:"POST"})},getStatusesWithLeads:function(t,e){return r.ajax({url:"/ajax/leads/sum/".concat(t),data:(i={leads_by_status:"Y"},s="filter[pipe][".concat(t,"][]"),a=e,s in i?Object.defineProperty(i,s,{value:a,enumerable:!0,configurable:!0,writable:!0}):i[s]=a,i),type:"POST"});var i,s,a},getTriggersCount:function(t){return r.ajax({url:"/ajax/leads/pipelines/".concat(t,"/triggers/count")})},getLeadDoubles:function(t){return t?r.ajax({url:"/ajax/v4/leads/doubles/".concat(t)}):Promise.reject()},getListLeadsCount:function(t,e,i){var s="/ajax/leads/list/".concat(t?"pipeline/".concat(t):"","?only_count=Y").concat(i?"&".concat(i):"").concat(e?"&SHOW_DELETED=Y":"");return r.ajax({url:s,type:"GET"})},saveStatuses:function(t,e){return r.ajax({url:"/ajax/leads/pipelines/".concat(e,"/statuses"),type:"POST",dataType:"text",contentType:"application/json",data:JSON.stringify({statuses:t})})}});const u=new d;var c="../build/transpiled/network/leads/api";window.define(c,(function(){var t="undefined",i=typeof e===t?typeof __WEBPACK_AMD_DEFINE_RESULT__===t?typeof module===t?void 0:module.exports:__WEBPACK_AMD_DEFINE_RESULT__:e;return i&&i.default||i})),window.require([c])},982862:(t,e,i)=>{"use strict";i.r(e),i.d(e,{getImboxOverlayWidth:()=>f,getScrollBarWidth:()=>h,getShortText:()=>c,getTextWidth:()=>u,replaceHtml:()=>g,scrollBarWidth:()=>m,setCursorPosition:()=>d});var s=i(629133),a=i.n(s),n=i(661533),r=i(661533),o=document.createElement("canvas"),l={},d=function(t,e,i){var s,a;if(s=t,(null!=(a=n)&&"undefined"!=typeof Symbol&&a[Symbol.hasInstance]?a[Symbol.hasInstance](s):s instanceof a)&&(t=t.get(0)),t.setSelectionRange)e=e||2*(t.value||"").length,t.focus(),t.setSelectionRange(e,e);else if(t.getAttribute("contenteditable")&&"false"!==t.contentEditable){var r=document.createRange(),o=window.getSelection();if(e=e||t.innerText.length,i)r.setStart(i,e),r.setEnd(i,e);else{var l=function(t){var e,i;for(i=0;i<(t.childNodes||[]).length;i++)if(3===t.childNodes[i].nodeType){e=t.childNodes[i];break}return e||t}(t);r.setStart(l,e),r.setEnd(l,e)}o.removeAllRanges(),o.addRange(r)}},u=function(t,e){var i=o.getContext("2d");return e=e||'normal 15px "PT Sans"',i.font=e,i.measureText(t).width},c=function(t,e){var i=t.substring(0,t.length/2),s=t.substring(t.length/2,t.length),a="".concat(i,"...").concat(s);if(u(a)<=e)return t;for(;u(a)>e;)i=i.substring(0,i.length-1),s=s.substring(1,s.length),a="".concat(i,"...").concat(s);return a},h=function(t){var e,i,s,a;return l[t]||((e=document.createElement("div")).style.visibility="hidden",e.style.width="100px",document.body.appendChild(e),i=e.offsetWidth,e.style.overflow="scroll",e.className=t||"",(a=document.createElement("div")).style.width="100%",e.appendChild(a),s=a.offsetWidth,e.parentNode.removeChild(e),l[t]=i-s),l[t]},f=function(){var t=r(window).width()-65,e=a().propertyOf(APP.constant("user"))(["settings","layout_width","talks","width"])||0,i=Math.round(t*(e/100));return.3*Math.max(i,370)},g=function(t,e){var i,s="string"==typeof t?document.getElementById(t):t;if(!s)return null;var a=s.cloneNode(!1);a.innerHTML=e;var n=s.querySelector("#search-options"),o=a.querySelector("#search-options");if(o&&n&&n.parentNode&&r(n.parentNode).hasClass("list-top-search-options-showed")&&window.location.search&&o.parentNode){var l=o.parentNode.querySelector("#search_clear_button");l&&(l.style.display="block"),r(o.parentNode).addClass("list-top-search-options-showed"),o.parentNode.replaceChild(n,o)}return null===(i=s.parentNode)||void 0===i||i.replaceChild(a,s),a},m=h()||0,p="../build/transpiled/utils/dom_ops";window.define(p,(function(){var t="undefined",i=typeof e===t?typeof __WEBPACK_AMD_DEFINE_RESULT__===t?typeof module===t?void 0:module.exports:__WEBPACK_AMD_DEFINE_RESULT__:e;return i&&i.default||i})),window.require([p])},390788:(t,e,i)=>{"use strict";i.r(e),i.d(e,{copyToClipboard:()=>l,digitsOnly:()=>o,keycodes:()=>r});var s=i(629133),a=i.n(s),n=i(306843),r={ENTER:13,TAB:9,BACKSPACE:8,RIGHT_KEY:39,LEFT_KEY:37,UP_KEY:38,DOWN_KEY:40,ESCAPE:27,SPACE:32},o=function(t){if(!a().isUndefined(t)){var e=t.which;(e<48||e>57)&&e&&8!==t.keyCode&&t.preventDefault()}},l=function(t,e){var i=document.createElement("textarea"),s="firefox"===n.default.browser;(i=document.createElement("textarea")).style.fontSize="12pt",i.style.border="0",i.style.padding="0",i.style.margin="0",i.style.position="fixed",i.style.left="-9999px",i.style.top="".concat(window.pageYOffset||document.documentElement.scrollTop,"px"),i.setAttribute("readonly",""),i.value=e,document.body.appendChild(i),i.focus(),i.setSelectionRange(0,i.value.length);try{document.execCommand("copy"),t&&s&&t.preventDefault()}catch(t){}a().delay((function(){document.body.removeChild(i)}),100)},d="../build/transpiled/utils/events";window.define(d,(function(){var t="undefined",i=typeof e===t?typeof __WEBPACK_AMD_DEFINE_RESULT__===t?typeof module===t?void 0:module.exports:__WEBPACK_AMD_DEFINE_RESULT__:e;return i&&i.default||i})),window.require([d])},49987:(t,e,i)=>{"use strict";i.r(e),i.d(e,{convertTzAccount:()=>u,format:()=>l,moment:()=>d});var s=i(629133),a=i.n(s),n=i(161320),r=i.n(n),o=/^\d{4}-\d{2}-\d{2}/,l=function(t){var e=APP.system.format.date[t],i=APP.system.format.date.date;switch(!0){case"catalog"===t:return"YYYY-MM-DD HH:mm:ss";case"parse"===t:return[i.replace("YYYY","YY")].concat([i]);case a().isUndefined(e):return i;default:return e}},d=function(t,e){var i;if(a().isString(e)?(i=e,e={}):i=e.format,!l)switch(i=l(e.type),!0){case a().isString(t)&&o.test(t):i=l("catalog");break;case a().isString(t):i=l("full");break;default:i="X"}var s=r()(t,i);return!1!==e.apply_timezone&&s.tz(APP.system.timezone),s},u=function(t){var e=APP.system.format.date.full,i=r()(t,e);return r()().tz(APP.constant("account").timezone).set("year",i.get("year")).set("month",i.get("month")).set("date",i.get("date")).set("hour",i.get("hour")).set("minute",i.get("minute")).set("second",i.get("second")).set("millisecond",i.get("millisecond")).unix()},c="../build/transpiled/utils/format/date";window.define(c,(function(){var t="undefined",i=typeof e===t?typeof __WEBPACK_AMD_DEFINE_RESULT__===t?typeof module===t?void 0:module.exports:__WEBPACK_AMD_DEFINE_RESULT__:e;return i&&i.default||i})),window.require([c])}}]);var _global="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};_global.SENTRY_RELEASE={id:"build_2025_11_28_17_08_33"},function(){try{var t="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},e=(new Error).stack;e&&(t._sentryDebugIds=t._sentryDebugIds||{},t._sentryDebugIds[e]="f8af4583-8147-48de-8ef3-ae298c656ea6",t._sentryDebugIdIdentifier="sentry-dbid-f8af4583-8147-48de-8ef3-ae298c656ea6")}catch(t){}}();
//# sourceMappingURL=50171.5701794b393a92b729aa.js.map